/*@nomin*/
!function(e){function t(t){for(var a,o,r=t[0],c=t[1],l=t[2],g=0,d=[];g<r.length;g++)o=r[g],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);for(u&&u(t);d.length;)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],a=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(a=!1)}a&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},s={cx:0},i=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window.webpackJsonp=window.webpackJsonp||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var u=c;i.push([0,"cx.ui","cx.libs"]),n()}({0:function(e,t,n){e.exports=n("56d7")},"02cc":function(e,t,n){},"0466":function(e,t,n){},"0606":function(e,t){e.exports='<svg width="136px" height="136px" viewBox="0 0 136 136" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>happy-robot</title> <g id="happy-robot" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Group"> <circle id="Oval" fill="#EAF3FF" cx="68" cy="68" r="68"></circle> <path d="M70,40.99684 L96.02,40.99684 C100.428,40.99684 104,44.58084 104,48.98484 L104,82.99684 L74,82.99684 L74,92.99684 L96.02,92.99684 C100.428,92.99684 104,96.54884 104,100.99684 L104,108.99684 L32,108.99684 L32,100.99684 C32,96.57684 35.572,92.99684 39.98,92.99684 L62,92.99684 L62,82.99684 L32,82.99684 L32,48.98484 C32,44.57284 35.572,40.99684 39.98,40.99684 L66,40.99684 L66,32.65684 C63.244908,31.68276 61.59226,28.86552 62.086412,25.98536 C62.580564,23.10524 65.077784,21 68,21 C70.9222,21 73.41944,23.10524 73.9136,25.98536 C74.40776,28.86552 72.75508,31.68276 70,32.65684 L70,40.99684 Z M62,73 C62,76.3137085 64.6862915,79 68,79 C71.3137085,79 74,76.3137085 74,73 M54,64.99684 C57.313708,64.99684 60,62.310548 60,58.99684 C60,55.68312 57.313708,52.99684 54,52.99684 C50.686292,52.99684 48,55.68312 48,58.99684 C48,62.310548 50.686292,64.99684 54,64.99684 Z M82,64.99684 C85.31372,64.99684 88,62.310548 88,58.99684 C88,55.68312 85.31372,52.99684 82,52.99684 C78.68628,52.99684 76,55.68312 76,58.99684 C76,62.310548 78.68628,64.99684 82,64.99684 Z" id="Mask" fill="#3366CC"></path> </g> </g> </svg> '},"0651":function(e,t){SXEditorBackCommand=function e(){e.super.call(this,"back")},OO.inheritClass(SXEditorBackCommand,ve.ui.Command),SXEditorBackCommand.prototype.execute=function(){ve.init.target.back()},ve.ui.commandRegistry.register(new SXEditorBackCommand),e.exports=SXEditorBackCommand},"074a":function(e,t,n){},"07b6":function(e,t,n){"use strict";n("c9fd")},"07c3":function(e,t,n){"use strict";n("e9dc")},"09bc":function(e,t,n){"use strict";n("9813")},"11f4":function(e,t,n){},"14e3":function(e,t,n){},1594:function(e,t,n){},"15a9":function(e,t,n){"use strict";n("d7f4")},"160b":function(e,t){e.exports='<svg width="136px" height="136px" viewBox="0 0 136 136" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>publishing-launching</title> <defs> <path d="M52.8,74.8 C52.8,79.64 44,83.6 44,83.6 C44,83.6 35.2,79.64 35.2,74.8 L52.8,74.8 Z M44,30.8 C40.3939316,30.707512 37.49251,27.806064 37.4,24.2 C37.4,20.554908 40.3549256,17.6 44,17.6 C47.645092,17.6 50.6,20.554908 50.6,24.2 C50.507468,27.806064 47.606064,30.707512 44,30.8 Z M58.52,51.48 C62.04,34.76 55.88,4.4 44,4.4 C32.12,4.4 25.52,33.88 29.04,50.6 L22,66 L33.88,66 L35.2,70.4 L52.8,70.4 C53.68,69.08 53.24,68.2 54.12,66 L66,66 L58.52,51.48 Z" id="path-1"></path> </defs> <g id="publishing-launching" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Group" fill="#EAF3FF"> <circle id="Oval" cx="68" cy="68" r="68"></circle> </g> <g id="🔣-Icon/Wikimedia-logos/logoWikimediaDiscovery" transform="translate(24.000000, 24.000000)"> <mask id="mask-2" fill="white"> <use xlink:href="#path-1"></use> </mask> <use id="Mask-2" fill="#000000" fill-rule="evenodd" xlink:href="#path-1"></use> <g id="🎨-Color/Accent50-#36c" mask="url(#mask-2)" fill="#3366CC" fill-rule="evenodd"> <rect id="Rectangle-1" x="0" y="0" width="105.6" height="105.6"></rect> </g> </g> </g> </svg>'},"1c5b":function(e,t,n){"use strict";n("67bb")},"1fdd":function(e,t,n){"use strict";n("a32b")},"21fa":function(e,t,n){"use strict";n("074a")},2395:function(e,t,n){},"250e":function(e,t,n){"use strict";n("5827")},"268c":function(e,t,n){"use strict";n("faf7")},"287c":function(e,t,n){},"30ea":function(e,t,n){"use strict";n("b5be")},"30ee":function(e,t,n){},3492:function(e,t,n){},"34e5":function(e,t,n){"use strict";n("a6e7")},3619:function(e,t,n){"use strict";n("5524")},3634:function(e,t){SXEditorNextCommand=function e(){e.super.call(this,"next")},OO.inheritClass(SXEditorNextCommand,ve.ui.Command),SXEditorNextCommand.prototype.execute=function(){ve.init.target.next()},ve.ui.commandRegistry.register(new SXEditorNextCommand),e.exports=SXEditorNextCommand},"37c1":function(e,t,n){},"37fc":function(e,t){e.exports='<svg width="136px" height="136px" viewBox="0 0 136 136" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>sad-robot</title> <g id="sad-robot" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Group"> <circle id="Oval" fill="#EAECF0" cx="68" cy="68" r="68"></circle> <path id="Mask" d="M70,40.99684 L96.02,40.99684 C100.428,40.99684 104,44.58084 104,48.98484 L104,82.99684 L74,82.99684 L74,92.99684 L96.02,92.99684 C100.428,92.99684 104,96.54884 104,100.99684 L104,108.99684 L32,108.99684 L32,100.99684 C32,96.57684 35.572,92.99684 39.98,92.99684 L62,92.99684 L62,82.99684 L32,82.99684 L32,48.98484 C32,44.57284 35.572,40.99684 39.98,40.99684 L66,40.99684 L66,32.65684 C63.244908,31.68276 61.59226,28.86552 62.086412,25.98536 C62.580564,23.10524 65.077784,21 68,21 C70.9222,21 73.41944,23.10524 73.9136,25.98536 C74.40776,28.86552 72.75508,31.68276 70,32.65684 L70,40.99684 Z M62,78 C62,74.6862915 64.6862915,72 68,72 C71.3137085,72 74,74.6862915 74,78 M54,64.99684 C57.313708,64.99684 60,62.310548 60,58.99684 C60,55.68312 57.313708,52.99684 54,52.99684 C50.686292,52.99684 48,55.68312 48,58.99684 C48,62.310548 50.686292,64.99684 54,64.99684 Z M82,64.99684 C85.31372,64.99684 88,62.310548 88,58.99684 C88,55.68312 85.31372,52.99684 82,52.99684 C78.68628,52.99684 76,55.68312 76,58.99684 C76,62.310548 78.68628,64.99684 82,64.99684 Z" fill="#54595D"></path> </g> </g> </svg>'},"391f":function(e,t,n){"use strict";n("3492")},"39bd":function(e,t,n){"use strict";n("94f9")},"3ac3":function(e,t,n){"use strict";n("83a6")},"3e4a":function(e,t,n){"use strict";n("37c1")},"408c":function(e,t,n){},4550:function(e,t,n){"use strict";n("fc87")},"45dd":function(e,t){SXEditorBackTool=function e(){e.super.apply(this,arguments)},OO.inheritClass(SXEditorBackTool,ve.ui.Tool),SXEditorBackTool.static.name="back",SXEditorBackTool.static.group="navigation",SXEditorBackTool.static.icon="close",SXEditorBackTool.static.title=OO.ui.deferMsg("visualeditor-backbutton-tooltip"),SXEditorBackTool.static.commandName="back",SXEditorBackTool.prototype.onUpdateState=function(){SXEditorBackTool.super.prototype.onUpdateState.apply(this,arguments),this.setActive(!1),this.setDisabled(!1)},ve.ui.toolFactory.register(SXEditorBackTool),e.exports=SXEditorBackTool},"4afe":function(e,t,n){"use strict";n("30ee")},"4b31":function(e,t,n){var a={"./happy-robot.svg":"0606","./publishing-failure.svg":"b3ed","./publishing-launching.svg":"160b","./publishing-success.svg":"5cce","./sad-robot.svg":"37fc","./tutorial-mt.svg":"e1b0","./tutorial-sections.svg":"c69b"};function s(e){var t=i(e);return n(t)}function i(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}s.keys=function(){return Object.keys(a)},s.resolve=i,e.exports=s,s.id="4b31"},"4c90":function(e,t,n){},"4d50":function(e,t,n){"use strict";n("a8dd")},"50f1":function(e,t,n){},"51f3":function(e,t,n){},5282:function(e,t,n){"use strict";n("da9e")},"542a":function(e,t,n){"use strict";n("898f")},5524:function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);var a=n("2b0e"),o=n("87ed"),r=n("2f62"),l={name:"ContentTranslationApp",components:{MwGrid:o.i,MwCol:o.e,MwRow:o.p},data:()=>({transitionName:""}),computed:{...Object(r.b)({translationInProgress:e=>e.application.translationInProgress})},watch:{$route(e,t){const n=e.meta.workflowStep,a=t.meta.workflowStep;this.transitionName=n<a?"mw-ui-animation-slide-end":"mw-ui-animation-slide-start"}},mounted(){window.addEventListener("beforeunload",e=>{this.translationInProgress&&(e.preventDefault(),e.returnValue="")})}},u=(n("7c55"),n("2877")),d=Object(u.a)(l,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-grid",{attrs:{id:"contenttranslation"}},[n("mw-row",{staticClass:"cx-container"},[n("mw-col",{attrs:{cols:"12"}},[n("transition",{attrs:{name:e.transitionName}},[n("router-view")],1)],1)],1)],1)}),[],!1,null,null,null).exports,p={username:mw.config.get("wgUserName"),isAnon:mw.user.isAnon(),translations:[],translationsLoaded:!1};const h=e=>{const t=document.createElement("article");return t.innerHTML=e,Array.prototype.forEach.call(t.querySelectorAll("article, section, [data-segmentid]"),e=>{const t=e.parentNode;for(;e.firstChild;)t.insertBefore(e.firstChild,e);e.remove()}),Array.prototype.forEach.call(t.querySelectorAll(".cx-link"),e=>{var t;const n=JSON.parse(e.getAttribute("data-cx")||"{}");!1===(null==n?void 0:n.adapted)&&!0!==(null==n||null===(t=n.targetTitle)||void 0===t?void 0:t.missing)?e.replaceWith(e.innerHTML):["data-linkid","class","title","id"].forEach(t=>{e.removeAttribute(t)})}),Array.prototype.forEach.call(t.querySelectorAll(".mw-ref"),e=>{const t=JSON.parse(e.getAttribute("data-cx")||"{}");!1===(null==t?void 0:t.adapted)&&e.parentNode.removeChild(e)}),Array.prototype.forEach.call(t.querySelectorAll("[data-cx]"),e=>{e.removeAttribute("data-cx")}),Array.prototype.forEach.call(t.querySelectorAll("tr[id], td[id], th[id], table[id], tbody[id], thead[id], div[id]"),e=>{e.removeAttribute("id")}),t.innerHTML};var v={getArticleTitleForPublishing:(e,t,n)=>{const{currentSectionSuggestion:a,publishTarget:s,currentSourceSection:i}=n.application;return((e,t)=>{const n=mw.config.get("wgNamespaceIds"),a={NEW_SECTION:n[""],SANDBOX_SECTION:n.user};return mw.cx.getTitleForNamespace(e,a[t])})(a.targetTitle||i.title,s)},getSectionTitleForPublishing:(e,t,n,a)=>{const{currentSectionSuggestion:s,currentSourceSection:i}=n.application;if(i.isLeadSection)return"";const o=a["suggestions/getFirstAppendixTitleBySectionSuggestion"](s);return s.presentSections[i.originalTitle]||(!o||a["application/isSandboxTarget"]?i.title:"")},getSectionNumberForPublishing:(e,t,n,a)=>{const{currentSectionSuggestion:s,currentSourceSection:i}=n.application;if(i.isLeadSection)return 0;if(a["application/isSandboxTarget"])return"new";const o=a["application/getCurrentTargetPage"],r=a["suggestions/getFirstAppendixTitleBySectionSuggestion"](s),c=s.presentSections[i.originalTitle];return c?o.getSectionNumberByTitle(c):r?o.getSectionNumberByTitle(r):"new"},getCleanHTMLForPublishing:(e,t,n,a)=>{const{currentSectionSuggestion:s,currentSourceSection:i}=n.application,o=!!s.presentSections[i.originalTitle],r=a["suggestions/getFirstAppendixTitleBySectionSuggestion"](s);if(a["application/isSandboxTarget"]||i.isLeadSection||o||!r)return h(i.translationHtml);return((e,t)=>{const n=e=>{const t=document.createElement("h2");return t.textContent=e,t},a=n(e.title),s=n(t.originalTitle),i=h(e.translationHtml),o=h(t.html);return`${a.outerHTML}\n${i}\n${s.outerHTML}\n${o}`})(i,a["application/getCurrentTargetPage"].sections.find(e=>e.originalTitle===r))},getPublishedTranslationsForLanguagePair:e=>(t,n)=>e.translations.filter(e=>e.sourceLanguage===t&&e.targetLanguage===n&&"published"===e.status),getDraftTranslationsForLanguagePair:e=>(t,n)=>e.translations.filter(e=>e.sourceLanguage===t&&e.targetLanguage===n&&"draft"===e.status),getPublishedTranslations:e=>e.translations.filter(e=>"published"===e.status),getDraftTranslations:e=>e.translations.filter(e=>"draft"===e.status),hasSectionTranslations:e=>e.translations.some(e=>e.hasSectionTranslations),getAllTranslationsForLanguagePair:e=>(t,n)=>e.translations.filter(e=>e.sourceLanguage===t&&e.targetLanguage===n)};const S=["cjy-hans","cjy-hant","gan-hans","gan","hak-hans","hak-hant","hsn","ii","ja","jje","ko-kp","ko","lzh","ryu","wuu","yue","zh","zh-cn","zh-hans","zh-hant","zh-hk","zh-mo","zh-my","zh-sg","zh-tw"],x=function(e,t){return e?S.includes(t)?e.split(""):e.match(/\S+/g)||[]:[]},T=[{status:"failure",value:5},{status:"warning",value:15},{status:"success",value:100}],y=(e,t)=>{const n=k(e).textContent,s=100-100*((e,t,n)=>{let a,s,i,o,r;return e&&t?e===t?1:(s=o=x(e,n),i=r=x(t,n),r.length>o.length&&(s=r,i=o),a=s.filter((function(e){return i.indexOf(e)>=0})),a.length/s.length):0})(k(t).textContent,n);return Math.ceil(s)},k=e=>{const t=document.createElement("div");return t.innerHTML=e,t};var O_calculateScore=y,O_getScoreStatus=e=>T.find(t=>e<=t.value).status,O_getMTScoreForPageSection=(e,t)=>y(e.translationHtml,e.getProposedTranslationHtml(t));class P{constructor({sourceLanguage:e,targetLanguage:t,sourceTitle:n,targetTitle:a,status:s,id:i,sourceURL:o,targetURL:r,startTimestamp:c,lastUpdateTimestamp:l,progress:u={},startedTranslator:g,lastUpdatedTranslator:d,cxVersion:p}){this.id=i,this.cxVersion=p,this.sourceLanguage=e,this.targetLanguage=t,this.sourceTitle=n,this.targetTitle=a,this.sourceURL=o,this.targetURL=r,this.progress=u,this.status=s,this.startedTranslator=g,this.lastUpdatedTranslator=d,this.lastUpdateTimestamp=l,this.startTimestamp=c}}const j="original",A="empty";class M{constructor(e,t,n=[]){this.sourceLanguage=e,this.targetLanguage=t,this.providers=[...n,j,A]}static get ORIGINAL_TEXT_PROVIDER_KEY(){return j}static get EMPTY_TEXT_PROVIDER_KEY(){return A}}const I=new mw.cx.SiteMapper,E=mw.util.getUrl;class N{constructor({text:e="",title:t="",type:n="generic",status:a}){this.text=e,this.title=t,this.type=n,this.status=a}get isMTMessage(){return"mt"===this.type}get isError(){return"error"===this.status}}var q={fetchTranslations:async function F(e){if(mw.user.isAnon())return Promise.resolve([]);const t={action:"query",format:"json",assert:"user",formatversion:2,list:"contenttranslation"};return e&&(t.offset=e),(new mw.Api).get(t).then(async e=>{var t;let a=e.query.contenttranslation.translations.map(e=>new P(e.translation));if(null!==(t=e.continue)&&void 0!==t&&t.offset){const t=await F(e.continue.offset);a=a.concat(t)}return a})},fetchSegmentTranslation:async function(e,t,n,a,s){if(!a)return;let i=`/translate/${e}/${t}`;n!==M.ORIGINAL_TEXT_PROVIDER_KEY&&(i+="/"+n);const o=I.getCXServerUrl(i);return fetch(o,{headers:{"Content-Type":"application/json",Authorization:s},method:"POST",body:JSON.stringify({html:`<div>${a}</div>`})}).then(e=>e.json()).then(e=>{var t,n;return null===(t=/<div>(?<content>(.|\s)*)<\/div>/.exec(e.contents))||void 0===t||null===(n=t.groups)||void 0===n?void 0:n.content}).catch(e=>Promise.reject(e))},parseTemplateWikitext:(e,t,n)=>{const a=I.getApi(t);return Promise.resolve(a.post({origin:"*",action:"visualeditor",paction:"parsefragment",page:n,wikitext:e,pst:!0})).then(e=>e.visualeditor.content).catch(e=>(mw.log.error(e),Promise.reject(e)))},publishTranslation:({html:e,sourceTitle:t,targetTitle:n,sourceSectionTitle:a,targetSectionTitle:s,sourceLanguage:i,targetLanguage:o,revision:r,sectionNumber:c})=>{const l={action:"cxpublishsection",title:n,html:e,sourcetitle:t,sourcerevid:r,sourcesectiontitle:a,targetsectiontitle:s,sourcelanguage:i,targetlanguage:o,sectionnumber:c};return(new mw.Api).postWithToken("csrf",l).then(()=>null).catch((e,t)=>{let n;return n=t.exception?t.exception.message:t.error?t.error.info:"Unknown error",new N({text:n,status:"error"})})}};var Y={namespaced:!0,state:p,getters:v,actions:{validateMT:function({rootState:e,commit:t}){t("application/clearMTPublishFeedbackMessages",{},{root:!0});const{currentSourceSection:n}=e.application,a=O_getMTScoreForPageSection(n,e.application.currentMTProvider),s=O_getScoreStatus(a);if("success"===s)return;const i=100-a,o=mw.message("cx-sx-publisher-mt-abuse-message-title",i);t("application/addMTPublishFeedbackMessage",new N({title:o,text:mw.message("cx-sx-publisher-mt-abuse-message-body"),status:"failure"===s?"error":"warning",type:"mt"}),{root:!0})},publishTranslation:async function({rootState:e,commit:t,rootGetters:n,getters:a}){const s=n["application/getCurrentPage"],{currentSourceSection:i,currentSectionSuggestion:o,sourceLanguage:r,targetLanguage:c}=e.application;if(!o)throw new Error("Current source section cannot be empty during publishing");const l=await q.publishTranslation({html:a.getCleanHTMLForPublishing,sourceTitle:o.sourceTitle,targetTitle:a.getArticleTitleForPublishing,sourceSectionTitle:i.originalTitle,targetSectionTitle:a.getSectionTitleForPublishing,sourceLanguage:r,targetLanguage:c,revision:s.revision,sectionNumber:a.getSectionNumberForPublishing});l&&t("application/addPublishFeedbackMessage",l,{root:!0})},fetchTranslations:async function({commit:e,dispatch:t,state:n}){if(n.translations.length)return;const a=await q.fetchTranslations();a.forEach(t=>e("addTranslation",t));const s=a.reduce((e,t)=>{const n=t.sourceLanguage;return e[n]=e[n]||[],e[n].push(t.sourceTitle),e},{});e("setTranslationsLoaded",!0),Object.keys(s).forEach(e=>{t("mediawiki/fetchPageMetadata",{language:e,titles:s[e]},{root:!0})})},translateContent:async function({rootGetters:e,dispatch:t,rootState:n},{provider:a,originalContent:s}){const{sourceLanguage:i,targetLanguage:o}=n.application;if(!e["mediawiki/isValidProviderForTranslation"](i,o,a))return Promise.resolve();try{const e=await t("application/getCXServerToken",{},{root:!0});return await q.fetchSegmentTranslation(i,o,a,s,e)}catch(c){return mw.log.error("Error while translating segment",c),s}}},mutations:{addTranslation(e,t){e.translations.push(t)},setTranslationsLoaded:(e,t)=>{e.translationsLoaded=t}}},K=n("e3e7"),Z={pageSuggestions:[],sectionSuggestions:[],favorites:[],sectionSuggestionsLoadingCount:0,pageSuggestionsLoadingCount:0,maxSuggestionsPerSlice:3,sectionSuggestionSeedCollections:[],pageSuggestionSeedCollections:[],appendixSectionTitles:K,maxRecentlyEditedSuggestions:3};class Q{constructor({sourceLanguage:e,targetLanguage:t,sourceTitle:n,targetTitle:a,langLinksCount:s,wikidataId:i}){this.sourceLanguage=e,this.targetLanguage=t,this.sourceTitle=n,this.targetTitle=a,this.wikidataId=i,this.langLinksCount=s}get id(){return`${this.sourceLanguage}/${this.targetLanguage}/${this.sourceTitle}`}}class ee{constructor({sourceLanguage:e,targetLanguage:t,sourceTitle:n,targetTitle:a,present:s,missing:i,sourceSections:o,targetSections:r}){this.sourceLanguage=e,this.targetLanguage=t,this.sourceTitle=n,this.targetTitle=a,this.missingSections=i,this.presentSections=s,this.sourceSections=o,this.targetSections=r}get id(){return`${this.sourceLanguage}/${this.targetLanguage}/${this.sourceTitle}`}missingCoreSectionsCount(e){return Object.values(this.missingSections).filter(t=>!e.includes(t)).length}isValid(e){return this.missingCoreSectionsCount(e)>0}get missingSectionsCount(){return Object.keys(this.missingSections||{}).length}get presentSectionsCount(){return Object.keys(this.presentSections||{}).length}get translationExists(){return!!this.targetTitle}get orderedMissingSections(){return Object.entries(this.missingSections||{}).map(e=>({sourceTitle:e[0],targetTitle:e[1]})).sort((e,t)=>this.sourceSections.indexOf(e.sourceTitle)-this.sourceSections.indexOf(t.sourceTitle))}get orderedPresentSections(){return Object.entries(this.presentSections||{}).map(e=>({sourceTitle:e[0],targetTitle:e[1]})).sort((e,t)=>this.sourceSections.indexOf(e.sourceTitle)-this.sourceSections.indexOf(t.sourceTitle))}hasSectionTitle(e){return this.sourceSections.includes(e)}}class te{constructor({title:e,sourceLanguage:t,targetLanguage:n,missingSectionsCount:a=0}={}){this.title=e,this.sourceLanguage=t,this.targetLanguage=n,this.missingSectionsCount=a}}const ne=K.en;const oe=e=>{for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e};var ge={fetchFavorites:()=>{const t=new mw.Api;return Promise.resolve(t.postWithToken("csrf",{assert:"user",action:"query",list:"contenttranslationsuggestions"})).then(e=>{var t,n;const a=e.query.contenttranslationsuggestions.lists||{};return((null===(t=Object.values(a))||void 0===t||null===(n=t[0])||void 0===n?void 0:n.suggestions)||[]).map(e=>new te(e))}).catch(e=>{mw.log.error("Error while fetching favorite suggestions",e)})},fetchPageSuggestions:async function(e,t,n,a=24){var s;let i="/data/recommendation/article/creation/translation/"+e;n&&(i+="/"+n);const o=I.getRestbaseUrl(t,i),r=new URLSearchParams({count:""+a}),c=await fetch(`${o}?${r}`);if(!c.ok)throw new Error("Failed to load data from server");return((null===(s=await c.json())||void 0===s?void 0:s.items)||[]).map(n=>new Q({sourceTitle:n.title.replace(/_/g," "),sourceLanguage:e,targetLanguage:t,wikidataId:n.wikidata_id,langLinksCount:parseInt(n.sitelink_count)}))},fetchSectionSuggestions:async function(e,t,n){const a=[t,e,n].map(e=>encodeURIComponent(e)),s=I.getCXServerUrl("/suggest/sections/"+a.join("/")),i=await fetch(s).then(e=>e.ok?e.json():Promise.reject(new Error("Failed to load data from server"))).then(e=>null==e?void 0:e.sections).catch(e=>null);return i?new ee(i):null},fetchSuggestionSeeds:async function(e,t){const n={action:"query",format:"json",list:"cxpublishedtranslations",from:e,to:t,limit:200},a=I.getApi(e);try{const e=await a.get(n);return oe(e.result.translations)}catch(s){return mw.log.error("Error while fetching suggestion seeds",s),[]}},fetchAppendixTargetSectionTitles:function(e){const t=ne.map(e=>encodeURIComponent(e)).join("|"),n=I.getCXServerUrl(`/suggest/sections/titles/en/${e}?titles=${t}`);return fetch(n).then(t=>t.ok?t.json():Promise.reject(new Error("Failed to load appendix target section titles for language: "+e))).then(e=>Object.values(e).flat()).catch(e=>[])},markFavorite:e=>{const t={assert:"user",action:"cxsuggestionlist",listname:"cx-suggestionlist-favorite",listaction:"add",titles:e.sourceTitle,from:e.sourceLanguage,to:e.targetLanguage},n=new mw.Api;return Promise.resolve(n.postWithToken("csrf",t)).catch(e=>{mw.log.error("Error while marking suggestion as favorite",e)})},unmarkFavorite:e=>{const t={assert:"user",action:"cxsuggestionlist",listname:"cx-suggestionlist-favorite",listaction:"remove",titles:e.title,from:e.sourceLanguage,to:e.targetLanguage},n=new mw.Api;return Promise.resolve(n.postWithToken("csrf",t)).catch(e=>{mw.log.error("Error while unmarking favorite suggestion",e)})}};const de=["cx-published-translations"];class pe{constructor({sourceLanguage:e,targetLanguage:t,seeds:n=[],exhaustedProviders:a=[]}){this.sourceLanguage=e,this.targetLanguage=t,this.seeds=n,this.exhaustedProviders=a}doesBelongToLanguagePair(e,t){return this.sourceLanguage===e&&this.targetLanguage===t}get allProvidersExhausted(){return de.every(e=>this.exhaustedProviders.includes(e))}get nextUnexhaustedProvider(){return de.find(e=>!this.exhaustedProviders.includes(e))}addExhaustedProvider(e){this.exhaustedProviders.push(e)}getSeedArticleForSuggestion(){return this.seeds.shift()}}var Ae={namespaced:!0,state:Z,getters:{findSectionSuggestionSeedCollection:e=>(t,n)=>e.sectionSuggestionSeedCollections.find(e=>e.doesBelongToLanguagePair(t,n)),findPageSuggestionSeedCollection:e=>(t,n)=>e.pageSuggestionSeedCollections.find(e=>e.doesBelongToLanguagePair(t,n)),getPageSuggestionsForPair:e=>(t,n)=>e.pageSuggestions.filter(e=>e.sourceLanguage===t&&e.targetLanguage===n),getSectionSuggestionsForPair:e=>(t,n)=>e.sectionSuggestions.filter(e=>e.sourceLanguage===t&&e.targetLanguage===n),getSectionSuggestionsForArticle:e=>(t,n,a)=>e.sectionSuggestions.find(e=>e.sourceLanguage===t&&e.targetLanguage===n&&e.sourceTitle===a),sectionSuggestionsForArticleExists:e=>(t,n,a)=>e.sectionSuggestions.some(e=>e.sourceLanguage===t&&e.targetLanguage===n&&e.sourceTitle===a),getFirstAppendixTitleBySectionSuggestion:e=>t=>{const n=e.appendixSectionTitles[t.targetLanguage]||[];return(t.targetSections||[]).find(e=>n.includes(e))},appendixTitlesExistForLanguage:e=>t=>{var n;return((null===(n=e.appendixSectionTitles)||void 0===n?void 0:n[t])||[]).length>0},getNumberOfSectionSuggestionsToFetch:(e,t)=>(n,a)=>{const s=t.getSectionSuggestionsForPair(n,a),i=e.maxSuggestionsPerSlice;return i-s.length%i}},actions:{addPageSuggestionAsFavorite:async function({commit:e,dispatch:t},n){e("removePageSuggestion",n),t("fetchNextPageSuggestionsSlice"),t("doMarkSuggestionAsFavorite",n)},addSectionSuggestionAsFavorite:async function({commit:e,dispatch:t},n){e("removeSectionSuggestion",n),t("fetchNextSectionSuggestionsSlice"),t("doMarkSuggestionAsFavorite",n)},doMarkSuggestionAsFavorite:async function({commit:e,dispatch:t},n){await ge.markFavorite(n);const{sourceTitle:a,sourceLanguage:s,targetLanguage:i}=n;e("addFavoriteSuggestion",new te({title:a,sourceLanguage:s,targetLanguage:i}))},fetchFavorites:async function({commit:e,dispatch:t,state:n}){if(n.favorites.length)return;const a=await ge.fetchFavorites();if(!a||!a.length)return;const s={};for(const i of a)e("addFavoriteSuggestion",i),ge.fetchSectionSuggestions(i.sourceLanguage,i.title,i.targetLanguage).then(e=>i.missingSectionsCount=(null==e?void 0:e.missingSectionsCount)||0),s[i.sourceLanguage]=[...s[i.sourceLanguage]||[],i];for(const[i,o]of Object.entries(s))t("mediawiki/fetchPageMetadata",{language:i,titles:o.map(e=>e.title)},{root:!0})},fetchAppendixSectionTitles:async function({getters:e,commit:t},n){if(e.appendixTitlesExistForLanguage(n))return;t("addAppendixSectionTitlesForLanguage",{language:n,titles:await ge.fetchAppendixTargetSectionTitles(n)})},fetchNextPageSuggestionsSlice:async function({commit:e,dispatch:t,state:n,rootState:a}){e("increasePageSuggestionsLoadingCount");const{sourceLanguage:s,targetLanguage:i}=a.application,o=await t("getPageSuggestionSeed",{sourceLanguage:s,targetLanguage:i}),r=await ge.fetchPageSuggestions(s,i,null==o?void 0:o.sourceTitle,n.maxSuggestionsPerSlice);e("decreasePageSuggestionsLoadingCount"),r.forEach(t=>e("addPageSuggestion",t));const c=r.map(e=>e.sourceTitle);c.length&&t("mediawiki/fetchPageMetadata",{language:s,titles:c},{root:!0})},fetchNextSectionSuggestionsSlice:async function({dispatch:e,rootState:t}){const{sourceLanguage:n,targetLanguage:a}=t.application,s=await e("getSectionSuggestionSeeds",{sourceLanguage:n,targetLanguage:a});return e("fetchSectionSuggestionsBySeeds",s)},fetchSectionSuggestionsBySeeds:async function({commit:e,dispatch:t,rootState:n,getters:a,state:s},i){if(!i||!i.length)return;const o=i[0].sourceLanguage,r=i[0].targetLanguage;e("increaseSectionSuggestionsLoadingCount"),i=i.filter(e=>!a.sectionSuggestionsForArticleExists(o,r,e.sourceTitle));const c=a.getNumberOfSectionSuggestionsToFetch(o,r);let l=0;for(const g of i){if(r!==n.application.targetLanguage)break;const t=await ge.fetchSectionSuggestions(o,g.sourceTitle,r);e("removeSectionSuggestionSeed",g);const a=s.appendixSectionTitles[r]||[];if(null!=t&&t.isValid(a)&&(l++,e("addSectionSuggestion",t)),l===c)break}if(e("decreaseSectionSuggestionsLoadingCount"),r!==n.application.targetLanguage)return;const u=a.getSectionSuggestionsForPair(o,r).map(e=>e.sourceTitle);t("mediawiki/fetchPageMetadata",{language:o,titles:u},{root:!0})},getPageSuggestionSeed:async function({commit:e,rootGetters:t,dispatch:n,getters:a},{sourceLanguage:s,targetLanguage:i}){let o=a.findPageSuggestionSeedCollection(s,i);if(o||(o=new pe({sourceLanguage:s,targetLanguage:i}),e("addPageSuggestionSeedCollection",o)),!o.seeds.length)do{const t=o.nextUnexhaustedProvider,a=await n("getSeedProviderHandlerByName",t);if(a){const n=await a(s,i);o.addExhaustedProvider(t),n.forEach(t=>e("addPageSuggestionSeed",t))}}while(0===o.seeds.length&&!o.allProvidersExhausted);return o.getSeedArticleForSuggestion()},getSectionSuggestionSeeds:async function({commit:e,rootGetters:t,dispatch:n,getters:a},{sourceLanguage:s,targetLanguage:i}){let o=a.findSectionSuggestionSeedCollection(s,i);if(o||(o=new pe({sourceLanguage:s,targetLanguage:i}),e("addSectionSuggestionSeedCollection",o)),!o.seeds.length){e("increaseSectionSuggestionsLoadingCount");do{const t=o.nextUnexhaustedProvider,a=await n("getSeedProviderHandlerByName",t);if(a){const n=await a(s,i);o.addExhaustedProvider(t),n.forEach(t=>e("addSectionSuggestionSeed",t))}}while(0===o.seeds.length&&!o.allProvidersExhausted);e("decreaseSectionSuggestionsLoadingCount")}return o.seeds},getSeedProviderHandlerByName:function({rootGetters:e},t){return{"cx-published-translations":(e,t)=>ge.fetchSuggestionSeeds(e,t),"user-published-translations":(t,n)=>Promise.resolve(e["translator/getPublishedTranslationsForLanguagePair"](t,n))}[t]||null},initializeSuggestions:async function({rootGetters:e,dispatch:t,rootState:n,state:a}){const{targetLanguage:s}=n.application,i=e["application/getSectionSuggestionsSliceByIndex"](0),o=e["application/getPageSuggestionsSliceByIndex"](0),r=i.length===a.maxSuggestionsPerSlice,c=o.length===a.maxSuggestionsPerSlice;r&&c||(await t("suggestions/fetchAppendixSectionTitles",s,{root:!0}),t("fetchNextSectionSuggestionsSlice"),t("fetchNextPageSuggestionsSlice"))},loadSectionSuggestion:async function({commit:e,dispatch:t,getters:n,rootGetters:a},{sourceLanguage:s,targetLanguage:i,sourceTitle:o}){let r=n.getSectionSuggestionsForArticle(s,i,o);if(!r){r=await ge.fetchSectionSuggestions(s,o,i);try{if(await t("mediawiki/fetchPageMetadata",{language:s,titles:[o]},{root:!0}),r)e("addSectionSuggestion",r);else{r=new ee({sourceLanguage:s,targetLanguage:i,sourceTitle:o});const t=a["mediawiki/getPage"](s,o);e("addPageSuggestion",new Q({sourceLanguage:s,targetLanguage:i,sourceTitle:o,langLinksCount:t.langLinksCount,wikidataId:t.wikidataId}))}}catch(c){throw new Error(`No page metadata found for title ${o} and language pair ${s}-${i}`)}}return r},removeFavoriteSuggestion:async function({commit:e},t){e("removeFavoriteSuggestion",t),await ge.unmarkFavorite(t)}},mutations:{addPageSuggestion(e,t){e.pageSuggestions.push(t)},addSectionSuggestion(e,t){e.sectionSuggestions.push(t)},removeSectionSuggestion(e,t){e.sectionSuggestions=e.sectionSuggestions.filter(e=>e.id!==t.id)},removePageSuggestion(e,t){e.pageSuggestions=e.pageSuggestions.filter(e=>e.id!==t.id)},increaseSectionSuggestionsLoadingCount(e){e.sectionSuggestionsLoadingCount++},decreaseSectionSuggestionsLoadingCount(e){e.sectionSuggestionsLoadingCount--},increasePageSuggestionsLoadingCount(e){e.pageSuggestionsLoadingCount++},decreasePageSuggestionsLoadingCount(e){e.pageSuggestionsLoadingCount--},addSectionSuggestionSeedCollection(e,t){e.sectionSuggestionSeedCollections.push(t)},addPageSuggestionSeedCollection(e,t){e.pageSuggestionSeedCollections.push(t)},addSectionSuggestionSeed(e,t){const{sourceLanguage:n,targetLanguage:a}=t;e.sectionSuggestionSeedCollections.find(e=>e.doesBelongToLanguagePair(n,a)).seeds.push(t)},addPageSuggestionSeed(e,t){const{sourceLanguage:n,targetLanguage:a}=t;e.pageSuggestionSeedCollections.find(e=>e.doesBelongToLanguagePair(n,a)).seeds.push(t)},removeSectionSuggestionSeed(e,t){const{sourceLanguage:n,targetLanguage:a}=t,s=e.sectionSuggestionSeedCollections.find(e=>e.doesBelongToLanguagePair(n,a));s.seeds=s.seeds.filter(e=>e.sourceTitle!==t.sourceTitle)},addAppendixSectionTitlesForLanguage(e,{language:t,titles:n}){e.appendixSectionTitles[t]=n},addFavoriteSuggestion(e,t){e.favorites.push(t)},removeFavoriteSuggestion(e,t){const{title:n,sourceLanguage:a,targetLanguage:s}=t;e.favorites=e.favorites.filter(e=>e.title!==n||e.sourceLanguage!==a||e.targetLanguage!==s)}}},Me={pages:[],languagesRequested:!1,languageTitleGroups:[],supportedLanguageCodes:[],supportedLanguageCodesRequested:!1,supportedMTProviderGroups:[],nearbyPages:{},enabledTargetLanguages:mw.config.get("wgSectionTranslationTargetLanguages")},Ie={getPage:e=>(t,n)=>e.pages.find(e=>e.language===t&&(e.title===n||null!==e.alias&&e.alias===n)),getLanguageTitleGroup:e=>(t,n)=>e.languageTitleGroups.find(e=>e.titles.find(e=>e.lang===t&&e.title===n)),getLanguageTitleGroupByWikidataId:e=>t=>e.languageTitleGroups.find(e=>e.wikidataId===t),getTitleByLanguageForGroup:(e,t)=>(e,n)=>{var a,s;return null===(a=((null===(s=t.getLanguageTitleGroupByWikidataId(e))||void 0===s?void 0:s.titles)||[]).find(e=>e.lang===n))||void 0===a?void 0:a.title},getSupportedMTProviders:e=>(t,n)=>{var a;return(null===(a=e.supportedMTProviderGroups.find(e=>e.sourceLanguage===t&&e.targetLanguage===n))||void 0===a?void 0:a.providers)||[]},isValidProviderForTranslation:(e,t)=>(e,n,a)=>t.getSupportedMTProviders(e,n).includes(a)&&a!==M.EMPTY_TEXT_PROVIDER_KEY,getRecentlyEditedPages:(e,t,n,a)=>{const s=n.application.sourceLanguage,i=n.application.targetLanguage;return a["translator/getAllTranslationsForLanguagePair"](s,i).slice(0,n.suggestions.maxRecentlyEditedSuggestions).map(e=>t.getPage(s,e.sourceTitle)).filter(e=>!!e)},getNearbyPages:(e,t,n)=>{const a=n.application.sourceLanguage;return e.nearbyPages[a]}};class Ee{constructor({description:e,langlinkscount:t,lastrevid:n,original:a,pageid:s,pagelanguage:i,pageprops:o,pageviews:r,thumbnail:c,title:l,_alias:u,content:g=null,sections:d=[]}={}){this.language=i,this.title=l,this.pageId=s,this.description=e,this.image=a,this.pageprops=o,this.pageviews=r,this.thumbnail=c,this.langLinksCount=t,this.revision=n,this.alias=u,this.wikidataId=null==o?void 0:o.wikibase_item,this.content=g,this.sections=d}get id(){return`${this.language}/${this.title}`}getSectionNumberByTitle(e){const t=this.sections.findIndex(t=>t.originalTitle===e);if(t<0)return-1;return this.sections.slice(0,t).reduce((e,t)=>e+t.subSections.filter(e=>e.isHeadingSection).length,t+1)}getSectionByTitle(e){return(this.sections||[]).find(t=>t.originalTitle===e)}}class Be{constructor(e,t){this.wikidataId=e,this.titles=t}getTitleForLanguage(e){var t;return null===(t=this.titles.find(t=>t.lang===e))||void 0===t?void 0:t.title}hasLanguage(e){return this.titles.some(t=>t.lang===e)}}class $e{constructor({id:e,originalContent:t,translatedContent:n="",node:a=null,proposedTranslations:s={},selected:i=!1}={}){this.id=e,this.translatedContent=n,this.node=a,this.proposedTranslations={...s,[M.ORIGINAL_TEXT_PROVIDER_KEY]:t,[M.EMPTY_TEXT_PROVIDER_KEY]:""},this.selected=i}get originalContent(){return this.proposedTranslations[M.ORIGINAL_TEXT_PROVIDER_KEY]}get content(){return this.translatedContent||this.originalContent}get isTranslated(){return""!==this.translatedContent}}const Ne=e=>{var t;const n=Fe(e);return(null==n||null===(t=n.target)||void 0===t?void 0:t.wt)||null},Fe=e=>{var t,n,a;const s=JSON.parse((null===(t=e.dataset)||void 0===t?void 0:t.mw)||"{}");return(null==s||null===(n=s.parts)||void 0===n||null===(a=n[0])||void 0===a?void 0:a.template)||null},Re=e=>!!(e.attributes.about||e.attributes.typeof&&e.getAttribute("typeof").match(/(^|\s)(mw:Transclusion|mw:Placeholder)\b/)),Ue=e=>{const t=Fe(e);if(null==t||!t.target)return null;let n=t.target.wt;const{params:a}=t;if(!a)return`{{${n}}}`;for(const s in a){n+=` | ${s} = ${De(a[s].wt)}`}return`{{${n}}}`},De=e=>{let t=e,n="",a=!1,s=0,i=0;for(;t.length>0;){const e=t.match(/(?:\[\[)|(?:\]\])|(?:\{\{)|(?:\}\})|\|+|<\/?nowiki>|<nowiki\s*\/>/);if(!e){n+=t;break}if(n+=t.slice(0,e.index),t=t.slice(e.index+e[0].length),a)"</nowiki>"===e[0]?(a=!1,n+=e[0]):n+=e[0];else{let t=!0;"<nowiki>"===e[0]?(a=!0,t=!1):"</nowiki>"===e[0]||e[0].match(/<nowiki\s*\/>/)?t=!1:e[0].match(/(?:\[\[)/)?(i++,t=!1):e[0].match(/(?:\]\])/)?i>0&&(i--,t=!1):e[0].match(/(?:\{\{)/)?(s++,t=!1):e[0].match(/(?:\}\})/)?s>0&&(s--,t=!1):e[0].match(/\|+/)&&(s>0||i>0)&&(t=!1),n+=t?"<nowiki>"+e[0]+"</nowiki>":e[0]}}return n};class He{constructor({sentences:e,node:t}){this.id=t.id,this.sentences=e,this.node=t,this.blockTemplateSelected=!1,this.blockTemplateTranslatedContent="",this.blockTemplateProposedTranslations={}}get isHeadingSection(){return this.node.firstElementChild instanceof HTMLHeadingElement}get originalHtml(){return this.node.outerHTML}get translatedContent(){if(this.isBlockTemplate)return this.blockTemplateTranslatedContent;const e=this.node.cloneNode(!0);return Array.from(e.getElementsByClassName("cx-segment")).forEach(e=>{const t=this.getSentenceById(e.dataset.segmentid);t.isTranslated?e.innerHTML=t.translatedContent:e.parentNode.removeChild(e)}),e.innerHTML}getProposedTranslation(e){return this.sentences.reduce((t,n)=>(n.isTranslated&&(t+=n.proposedTranslations[e]),t),"")}get isTranslated(){return this.isBlockTemplate?!!this.blockTemplateTranslatedContent:this.sentences.some(e=>e.isTranslated)}getSentenceById(e){return this.sentences.find(t=>t.id===e)}get selected(){return this.isBlockTemplate&&this.blockTemplateSelected}get isBlockTemplate(){return!!this.transclusionNode}get transclusionNode(){return Array.from(this.node.children).find(e=>Re(e))}get sourceBlockTemplateName(){return this.isBlockTemplate?Ne(this.transclusionNode):null}getTargetBlockTemplateNameByProvider(e){if(!this.blockTemplateProposedTranslations[e])return null;const t=document.createElement("div");t.innerHTML=this.blockTemplateProposedTranslations[e];const n=Array.from(t.children).find(e=>Re(e));return n?Ne(n):""}get translationUnits(){return this.isBlockTemplate?[this]:this.sentences}}class Ge{constructor({id:e,title:t=null,subSections:n=[],isLeadSection:a=!1,isTitleSelected:s=!1}={}){this.id=e,this.proposedTitleTranslations={[M.ORIGINAL_TEXT_PROVIDER_KEY]:t,[M.EMPTY_TEXT_PROVIDER_KEY]:""},this.translatedTitle="",this.subSections=n,this.editedTranslation=null,this.isLeadSection=a,this.isTitleSelected=s}get originalTitle(){return this.proposedTitleTranslations[M.ORIGINAL_TEXT_PROVIDER_KEY]}get title(){return this.translatedTitle||this.originalTitle}get contentTranslationUnits(){return this.subSections.reduce((e,t)=>[...e,...t.translationUnits],[])}get selectedContentTranslationUnit(){return this.contentTranslationUnits.find(e=>e.selected)}get selectedContentTranslationUnitIndex(){return this.contentTranslationUnits.findIndex(e=>e.selected)}getContentTranslationUnitById(e){return this.contentTranslationUnits.find(t=>t.id===e)}get selectedTranslationUnitId(){var e;return this.isTitleSelected?0:null===(e=this.selectedContentTranslationUnit)||void 0===e?void 0:e.id}get isSelectedTranslationUnitLast(){return this.selectedContentTranslationUnitIndex===this.contentTranslationUnits.length-1}get followingTranslationUnit(){var e;const t=this.selectedContentTranslationUnitIndex+1;return null===(e=this.contentTranslationUnits)||void 0===e?void 0:e[t]}get html(){return this.subSections.reduce((e,t)=>e+t.originalHtml,"")}get translationHtml(){return this.editedTranslation||this.subSections.reduce((e,t)=>t.isTranslated?e+t.translatedContent:e,"")}getProposedTranslationHtml(e){return this.subSections.reduce((t,n)=>t+n.getProposedTranslation(e),"")}get isTranslated(){return this.subSections.some(e=>e.isTranslated)}getOriginalContentByTranslationUnitId(e){if(0===e)return this.originalTitle;const t=this.getContentTranslationUnitById(e);return t instanceof He?t.transclusionNode.outerHTML:t instanceof $e?t.originalContent:null}get selectedTranslationUnitOriginalContent(){return this.getOriginalContentByTranslationUnitId(this.selectedTranslationUnitId)}resetSelection(){this.isTitleSelected=!1,this.contentTranslationUnits.forEach(e=>{e instanceof He?e.blockTemplateSelected=!1:e instanceof $e&&(e.selected=!1)})}selectTranslationUnitById(e){if(this.resetSelection(),0===e)return void(this.isTitleSelected=!0);const t=this.getContentTranslationUnitById(e);t instanceof He?t.blockTemplateSelected=!0:t instanceof $e&&(t.selected=!0)}hasProposedTranslationByTranslationUnitId(e,t){if(0===e)return this.proposedTitleTranslations.hasOwnProperty(t);const n=this.getContentTranslationUnitById(e);return n instanceof He?!!n.blockTemplateProposedTranslations.hasOwnProperty(t):n instanceof $e?n.proposedTranslations.hasOwnProperty(t):void 0}getProposedTranslationByMtProvider(e){const t=this.selectedContentTranslationUnit;return this.isTitleSelected?this.proposedTitleTranslations[e]||"":t instanceof He?t.blockTemplateProposedTranslations[e]||"":t instanceof $e?t.proposedTranslations[e]||"":null}setTranslationForSelectedTranslationUnit(e){this.isTitleSelected?this.translatedTitle=e:this.selectedContentTranslationUnit instanceof He?this.selectedContentTranslationUnit.blockTemplateTranslatedContent=e:this.selectedContentTranslationUnit instanceof $e&&(this.selectedContentTranslationUnit.translatedContent=e)}get isSelectedTranslationUnitTranslated(){var e;return this.isTitleSelected?!!this.translatedTitle:!(null===(e=this.selectedContentTranslationUnit)||void 0===e||!e.isTranslated)}}const Xe=(e,t)=>{let n,a;if(t){n=(e=>{const t=document.createElement("div");t.classList.add("surface");const n=document.createElement("div");n.appendChild(t),n.$el=$(n);const a=new ve.init.mw.MobileArticleTarget(n),s=ve.dm.converter.getModelFromDom(ve.createDocumentFromHtml(e)),i=a.createSurface(s);return i.setReadOnly(!0),a.surfaces.push(i),a.setSurface(i),i.initialize(),i})(e);a=n.$element.find("section[rel='cx:Section']:not([data-mw-section-number='0'])").map((e,t)=>{const n=$(t).data("view").getModel();if(n)return ve.dm.converter.getDomFromNode(n,ve.dm.Converter.static.CLIPBOARD_MODE).body.children[0]}),n.destroy()}else a=$(e).filter("section[rel='cx:Section']:not([data-mw-section-number='0'])");return a},We=e=>{const t=e.reduce((e,t)=>{const n=t.dataset.mwSectionNumber;return e[n]=e[n]?[...e[n],t]:[t],e},{});return Object.values(t)},Ye=e=>Array.from(e.getElementsByClassName("cx-segment")).map(e=>new $e({id:e.dataset.segmentid,originalContent:e.innerHTML,node:e}));var Ke_convertSegmentedContentToPageSections=(e,t)=>{const n=Array.from(Xe(e,t));return We(n).map(e=>{const[t,...n]=e;let a="";const s=t.dataset.mwSectionNumber;t.querySelector("h2")?a=t.textContent.trim():n.unshift(t);const i=n.map(e=>new He({sentences:Ye(e),node:e}));return new Ge({id:s,title:a,subSections:i,isLeadSection:!a})})};const tt=(e,t,n)=>{const a=[e,t,n].map(e=>encodeURIComponent(e)),s=I.getCXServerUrl("/page/"+a.join("/"));return fetch(s).then(e=>e.json()).then(e=>e.segmentedContent)};var st_fetchPages=(e,t)=>{const n={action:"query",format:"json",formatversion:2,prop:"info|pageprops|pageimages|description|pageviews|langlinkscount",pvipdays:7,piprop:"thumbnail|name|original",pithumbsize:80,titles:t.join("|"),origin:"*",redirects:!0};return I.getApi(e).get(n).then(e=>{const t=e.query.pages,a=(e.query.redirects||[]).reduce((e,t)=>({...e,[t.to]:t.from}),{});return t.map(e=>(e=a[e.title]?{...e,_alias:a[e.title]}:e,new Ee(e)))})},st_fetchLanguageTitles=(e,t)=>{const n={action:"query",format:"json",formatversion:2,prop:"langlinks|pageprops",titles:t,lllimit:500,origin:"*",redirects:!0};return I.getApi(e).get(n).then(async n=>{var a,s;const i=n.query.pages;if(!i||!i.length||null!==(a=i[0])&&void 0!==a&&a.missing)return null;const o=[{lang:e,title:t},...i[0].langlinks||[]],r=null===(s=i[0].pageprops)||void 0===s?void 0:s.wikibase_item;return r?Object.freeze(new Be(r,o)):null})},st_fetchPageContent=(e,t,n)=>tt(e,t,n).then(t=>new Ee({sections:Ke_convertSegmentedContentToPageSections(t,!1),content:t,pagelanguage:e,title:n})),st_fetchNearbyPages=async e=>{const t=(()=>{let e=mw.cookie.get("GeoIP","");const t=e&&e.match(/\d+\.?\d*:\d+\.?\d*/g),n=t&&t[0].replace(":","|");if(n)return n;const a=JSON.parse(mw.cookie.get("ULSGeo"));return a&&a.latitude+"|"+a.longitude})();if(!t)return Promise.resolve([]);const n={action:"query",prop:["pageimages","description","langlinks","langlinkscount"],generator:"geosearch",piprop:"thumbnail",pithumbsize:80,lllang:e,ggscoord:t,ggsradius:1e3,ggslimit:3,ggsnamespace:mw.config.get("wgNamespaceIds")[""],format:"json",formatversion:2,origin:"*"};return await I.getApi(e).get(n).then(e=>e.query.pages).then(e=>e.map(e=>new Ee(e))).catch(e=>[])},st_searchPagesByTitlePrefix=(e,t)=>{const a={action:"query",generator:"prefixsearch",gpssearch:e.trim(),prop:"pageimages|description|langlinkscount",piprop:"thumbnail",pithumbsize:80,pilimit:10,format:"json",formatversion:2,origin:"*"};return I.getApi(t).get(a).then(e=>{var t;return(null===(t=e.query)||void 0===t?void 0:t.pages)||[]}).then(e=>e.sort((e,t)=>e.index-t.index).map(e=>new Ee(e))).catch(e=>[])};var lt={fetchSupportedLanguageCodes:async function(){return await I.getLanguagePairs().then(e=>e.sourceLanguages)},fetchSupportedMTProviders:async function(e,t){const n=I.getCXServerUrl(`/list/pair/${e}/${t}`);return fetch(n).then(e=>e.json()).then(n=>Object.freeze(new M(e,t,n.mt)))},fetchCXServerToken:function(){return(new mw.Api).postWithToken("csrf",{action:"cxtoken",assert:"user"})},addWikibaseLink:function(e,t,n,a){if(!mw.config.get("wgContentTranslationTranslateInTarget"))return Promise.resolve();const s=mw.config.get("wgWikiID"),i={action:"wblinktitles",fromsite:s.replace(t,e),fromtitle:n,tosite:s,totitle:a},o=new mw.ForeignApi("https://www.wikidata.org/w/api.php");return Promise.resolve(o.postWithToken("csrf",i))}};var wt={namespaced:!0,state:Me,getters:Ie,actions:{fetchLanguageTitles:function({commit:e,getters:t},{language:n,title:a}){t.getLanguageTitleGroup(n,a)||st_fetchLanguageTitles(n,a).then(t=>t&&e("addLanguageTitleGroup",t))},fetchMTProviders:async function({commit:e,getters:t},{sourceLanguage:n,targetLanguage:a}){if(t.getSupportedMTProviders(n,a).length)return;e("addMtProviderGroup",await lt.fetchSupportedMTProviders(n,a))},fetchNearbyPages:async function({commit:e,rootState:t,state:n}){var a;const{sourceLanguage:s}=t.application;if(null!==(a=n.nearbyPages[s])&&void 0!==a&&a.length)return;e("addNearbyPages",{language:s,pages:await st_fetchNearbyPages(s)})},fetchPageContent:async function({commit:e,getters:t,dispatch:n},{sourceLanguage:a,targetLanguage:s,sourceTitle:i}){let o=t.getPage(a,i);if(o&&o.content)return;const r=await st_fetchPageContent(a,s,i);o?o.content||(o.content=r.content,e("setPageSections",{page:o,sections:r.sections})):e("addPage",r)},fetchPageMetadata:function({getters:e,commit:t},{language:n,titles:a}){a=a.filter(t=>!e.getPage(n,t));const i=[];for(let o=0;o<a.length;o+=50){const e=a.slice(o,o+50),r=st_fetchPages(n,e).then(e=>e.forEach(e=>t("addPage",e)));i.push(r)}return Promise.all(i)},fetchSupportedLanguageCodes:async function({commit:e,state:t}){if(!t.supportedLanguageCodes.length&&!t.supportedLanguageCodesRequested){e("setSupportedLanguageCodesRequested",!0);e("setSupportedLanguageCodes",await lt.fetchSupportedLanguageCodes())}},resolvePageContentReferences:function({getters:e,commit:t},{sourceLanguage:n,sourceTitle:a}){const s=e.getPage(n,a);if(s)return new Promise(e=>{setTimeout(()=>{t("setPageSections",{page:s,sections:Ke_convertSegmentedContentToPageSections(s.content,!0)}),e()},0)})}},mutations:{addPage(e,t){e.pages.push(t)},addLanguageTitleGroup(e,t){e.languageTitleGroups.push(t)},setSupportedLanguageCodes(e,t){e.supportedLanguageCodes=t},addMtProviderGroup(e,t){e.supportedMTProviderGroups.push(t)},setPageSections(e,{page:t,sections:n}){a.default.set(t,"sections",n)},setLanguagesRequested(e,t){e.languagesRequested=t},setSupportedLanguageCodesRequested(e,t){e.supportedLanguageCodesRequested=t},addNearbyPages(e,{language:t,pages:n}){a.default.set(e.nearbyPages,t,n)}}};const Dt={clearPublishFeedbackMessages(e){e.publishFeedbackMessages=[]},clearMTPublishFeedbackMessages(e){e.publishFeedbackMessages=e.publishFeedbackMessages.filter(e=>!e.isMTMessage)},addMTPublishFeedbackMessage(e,t){Dt.clearMTPublishFeedbackMessages(e),e.publishFeedbackMessages.push(t)},addPublishFeedbackMessage(e,t){e.publishFeedbackMessages.push(t),e.publishFeedbackMessages.sort((e,t)=>+t.isError-+e.isError)},setCurrentSectionSuggestion(e,t){e.currentSectionSuggestion=t&&new ee({...t,missing:(null==t?void 0:t.missingSections)||{},present:(null==t?void 0:t.presentSections)||{}})},setCurrentSourceSection(e,t){e.currentSourceSection=t},setCurrentSourceSectionTitleTranslation(e,t){e.currentSourceSection.translatedTitle=t},setCurrentSourceSectionEditedTranslation(e,t){e.currentSourceSection.editedTranslation=t},setProposedTranslationForTranslationUnitById(e,{id:t,provider:n,proposedTranslation:s}){if(0===t)return void a.default.set(e.currentSourceSection.proposedTitleTranslations,n,s);const i=e.currentSourceSection.getContentTranslationUnitById(t);i instanceof He?a.default.set(i.blockTemplateProposedTranslations,n,s):i instanceof $e&&a.default.set(i.proposedTranslations,n,s)},setCurrentMTProvider:(e,t)=>{e.currentMTProvider=t},setSourceLanguage:(e,t)=>{e.sourceLanguage=t},setTargetLanguage:(e,t)=>{e.targetLanguage=t},setPublishTarget:(e,t)=>{if(!["NEW_SECTION","SANDBOX_SECTION"].includes(t))throw"Invalid publish target";e.publishTarget=t},setTranslationInProgress:(e,t)=>{e.translationInProgress=t},setCXServerToken:(e,t)=>{e.cxServerToken=t}};var Ht={namespaced:!0,state:{currentSectionSuggestion:null,currentSourceSection:null,currentMTProvider:"",sourceLanguage:null,targetLanguage:null,publishTarget:"NEW_SECTION",translationInProgress:!1,cxServerToken:null,publishFeedbackMessages:[]},getters:{getCurrentPage:(e,t,n,a)=>{var s,i;return a["mediawiki/getPage"](null===(s=e.currentSectionSuggestion)||void 0===s?void 0:s.sourceLanguage,null===(i=e.currentSectionSuggestion)||void 0===i?void 0:i.sourceTitle)},getCurrentTargetPage:(e,t,n,a)=>a["mediawiki/getPage"](e.currentSectionSuggestion.targetLanguage,e.currentSectionSuggestion.targetTitle),getCurrentSourceSectionTitle:e=>{var t;return(null===(t=e.currentSourceSection)||void 0===t?void 0:t.originalTitle)||""},getCurrentSourceSectionAnchor:(e,t)=>(t.getCurrentSourceSectionTitle||"").replace(/ /g,"_"),isCurrentSourceSectionMissing:(e,t)=>{var n;return null===(n=e.currentSectionSuggestion)||void 0===n?void 0:n.missingSections.hasOwnProperty(t.getCurrentSourceSectionTitle)},isCurrentSourceSectionPresent:(e,t)=>{var n;return null===(n=e.currentSectionSuggestion)||void 0===n?void 0:n.presentSections.hasOwnProperty(t.getCurrentSourceSectionTitle)},getCurrentProposedTranslation:e=>{const{currentSourceSection:t,currentMTProvider:n}=e;return null==t?void 0:t.getProposedTranslationByMtProvider(n)},getCurrentLanguageTitleGroup:(e,t,n,a)=>{var s,i;return a["mediawiki/getLanguageTitleGroup"](null===(s=e.currentSectionSuggestion)||void 0===s?void 0:s.sourceLanguage,null===(i=e.currentSectionSuggestion)||void 0===i?void 0:i.sourceTitle)},getCurrentPageSuggestions:(e,t,n,a)=>a["suggestions/getPageSuggestionsForPair"](e.sourceLanguage,e.targetLanguage),getCurrentSectionSuggestions:(e,t,n,a)=>a["suggestions/getSectionSuggestionsForPair"](e.sourceLanguage,e.targetLanguage),getCurrentPublishedTranslations:(e,t,n,a)=>a["translator/getPublishedTranslationsForLanguagePair"](e.sourceLanguage,e.targetLanguage),getSectionSuggestionsSliceByIndex:(e,t,n)=>e=>t.getCurrentSectionSuggestions.slice(n.suggestions.maxSuggestionsPerSlice*e,n.suggestions.maxSuggestionsPerSlice*(e+1)),getPageSuggestionsSliceByIndex:(e,t,n)=>e=>t.getCurrentPageSuggestions.slice(n.suggestions.maxSuggestionsPerSlice*e,n.suggestions.maxSuggestionsPerSlice*(e+1)),isPublishingDisabled:e=>e.publishFeedbackMessages.some(e=>e.isError),isSandboxTarget:e=>"SANDBOX_SECTION"===e.publishTarget},actions:{applyEditedTranslationToSelectedTranslationUnit:async function({state:e,dispatch:t,commit:n},a){n("setTranslationInProgress",!0);const s=document.createElement("div");s.innerHTML=a,s.querySelectorAll(".sx-edit-dummy-node").forEach(e=>e.remove()),a=s.innerHTML;const{currentSourceSection:i,targetLanguage:o}=e,{selectedContentTranslationUnit:r}=i;if(r instanceof He){const{sourceTitle:t,targetTitle:n}=e.currentSectionSuggestion,i=Array.from(s.children).find(e=>Re(e));i&&(a=await q.parseTemplateWikitext(Ue(i),o,n||t))}i.setTranslationForSelectedTranslationUnit(a),t("selectNextTranslationUnit")},applyProposedTranslationToSelectedTranslationUnit:function({dispatch:e,getters:t,commit:n,state:a}){n("setTranslationInProgress",!0);const s=t.getCurrentProposedTranslation,{currentSourceSection:i}=a;i.setTranslationForSelectedTranslationUnit(s),e("selectNextTranslationUnit")},clearCurrentSectionSuggestion:function({commit:e}){e("setCurrentSectionSuggestion",null)},fetchCurrentSectionSuggestionLanguageTitles:async function({dispatch:e,state:t}){const{sourceLanguage:n,sourceTitle:a}=t.currentSectionSuggestion,s={language:n,title:a};await e("mediawiki/fetchLanguageTitles",s,{root:!0})},getCXServerToken:async({dispatch:e,state:t,commit:n})=>{var a,s;t.cxServerToken||await lt.fetchCXServerToken().then(e=>{e.age<=30&&(e.age=3600);const t=Math.floor(Date.now()/1e3);e.refreshAt=t+e.age-30,n("setCXServerToken",e)},e=>{if("token-impossible"===e){const e=Math.floor(Date.now()/1e3);n("setCXServerToken",{jwt:"",refreshAt:e+36e3})}});const i=Math.floor(Date.now()/1e3);return(null===(a=t.cxServerToken)||void 0===a?void 0:a.refreshAt)<=i?(n("setCXServerToken",null),e("getCXServerToken")):null===(s=t.cxServerToken)||void 0===s?void 0:s.jwt},initializeMTProviders:async function({state:e,dispatch:t,rootGetters:n,commit:a}){const{sourceLanguage:s,targetLanguage:i}=e.currentSectionSuggestion;await t("mediawiki/fetchMTProviders",{sourceLanguage:s,targetLanguage:i},{root:!0});const o=n["mediawiki/getSupportedMTProviders"](s,i),r=e.currentMTProvider;r&&o.includes(r)||a("setCurrentMTProvider",o[0])},initializeSectionTranslation:function({commit:e,dispatch:t},n){t("getCXServerToken"),e("setCurrentSectionSuggestion",n)},selectNextTranslationUnit:function({state:e,dispatch:t}){const{followingTranslationUnit:n}=e.currentSourceSection;n&&t("selectTranslationUnitById",n.id)},selectPageSectionByTitle:async function({state:e,commit:t,dispatch:n,getters:a},s){const i=e.currentSectionSuggestion,o=a.getCurrentPage,r=()=>{const e=o.getSectionByTitle(s);t("setCurrentSourceSection",e)};o.getSectionByTitle(s)||(await n("mediawiki/fetchPageContent",i,{root:!0}),n("mediawiki/resolvePageContentReferences",i,{root:!0}).then(()=>r())),r()},selectPageSectionByIndex:async function({state:e,commit:t,dispatch:n,getters:s},i){var o;const r=e.currentSectionSuggestion,c=s.getCurrentPage,l=()=>{var e;const n=null===(e=c.sections)||void 0===e?void 0:e[i];0===i&&a.default.set(n.proposedTitleTranslations,M.ORIGINAL_TEXT_PROVIDER_KEY,c.title),t("setCurrentSourceSection",n)};null!==(o=c.sections)&&void 0!==o&&o[i]||(await n("mediawiki/fetchPageContent",r,{root:!0}),n("mediawiki/resolvePageContentReferences",r,{root:!0}).then(()=>l())),l()},selectPreviousTranslationUnit:function({state:e,dispatch:t}){const{selectedContentTranslationUnitIndex:n,contentTranslationUnits:a}=e.currentSourceSection,s=n-1;let i=0;s>-1&&(i=a[s].id),t("selectTranslationUnitById",i)},selectTranslationUnitById:function({commit:e,dispatch:t,state:n},a){const{currentSourceSection:s,currentMTProvider:i}=n;s.selectTranslationUnitById(a),t("translateTranslationUnitById",{id:a,provider:i});const{followingTranslationUnit:o}=s;o&&t("translateTranslationUnitById",{id:o.id,provider:i})},startFavoriteSectionTranslation:async function({dispatch:e},t){const n=await e("suggestions/loadSectionSuggestion",{sourceLanguage:t.sourceLanguage,targetLanguage:t.targetLanguage,sourceTitle:t.title},{root:!0});e("initializeSectionTranslation",n)},translateTranslationUnitById:async function({commit:e,state:t,dispatch:n},{id:a,provider:s}){const{currentSectionSuggestion:i,currentSourceSection:o,targetLanguage:r}=t;if(o.hasProposedTranslationByTranslationUnitId(a,s))return;const{sourceTitle:c,targetTitle:l}=i;let u=o.getOriginalContentByTranslationUnitId(a);const g=o.getContentTranslationUnitById(a);let d;if(d=await n("translator/translateContent",{originalContent:u,provider:s},{root:!0}),g instanceof He){const e=document.createElement("div");e.innerHTML=d;const t=Array.from(e.children).find(e=>Re(e));d=t&&(e=>{var t,n;const a=JSON.parse((null===(t=e.dataset)||void 0===t?void 0:t.cx)||"{}");return!(null==a||null===(n=a[0])||void 0===n||!n.targetExists)})(t)?await q.parseTemplateWikitext(Ue(t),r,l||c):""}e("setProposedTranslationForTranslationUnitById",{id:a,provider:s,proposedTranslation:d})},translateSelectedTranslationUnitForAllProviders:function({rootGetters:e,dispatch:t,state:n}){const{sourceLanguage:a,targetLanguage:s,currentSourceSection:i}=n,o=e["mediawiki/getSupportedMTProviders"](a,s),{selectedTranslationUnitId:r}=i;o.forEach(e=>t("translateTranslationUnitById",{id:r,provider:e}))},updateMTProvider:function({commit:e,dispatch:t,state:n},a){e("setCurrentMTProvider",a);const{currentSourceSection:s}=n,{selectedTranslationUnitId:i}=s;t("translateTranslationUnitById",{id:i,provider:a})},updateSourceLanguage:async function({commit:e,state:t,getters:n,dispatch:a},s){if(s===t.targetLanguage)return void(window.location.href=I.getCXUrl(null,null,s,t.sourceLanguage,{}));if(e("setSourceLanguage",s),!t.currentSectionSuggestion)return void a("suggestions/initializeSuggestions",{},{root:!0});const i=n.getCurrentLanguageTitleGroup.getTitleForLanguage(t.sourceLanguage);let o=new ee({sourceLanguage:t.sourceLanguage,targetLanguage:t.targetLanguage,sourceTitle:i,missing:{}});n.getCurrentLanguageTitleGroup.hasLanguage(t.targetLanguage)&&(o=await a("suggestions/loadSectionSuggestion",o,{root:!0})),a("initializeSectionTranslation",o)},updateTargetLanguage:async function({state:e,dispatch:t,commit:n},a){var s;const i=a===e.sourceLanguage?e.targetLanguage:e.sourceLanguage;window.location.href=I.getCXUrl(null===(s=e.currentSectionSuggestion)||void 0===s?void 0:s.sourceTitle,null,i,a,{sx:!0})}},mutations:Dt};a.default.use(r.a);var Gt=new r.a.Store({modules:{translator:Y,suggestions:Ae,mediawiki:wt,application:Ht}}),Vt=n("8c4f"),en=n("0027"),tn=n("4cf1"),an={name:"CxTranslationWork",components:{MwThumbnail:o.r,MwIcon:o.j},props:{translation:{type:P,required:!0}},data:()=>({mwIconEdit:tn.n,mwIconTrash:tn.F,mwIconArrowForward:tn.c,mwIconArrowNext:tn.d}),methods:{getAutonym:en.getAutonym,getDir:en.getDir,onClick(e){this.$emit("click",e),this.startTranslation(this.translation)},startTranslation(e){I.setCXToken(e.sourceLanguage,e.targetLanguage,e.sourceTitle),location.href=I.getCXUrl(e.sourceTitle,e.targetTitle,e.sourceLanguage,e.targetLanguage,{campaign:(new mw.Uri).query.campaign})},getPage(e,t){return this.$store.getters["mediawiki/getPage"](e,t)},getImage(e,t){const n=this.getPage(e,t);return null==n?void 0:n.thumbnail}}},on=(n("5282"),Object(u.a)(an,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.translation?n("div",{staticClass:"row cx-translation pa-4 ma-0",on:{click:e.onClick}},[n("div",{staticClass:"col shrink pe-4"},[n("mw-thumbnail",{staticClass:"cx-translation__thumbnail",attrs:{thumbnail:e.getImage(e.translation.sourceLanguage,e.translation.sourceTitle),width:84}})],1),n("div",{staticClass:"col"},[n("div",{staticClass:"cx-translation__details column justify-between ma-0"},[n("div",{staticClass:"row ma-0"},[n("div",{staticClass:"col grow"},[n("h5",{staticClass:"cx-translation__source-title pb-2",attrs:{lang:e.translation.sourceLanguage}},[e._v(" "+e._s(e.translation.sourceTitle)+" ")]),n("h6",{staticClass:"cx-translation__target-title",attrs:{lang:e.translation.targetLanguage}},[e._v(" "+e._s(e.translation.targetTitle)+" ")])]),n("div",{staticClass:"col shrink ps-2"},[n("mw-icon",{attrs:{size:24,icon:"published"===e.translation.status?e.mwIconEdit:e.mwIconTrash}})],1)]),n("div",{staticClass:"row ma-0 text-small"},[n("div",{staticClass:"cx-translation__languages col grow"},[n("span",{staticClass:"mw-ui-autonym",attrs:{dir:e.getDir(e.translation.sourceLanguage)},domProps:{textContent:e._s(e.getAutonym(e.translation.sourceLanguage))}}),n("mw-icon",{staticClass:"mx-1",attrs:{icon:e.mwIconArrowNext}}),n("span",{staticClass:"mw-ui-autonym",attrs:{dir:e.getDir(e.translation.targetLanguage)},domProps:{textContent:e._s(e.getAutonym(e.translation.targetLanguage))}})],1)])])])]):e._e()}),[],!1,null,null,null)).exports,gn=n("ed09");async function dn(e,t,n){if(!t||0===t.trim().length)return e;const a=e.filter(e=>t.toLowerCase()===e.toLowerCase());if(a.length)return a;const s=e.filter(e=>Object(en.getAutonym)(e).toLowerCase().includes(t.toLowerCase())||Object(en.getScript)(e).toLowerCase().includes(t.toLowerCase()));if(s.length)return s;if(n){return(await function(e,t){const n=new URL(t);return n.searchParams.set("search",e),fetch(n.toString()).then(e=>e.json()).then(e=>Object.keys(e.languagesearch||{}))}(t,n)).filter(t=>e.includes(t))}return[]}async function pn(e,t,n){return t&&0!==t.trim().length?(await dn(e,t,n)).sort(en.sortByAutonym):e.sort(en.sortByAutonym)}var wn=function(e,t){const n=Object(gn.a)(()=>{if(!t.value.length||!e.value.trim())return"";for(let n=0;n<t.value.length;n++){const a=Object(en.getAutonym)(t.value[n]);if(a.startsWith(e.value))return a}return""});return{autocompletion:n,onTabSelect:()=>{e.value=n.value}}};var bn=function(e,t,n){const a=Object(gn.d)(""),s=Object(gn.d)(-1),i=Object(gn.d)(null),r=Object(gn.a)(()=>e.value?t.value:[...n,...t.value]);return Object(gn.e)(e,()=>{s.value=-1}),Object(gn.e)(s,async()=>{var e;s.value<0?a.value="":(a.value=r.value[s.value],null===(e=i.value.querySelectorAll(`.language[lang="${a.value}"]`)[0])||void 0===e||e.scrollIntoView(!1))}),{next:()=>{s.value++,s.value>=r.value.length&&(s.value=0)},prev:()=>{s.value--,s.value<0&&(s.value=0)},langSelectorContainer:i,selectedLanguage:a}};var Tn=function(e,t,n){let a;return()=>{const s=this,i=arguments;n&&!a&&e.apply(s,i),a&&!t||(clearTimeout(a),a=setTimeout(()=>{a=null,n||e.apply(s,i)},t))}},_n={name:"MwLanguageSelector",components:{MwInput:o.k},props:{placeholder:{type:String,default:""},autofocus:{type:Boolean,default:!0},languages:{type:Array,default:()=>[],validator:e=>e.every(e=>"string"==typeof e)},suggestions:{type:Array,default:()=>[],validator:e=>e.every(e=>"string"==typeof e)},searchAPI:{type:String,default:function(){const e=new URL("https://en.wikipedia.org/w/api.php");return e.searchParams.set("action","languagesearch"),e.searchParams.set("format","json"),e.searchParams.set("origin","*"),e.searchParams.set("formatversion",2),e.toString()}}},emits:["select","close"],setup(e,t){const n=Object(gn.d)(null),a=Object(gn.d)(""),s=Object(gn.d)([]),i=Object(gn.a)(()=>function(e){let t,n=[...e];const a=e.length;a<10&&(t=a),a<30&&(t=10),a>=30&&(t=15);const s=[];for(;n.length;)s.push(n.splice(0,t));return s}(s.value)),o=Object(gn.a)(()=>function(e){const t=e.length;return t<10?"few-results":t<30?"some-results":"many-results"}(s.value)),r=e=>t.emit("select",e),{autocompletion:l,onTabSelect:u}=wn(a,s),{next:g,prev:d,langSelectorContainer:p,selectedLanguage:m}=bn(a,s,e.suggestions);return Object(gn.e)(a,Tn(async()=>{s.value=await pn(e.languages,a.value,e.searchAPI)},300)),Object(gn.c)(async()=>{e.autofocus&&n.value.focus(),s.value=await pn(e.languages,"",e.searchAPI)}),{autocompletion:l,close:()=>t.emit("close"),getAutonym:en.getAutonym,getDir:en.getDir,langSelectorContainer:p,mwIconClose:tn.l,mwIconSearch:tn.C,next:g,onEnter:()=>{a.value&&e.languages.includes(a.value)?r(a.value):m.value?r(m.value):1!==s.value.length||r(s.value[0])},onTabSelect:u,prev:d,resultsDisplayClass:o,searchInputElement:n,searchQuery:a,searchResultsByScript:i,select:r,selectedLanguage:m}}},On=(n("7a68"),Object(u.a)(_n,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"langSelectorContainer",staticClass:"mw-ui-language-selector"},[e._t("search",(function(){return[n("div",{staticClass:"mw-ui-language-selector__inputcontainer  pa-4 mb-4"},[n("mw-input",{ref:"searchInputElement",staticClass:"mw-ui-language-selector__autocomplete pa-4",attrs:{icon:e.mwIconSearch,"icon-size":20,disabled:!0},model:{value:e.autocompletion,callback:function(t){e.autocompletion=t},expression:"autocompletion"}}),n("mw-input",{ref:"searchInputElement",staticClass:"mw-ui-language-selector__search pa-4",attrs:{icon:e.mwIconSearch,"icon-size":20,placeholder:e.placeholder,autofocus:e.autofocus},on:{keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.onEnter.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"down",40,t.key,["Down","ArrowDown"])?null:(t.preventDefault(),e.next.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"up",38,t.key,["Up","ArrowUp"])?null:(t.preventDefault(),e.prev.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:(t.preventDefault(),e.close.apply(null,arguments))},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"tab",9,t.key,"Tab")?null:(t.preventDefault(),e.onTabSelect.apply(null,arguments))}]},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}})],1)]})),n("section",{staticClass:"mw-ui-language-selector__resultscontainer pa-0 ma-0"},[e.suggestions.length&&!e.searchQuery?e._t("suggestions",(function(){return[n("section",{staticClass:"results px-3 pt-4"},[n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-language-selector-suggestions",arg:"cx-sx-language-selector-suggestions"}],staticClass:"results-header ps-8 pb-2"}),n("ul",{staticClass:"results-languages--suggestions pa-0 ma-0"},e._l(e.suggestions,(function(t){return n("li",{key:t,staticClass:"language pa-2 ps-8 ma-0",class:t===e.selectedLanguage?"language--selected":"",attrs:{lang:t,dir:e.getDir(t),"aria-selected":t===e.selectedLanguage,tabindex:"-1",role:"option"},domProps:{textContent:e._s(e.getAutonym(t))},on:{click:function(n){return e.select(t)}}})})),0)])]})):e._e(),e.searchResultsByScript.length?e._t("search",(function(){return[n("section",{staticClass:"results px-3 pt-4"},[e.suggestions.length&&!e.searchQuery?n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-language-selector-all-languages",arg:"cx-sx-language-selector-all-languages"}],staticClass:"results-header ps-8 pb-2"}):e._e(),e._l(e.searchResultsByScript,(function(t,a){return n("ul",{key:a,staticClass:"results-languages pa-0 ma-0 mb-6",class:e.resultsDisplayClass},e._l(t,(function(t){return n("li",{key:t,staticClass:"language pa-2 ps-8 ma-0",class:t===e.selectedLanguage?"language--selected":"",attrs:{lang:t,dir:e.getDir(t),role:"option","aria-selected":t===e.selectedLanguage,tabindex:"-1"},domProps:{textContent:e._s(e.getAutonym(t))},on:{click:function(n){return e.select(t)}}})})),0)}))],2)]})):e._t("noresults",(function(){return[n("section",{staticClass:"no-results px-3 py-4"},[n("h3",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-language-selector-no-search-results",arg:"cx-sx-language-selector-no-search-results"}],staticClass:"ps-8"})])]}))],2)],2)}),[],!1,null,null,null)).exports,jn={name:"SxTranslationListLanguageSelector",components:{MwLanguageSelector:On,MwDialog:o.f,MwIcon:o.j,MwButton:o.b},props:{sourceLanguages:{type:Array,required:!0},targetLanguages:{type:Array,required:!0}},data:()=>({mwIconArrowNext:tn.d,mwIconExpand:tn.q,sourceLanguageSelectOn:!1,targetLanguageSelectOn:!1}),computed:{...Object(r.b)({selectedSourceLanguage:e=>e.application.sourceLanguage,selectedTargetLanguage:e=>e.application.targetLanguage}),fullscreen(){return this.$mwui.breakpoint.mdAndDown}},methods:{getAutonym:en.getAutonym,getDir:en.getDir,openSourceLanguageDialog(){this.sourceLanguageSelectOn=!0},openTargetLanguageDialog(){this.targetLanguageSelectOn=!0},onSourceLanguageDialogClose(){this.sourceLanguageSelectOn=!1},onTargetLanguageDialogClose(){this.targetLanguageSelectOn=!1},onSourceLanguageSelected(e){this.sourceLanguageSelectOn=!1,this.$emit("source-language-selected",e)},onTargetLanguageSelected(e){this.targetLanguageSelectOn=!1,this.$emit("target-language-selected",e)}}},Mn=(n("e1af"),Object(u.a)(jn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"row sx-translation-list-language-selector ma-0 justify-center items-center"},[n("div",{staticClass:"col-5 justify-end"},[n("mw-button",{staticClass:"pa-3 sx-translation-list-language-selector__button",attrs:{indicator:e.mwIconExpand,outlined:!1,type:"text"},on:{click:function(t){return t.stopPropagation(),e.openSourceLanguageDialog.apply(null,arguments)}}},[n("span",{staticClass:"mw-ui-autonym",attrs:{dir:e.getDir(e.selectedSourceLanguage)},domProps:{textContent:e._s(e.getAutonym(e.selectedSourceLanguage))}})]),n("mw-dialog",{attrs:{animation:"slide-up",title:e.$i18n("sx-translation-list-language-selector-dialog-title"),fullscreen:e.fullscreen,header:e.fullscreen,"overlay-opacity":0},on:{close:e.onSourceLanguageDialogClose},model:{value:e.sourceLanguageSelectOn,callback:function(t){e.sourceLanguageSelectOn=t},expression:"sourceLanguageSelectOn"}},[n("mw-language-selector",{staticClass:"sx-translation-list-language-selector__widget col-12",attrs:{placeholder:e.$i18n("cx-sx-language-selector-placeholder"),languages:e.sourceLanguages},on:{select:e.onSourceLanguageSelected,close:e.onSourceLanguageDialogClose}})],1)],1),n("div",{staticClass:"sx-translation-list-language-selector__arrow col-2 justify-center"},[n("mw-icon",{attrs:{icon:e.mwIconArrowNext}})],1),n("div",{staticClass:"col-5 justify-start"},[n("mw-button",{staticClass:"pa-3 sx-translation-list-language-selector__button",attrs:{indicator:e.mwIconExpand,outlined:!1,type:"text",disabled:e.targetLanguages.length<2},on:{click:function(t){return t.stopPropagation(),e.openTargetLanguageDialog.apply(null,arguments)}}},[n("span",{staticClass:"mw-ui-autonym",attrs:{dir:e.getDir(e.selectedTargetLanguage)},domProps:{textContent:e._s(e.getAutonym(e.selectedTargetLanguage))}})]),n("mw-dialog",{attrs:{animation:"slide-up",fullscreen:e.fullscreen,header:e.fullscreen,"overlay-opacity":0,title:e.$i18n("sx-translation-list-language-selector-dialog-title")},on:{close:e.onTargetLanguageDialogClose},model:{value:e.targetLanguageSelectOn,callback:function(t){e.targetLanguageSelectOn=t},expression:"targetLanguageSelectOn"}},[n("mw-language-selector",{staticClass:"sx-translation-list-language-selector__widget col-12",attrs:{placeholder:e.$i18n("cx-sx-language-selector-placeholder"),languages:e.targetLanguages},on:{select:e.onTargetLanguageSelected,close:e.onTargetLanguageDialogClose}})],1)],1)])}),[],!1,null,null,null)).exports,In=function(){const e=Object(gn.a)(()=>Gt.state.mediawiki.supportedLanguageCodes||[]);return{enabledTargetLanguages:Object(gn.a)(()=>Gt.state.mediawiki.enabledTargetLanguages),supportedLanguageCodes:e}},Bn={name:"CxTranslationList",components:{CxTranslationWork:on,MwCard:o.d,MwSpinner:o.q,SxTranslationListLanguageSelector:Mn},props:{active:{type:Boolean,default:!1},translationStatus:{type:String,required:!0,validator:e=>-1!==["published","draft"].indexOf(e)}},setup(e,t){const n=t.root.$i18n("cx-translation-list-all-languages-option-label"),a=Object(gn.d)(n),s=Object(gn.d)(n),i=t.root.$store,o=Object(gn.a)(()=>i.state.translator.translationsLoaded),{enabledTargetLanguages:r}=In(),c=Object(gn.a)(()=>"published"===e.translationStatus?i.getters["translator/getPublishedTranslations"]:i.getters["translator/getDraftTranslations"]),l=Object(gn.a)(()=>a.value===n),u=Object(gn.a)(()=>s.value===n),g=Object(gn.a)(()=>c.value.filter(e=>(l.value||e.sourceLanguage===a.value)&&(u.value||e.targetLanguage===s.value))),d=Object(gn.a)(()=>{let e=c.value.map(e=>e.targetLanguage);return r.value&&(e=e.filter(e=>r.value.includes(e))),[...new Set(e)].reduce((e,t)=>[...e,{name:Object(en.getAutonym)(t),code:t}],[{name:n,code:n}])});return{activeTranslations:g,availableSourceLanguages:Object(gn.a)(()=>c.value.map(e=>e.sourceLanguage).filter((e,t,n)=>n.indexOf(e)===t).reduce((e,t)=>[...e,{name:Object(en.getAutonym)(t),code:t}],[{name:n,code:n}])),availableTargetLanguages:d,loaded:o,selectedSourceLanguage:a,selectedTargetLanguage:s}}},Nn=Object(u.a)(Bn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-card",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}],class:"cx-translation-list--"+e.translationStatus},[n("template",{slot:"header"},[n("h3",{staticClass:"mw-ui-card__title pa-4 pt-5 mb-0",domProps:{textContent:e._s(e.$i18n("cx-translation-label-"+e.translationStatus))}})]),n("sx-translation-list-language-selector",{attrs:{"selected-source-language":e.selectedSourceLanguage,"selected-target-language":e.selectedTargetLanguage,"source-languages":e.availableSourceLanguages,"target-languages":e.availableTargetLanguages},on:{"update:selectedSourceLanguage":function(t){e.selectedSourceLanguage=t},"update:selected-source-language":function(t){e.selectedSourceLanguage=t},"update:selectedTargetLanguage":function(t){e.selectedTargetLanguage=t},"update:selected-target-language":function(t){e.selectedTargetLanguage=t}}}),e.loaded?e._e():n("mw-spinner"),e._l(e.activeTranslations,(function(t,a){return n("cx-translation-work",{key:e.translationStatus+"-"+a,attrs:{translation:t}})}))],2)}),[],!1,null,null,null).exports,Hn={name:"CxTranslationSuggestion",components:{MwThumbnail:o.r,MwIcon:o.j,MwRow:o.p,MwCol:o.e},props:{suggestion:{type:[Q,ee,te],required:!0}},setup(e,t){const n=t.root.$store,a=Object(gn.a)(()=>e.suggestion),s=Object(gn.a)(()=>a.value.sourceTitle||a.value.title),i=Object(gn.a)(()=>n.getters["mediawiki/getPage"](a.value.sourceLanguage,s.value)),o=Object(gn.a)(()=>{var e;return null===(e=a.value)||void 0===e?void 0:e.missingSectionsCount}),r=Object(gn.a)(()=>{var e;return null===(e=i.value)||void 0===e?void 0:e.description}),c=Object(gn.a)(()=>a.value instanceof ee),l=Object(gn.a)(()=>a.value instanceof te),u=Object(gn.a)(()=>Object(en.getAutonym)(a.value.sourceLanguage)),g=Object(gn.a)(()=>Object(en.getAutonym)(a.value.targetLanguage));return{bookmarkIcon:Object(gn.a)(()=>l.value?tn.i:tn.j),bookmarkIconColor:Object(gn.a)(()=>l.value?t.root.$mwui.colors.primary:"currentColor"),description:r,isFavoriteSuggestion:l,isSectionSuggestion:c,missingSectionsCount:o,mwIconArrowNext:tn.d,mwIconClose:tn.l,page:i,sourceLanguageAutonym:u,targetLanguageAutonym:g,title:s}}},Vn=(n("b4c7"),Object(u.a)(Hn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.suggestion?n("div",{staticClass:"row cx-suggestion pa-4 ma-0"},[n("div",{staticClass:"col shrink pe-4"},[n("mw-thumbnail",{staticClass:"cx-suggestion__thumbnail",attrs:{thumbnail:e.page&&e.page.thumbnail,width:84}})],1),n("div",{staticClass:"col cx-suggestion__information-panel"},[n("mw-row",{staticClass:"ma-0 no-wrap fill-height",attrs:{direction:"column",align:"start"}},[n("mw-col",{staticClass:"cx-suggestion__information-panel__top pb-2",attrs:{shrink:""}},[n("mw-row",{staticClass:"ma-0",attrs:{align:"start",justify:"between"}},[n("mw-col",{staticClass:"pe-2",attrs:{grow:""}},[n("mw-row",{staticClass:"ma-0",attrs:{direction:"column",align:"start"}},[n("mw-col",{staticClass:"mb-2",attrs:{shrink:""}},[n("h5",{staticClass:"my-0 cx-suggestion__source-title",attrs:{lang:e.suggestion.sourceLanguage},domProps:{textContent:e._s(e.title)}})]),n("mw-col",{attrs:{shrink:""}},[n("p",{staticClass:"ma-0 cx-suggestion__source-description complementary",attrs:{lang:e.suggestion.sourceLanguage},domProps:{textContent:e._s(e.description)}})])],1)],1),n("mw-col",{attrs:{shrink:""}},[e.isFavoriteSuggestion?e._e():n("mw-icon",{staticClass:"mb-4",attrs:{icon:e.mwIconClose,size:"24"},on:{click:function(t){return t.stopPropagation(),e.$emit("close")}}}),n("mw-icon",{attrs:{icon:e.bookmarkIcon,size:"24","icon-color":e.bookmarkIconColor},on:{click:function(t){return t.stopPropagation(),e.$emit("bookmark")}}})],1)],1)],1),e.isSectionSuggestion?n("mw-col",{staticClass:"cx-suggestion__information-panel__bottom cx-suggestion__missing-sections",attrs:{shrink:""}},[n("small",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-translation-suggestion-info",value:[e.missingSectionsCount],expression:"[missingSectionsCount]",arg:"cx-sx-translation-suggestion-info"}]})]):e.isFavoriteSuggestion?n("mw-col",{staticClass:"cx-suggestion__information-panel__bottom cx-suggestion__language-pair",attrs:{shrink:""}},[n("mw-row",{staticClass:"ma-0",attrs:{justify:"between"}},[n("mw-col",{attrs:{grow:""}},[n("small",{domProps:{textContent:e._s(e.sourceLanguageAutonym)}}),n("mw-icon",{staticClass:"mx-1",attrs:{icon:e.mwIconArrowNext,size:"14"}}),n("small",{domProps:{textContent:e._s(e.targetLanguageAutonym)}})],1),e.missingSectionsCount?n("mw-col",{staticClass:"cx-suggestion__favorite-missing-sections",attrs:{shrink:""}},[n("small",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-translation-suggestion-info",value:[e.missingSectionsCount],expression:"[\n                missingSectionsCount\n              ]",arg:"cx-sx-translation-suggestion-info"}]})]):e._e()],1)],1):e._e()],1)],1)]):e._e()}),[],!1,null,null,null)).exports;var Wn=e=>{const t=e.$store,n=Object(gn.a)(()=>t.state.suggestions.sectionSuggestionsLoadingCount>0),a=Object(gn.a)(()=>t.state.suggestions.pageSuggestionsLoadingCount>0),s=Object(gn.a)(()=>!n.value&&!a.value),i=Object(gn.d)(0),o=Object(gn.d)(0),{maxSuggestionsPerSlice:r}=t.state.suggestions,l=Object(gn.a)(()=>(i.value+1)%4),u=Object(gn.a)(()=>(o.value+1)%4),g=Object(gn.a)(()=>t.getters["application/getSectionSuggestionsSliceByIndex"](i.value)),d=Object(gn.a)(()=>t.getters["application/getPageSuggestionsSliceByIndex"](o.value)),p=Object(gn.a)(()=>g.value.length===r),m=Object(gn.a)(()=>d.value.length===r),h=Object(gn.a)(()=>p.value&&t.getters["application/getSectionSuggestionsSliceByIndex"](u.value).length>0),f=Object(gn.a)(()=>m.value&&t.getters["application/getPageSuggestionsSliceByIndex"](u.value).length>0),S=()=>{h.value||(t.dispatch("suggestions/fetchNextSectionSuggestionsSlice",{nextIndex:l.value}),p.value&&C())},w=()=>{f.value||(t.dispatch("suggestions/fetchNextPageSuggestionsSlice",{nextIndex:u.value}),m.value&&T())},C=()=>i.value=(i.value+1)%4,T=()=>o.value=(o.value+1)%4;return{currentPageSuggestionsSlice:d,currentSectionSuggestionsSlice:g,discardPageSuggestion:n=>{e.$logEvent({event_type:"dashboard_discard_suggestion"}),t.commit("suggestions/removePageSuggestion",n),w()},discardSectionSuggestion:n=>{e.$logEvent({event_type:"dashboard_discard_suggestion"}),t.commit("suggestions/removeSectionSuggestion",n),S()},onSuggestionRefresh:()=>{S(),w()},pageSuggestionsLoading:a,sectionSuggestionsLoading:n,showRefreshButton:s}};const Yn=async e=>Gt.dispatch("suggestions/removeFavoriteSuggestion",e);var Zn={name:"CxSuggestionList",components:{SxTranslationListLanguageSelector:Mn,CxTranslationSuggestion:Vn,MwCard:o.d,MwButton:o.b,MwSpinner:o.q},props:{active:{type:Boolean,default:!1}},setup(e,t){const n=t.root,a=n.$store,{supportedLanguageCodes:s,availableTargetLanguages:i}=(()=>{const{supportedLanguageCodes:e,enabledTargetLanguages:t}=In(),n=Object(gn.a)(()=>t.value||e.value);return{supportedLanguageCodes:e,availableTargetLanguages:n}})(),c=t.root.$router,{currentPageSuggestionsSlice:u,currentSectionSuggestionsSlice:g,discardPageSuggestion:d,discardSectionSuggestion:p,onSuggestionRefresh:m,pageSuggestionsLoading:h,sectionSuggestionsLoading:f,showRefreshButton:v}=Wn(n);return{availableTargetLanguages:i,currentPageSuggestionsSlice:u,currentSectionSuggestionsSlice:g,discardPageSuggestion:d,discardSectionSuggestion:p,mwIconRefresh:tn.A,markFavoritePageSuggestion:async e=>a.dispatch("suggestions/addPageSuggestionAsFavorite",e),markFavoriteSectionSuggestion:async e=>a.dispatch("suggestions/addSectionSuggestionAsFavorite",e),unmarkFavoriteSectionSuggestion:Yn,onSuggestionRefresh:m,pageSuggestionsLoading:h,sectionSuggestionsLoading:f,showRefreshButton:v,startTranslation:e=>{a.dispatch("application/initializeSectionTranslation",e),c.push({name:"sx-translation-confirmer",params:{previousRoute:"dashboard",eventSource:"suggestion_no_seed"}})},supportedLanguageCodes:s,updateSourceLanguage:e=>a.dispatch("application/updateSourceLanguage",e),updateTargetLanguage:e=>a.dispatch("application/updateTargetLanguage",e)}}},Qn=(n("c34a"),Object(u.a)(Zn,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"show",rawName:"v-show",value:e.active,expression:"active"}]},[n("mw-card",{staticClass:"cx-translation-list--suggestions pa-0 mb-0"},[n("template",{slot:"header"},[n("h3",{staticClass:"mw-ui-card__title pa-4 pt-5 mb-0",domProps:{textContent:e._s(e.$i18n("cx-suggestionlist-title"))}})]),n("sx-translation-list-language-selector",{attrs:{"source-languages":e.supportedLanguageCodes,"target-languages":e.availableTargetLanguages},on:{"source-language-selected":e.updateSourceLanguage,"target-language-selected":e.updateTargetLanguage}})],2),n("mw-card",{staticClass:"pa-0 mb-0"},[n("h5",{directives:[{name:"i18n",rawName:"v-i18n:cx-suggestion-list-new-pages-division",arg:"cx-suggestion-list-new-pages-division"}],staticClass:"cx-translation-list__division-title ma-0 pa-4"}),e._l(e.currentPageSuggestionsSlice,(function(t,a){return n("cx-translation-suggestion",{key:"page-suggestion-"+a,attrs:{suggestion:t},on:{close:function(n){return e.discardPageSuggestion(t)},bookmark:function(n){return e.markFavoritePageSuggestion(t)}},nativeOn:{click:function(n){return e.startTranslation(t)}}})})),e.pageSuggestionsLoading?n("mw-spinner"):e._e()],2),n("mw-card",{staticClass:"cx-translation-list--sx-suggestions pa-0 mb-0"},[n("h5",{directives:[{name:"i18n",rawName:"v-i18n:cx-suggestionlist-expand-sections-title",arg:"cx-suggestionlist-expand-sections-title"}],staticClass:"cx-translation-list__division-title ma-0 pa-4"}),e._l(e.currentSectionSuggestionsSlice,(function(t,a){return n("cx-translation-suggestion",{key:"section-suggestion-"+a,staticClass:"ma-0",attrs:{suggestion:t},on:{close:function(n){return e.discardSectionSuggestion(t)},bookmark:function(n){return e.markFavoriteSectionSuggestion(t)}},nativeOn:{click:function(n){return e.startTranslation(t)}}})})),e.sectionSuggestionsLoading?n("mw-spinner"):e._e()],2),n("div",{staticClass:"cx-suggestion-list__refresh-button-container justify-center"},[e.showRefreshButton?n("mw-button",{staticClass:"ma-0 pa-4",attrs:{type:"text",label:e.$i18n("cx-suggestionlist-refresh"),outlined:!1,icon:e.mwIconRefresh},on:{click:e.onSuggestionRefresh}}):e._e()],1)],1)}),[],!1,null,null,null)).exports,aa={name:"CxFavoriteList",components:{CxTranslationSuggestion:Vn,MwCard:o.d},setup(e,t){const{$router:n,$store:a}=t.root;return{favorites:Object(gn.a)(()=>a.state.suggestions.favorites||[]),startFavoriteTranslation:async e=>{await a.dispatch("application/startFavoriteSectionTranslation",e),n.push({name:"sx-translation-confirmer",params:{previousRoute:"dashboard"}})},unmarkFavoriteSectionSuggestion:Yn}}},ia=Object(u.a)(aa,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.favorites.length?n("mw-card",{staticClass:"cx-translation-list--favorites pa-0 mb-4"},[n("template",{slot:"header"},[n("h3",{directives:[{name:"i18n",rawName:"v-i18n:cx-suggestion-list-favorites-division",arg:"cx-suggestion-list-favorites-division"}],staticClass:"mw-ui-card__title pa-4 pt-5 mb-0"})]),e._l(e.favorites,(function(t,a){return n("cx-translation-suggestion",{key:"favorite-"+a,attrs:{suggestion:t},on:{bookmark:function(n){return e.unmarkFavoriteSectionSuggestion(t)}},nativeOn:{click:function(n){return e.startFavoriteTranslation(t)}}})}))],2):e._e()}),[],!1,null,null,null).exports,la={name:"ExperimentalSupportBanner",components:{MwCol:o.e,MwRow:o.p,MwCard:o.d,MwIcon:o.j},data:()=>({mwIconLabFlask:tn.t,learnMoreUrl:"https://www.mediawiki.org/wiki/Special:MyLanguage/Content_translation/Section_translation",feedbackUrl:"https://www.mediawiki.org/wiki/Talk:Content_translation/Section_translation"})},ga=(n("63ac"),Object(u.a)(la,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-card",{staticClass:"experimental-support-banner mb-1"},[n("mw-row",[n("mw-col",{staticClass:"experimental-support-banner__icon me-3",attrs:{shrink:""}},[n("mw-icon",{attrs:{icon:e.mwIconLabFlask}})],1),n("mw-col",[n("h5",{directives:[{name:"i18n",rawName:"v-i18n:cx-dashboard-experimental-support-banner-title",arg:"cx-dashboard-experimental-support-banner-title"}]}),n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-dashboard-experimental-support-banner-description",arg:"cx-dashboard-experimental-support-banner-description"}],staticClass:"complementary"}),n("p",{staticClass:"complementary mt-4"},[n("a",{directives:[{name:"i18n",rawName:"v-i18n:cx-dashboard-experimental-support-banner-learn-more-anchor",arg:"cx-dashboard-experimental-support-banner-learn-more-anchor"}],attrs:{target:"_blank",href:e.learnMoreUrl}})]),n("p",{staticClass:"complementary"},[n("a",{directives:[{name:"i18n",rawName:"v-i18n:cx-dashboard-experimental-support-banner-share-feedback-anchor",arg:"cx-dashboard-experimental-support-banner-share-feedback-anchor"}],attrs:{target:"_blank",href:e.feedbackUrl}})])])],1)],1)}),[],!1,null,null,null)).exports;let da=null;function ma(e){return null===e?null:0===e?"0 edits":e<5?"1-4 edits":e<100?"5-99 edits":e<1e3?"100-999 edits":"1000+ edits"}function ha(e){if(!mw.eventLog)return mw.log({event:e}),Promise.resolve();const t="minerva"===mw.config.get("skin")?"mobile web":"desktop",n=mw.config.get("wgDBname"),a=`cx_sx_${mw.user.sessionId()}_${t}_${n}`,s="mediawiki.content_translation_event",i=mw.user.isAnon(),o=mw.user.getName(),r={$schema:"/analytics/mediawiki/content_translation_event/1.0.0",translation_type:"section",wiki_db:n,access_method:t,user_name:o,user_is_anonymous:i,content_translation_session_id:a};return i?Promise.resolve(mw.eventLog.submit(s,Object.assign({},r,e))):function(e){if(da)return Promise.resolve(da);const n=new URLSearchParams({action:"query",meta:"globaluserinfo",guiuser:e,guiprop:"editcount",formatversion:2,origin:"*",format:"json"});return fetch("https://en.wikipedia.org/w/api.php?"+n).then(e=>e.json()).then(e=>e.query.globaluserinfo.editcount).catch(e=>{mw.log.error("Error while fetching global edit count for user. ",e)})}(o).then(t=>{da=t,mw.eventLog.submit(s,Object.assign({},r,e,{user_global_edit_count:t,user_global_edit_count_bucket:ma(t)}))})}var va={install(e){e.prototype.$logEvent=ha}};var xa=async()=>{await Gt.dispatch("mediawiki/fetchSupportedLanguageCodes");const{enabledTargetLanguages:e,supportedLanguageCodes:t}=In(),{sourceLanguage:n,targetLanguage:a}=((e,t)=>{const n=new URLSearchParams(location.search),a=n.get("from"),s=n.get("to"),i=I.getCurrentWikiLanguageCode(),o=t=>!e||Array.isArray(e)&&e.includes(t),r=e=>t.includes(e),c_sourceLanguage="en",c_targetLanguage="es";let l;l=s&&o(s)&&r(s)?s:o(i)&&r(i)?i:(null==e?void 0:e[0])||c_targetLanguage;return{sourceLanguage:[a,c_sourceLanguage,i,c_targetLanguage].filter(e=>r(e)).find(e=>e!==l),targetLanguage:l}})(e.value,t.value),s=I.getCurrentWikiLanguageCode();if(mw.config.get("wgContentTranslationTranslateInTarget")&&a!==s){const e=new URLSearchParams(location.search),t=e.get("page"),s=e.get("section");window.location.href=I.getCXUrl(t,null,n,a,{sx:!0,section:s})}Gt.commit("application/setSourceLanguage",n),Gt.commit("application/setTargetLanguage",a)},ba=function(){const e=Object(gn.a)(()=>Gt.state.application.sourceLanguage),t=Object(gn.a)(()=>Gt.state.application.targetLanguage),n=Object(gn.a)(()=>Gt.state.application.currentMTProvider),a=Object(gn.a)(()=>Gt.state.application.currentSectionSuggestion),s=Object(gn.a)(()=>Gt.state.application.currentSourceSection),i=Object(gn.a)(()=>Object(en.getAutonym)(e.value)),o=Object(gn.a)(()=>Object(en.getAutonym)(t.value)),r=Object(gn.a)(()=>{var e;return null===(e=s.value)||void 0===e?void 0:e.isTitleSelected}),c=Object(gn.a)(()=>Gt.state.application.publishFeedbackMessages),l=Object(gn.a)(()=>{var e;return null===(e=s.value)||void 0===e?void 0:e.selectedContentTranslationUnit}),u=Object(gn.a)(()=>Gt.getters["application/getCurrentProposedTranslation"]);return{currentMTProvider:n,currentSectionSuggestion:a,currentSourceSection:s,isSectionTitleSelected:r,proposedTranslation:u,publishFeedbackMessages:c,selectedContentTranslationUnit:l,sourceLanguage:e,sourceLanguageAutonym:i,targetLanguage:t,targetLanguageAutonym:o}};var Ta=async(e,t,n)=>{const{sourceLanguage:a,targetLanguage:s}=ba(),i=await Gt.dispatch("suggestions/loadSectionSuggestion",{sourceLanguage:a.value,targetLanguage:s.value,sourceTitle:e});i&&(Gt.dispatch("application/initializeSectionTranslation",i),nu.push({name:"sx-translation-confirmer",params:{previousRoute:t,eventSource:n}}))};var La=e=>{const t=("mflanguagesearcher"===new URLSearchParams(location.search).get("campaign")?"content_language_selector":null)||"direct_preselect";ha({event_type:"dashboard_open",event_source:t,content_translation_session_position:0}),Ta(e,"dashboard",t)};var Pa=async()=>{await xa();const e=(()=>{const e=new URLSearchParams(location.search),t=e.get("sx"),n=e.get("page");return t&&n?n:null})();e?La(e):(ha({event_type:"dashboard_open",event_source:"direct",content_translation_session_position:0}),await Gt.dispatch("suggestions/fetchFavorites"),await Gt.dispatch("translator/fetchTranslations"),Gt.dispatch("suggestions/initializeSuggestions"))},Aa={name:"CxDashboard",components:{CxFavoriteList:ia,CxSuggestionList:Qn,CxTranslationList:Nn,ExperimentalSupportBanner:ga,MwBottomNavigation:o.a,MwButton:o.b,MwButtonGroup:o.c,MwRow:o.p},setup(e,t){const n=Object(gn.d)("suggestions"),a=Object(gn.a)(()=>[{value:"suggestions",props:{label:t.root.$i18n("cx-translation-filter-suggested-translations"),icon:tn.v,type:"text"}},{value:"draft",props:{label:t.root.$i18n("cx-translation-filter-draft-translations"),icon:tn.n,type:"text"}},{value:"published",props:{label:t.root.$i18n("cx-translation-filter-published-translations"),icon:tn.g,type:"text"}}]);Object(gn.c)(()=>{new URLSearchParams(window.location.search).get("sx")&&(n.value="suggestions")});const s=t.root.$router;return Object(gn.e)(n,()=>window.scrollTo(0,0)),Pa(),{active:n,listSelector:a,mwIconAdd:tn.a,mwIconArticleCheck:tn.g,mwIconLightBulb:tn.v,mwIconEdit:tn.n,searchTranslation:()=>s.push({name:"sx-article-search"})}}},$a={name:"DashboardView",components:{CxDashboard:Object(u.a)(Aa,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.$incompleteVersion?n("experimental-support-banner",{staticClass:"mb-4"}):e._e(),n("mw-row",{staticClass:"ma-0"},[n("mw-button",{staticClass:"col-md-4 col-xs-12 col-lg-3 my-4",attrs:{progressive:"",icon:e.mwIconAdd,label:e.$i18n("cx-create-new-translation")},on:{click:e.searchTranslation}})],1),!e.$incompleteVersion&&e.$mwui.breakpoint.mdAndUp?n("nav",[n("mw-button-group",{staticClass:"justify-around",attrs:{items:e.listSelector,active:e.active},on:{select:function(t){e.active=t}}})],1):e._e(),n("cx-favorite-list"),n("cx-suggestion-list",{attrs:{active:"suggestions"===e.active}}),e.$incompleteVersion?e._e():n("cx-translation-list",{attrs:{"translation-status":"published",active:"published"===e.active}}),e.$incompleteVersion?e._e():n("cx-translation-list",{attrs:{"translation-status":"draft",active:"draft"===e.active}}),!e.$incompleteVersion&&e.$mwui.breakpoint.smAndDown?n("mw-bottom-navigation",{attrs:{items:e.listSelector,active:e.active},on:{"update:active":function(t){e.active=t}}}):e._e()],1)}),[],!1,null,null,null).exports}},Fa=Object(u.a)($a,(function(){var t=this.$createElement,n=this._self._c||t;return n("main",{staticClass:"cx-translation-dashboard"},[n("cx-dashboard",{staticClass:"col-xs-12 col-md-8 col-lg-7 col-offset-lg-1 mb-4 pb-12"})],1)}),[],!1,null,null,null).exports;const Va=e=>{if(!history.pushState)return;const t=new URLSearchParams(location.search);t.set("page",null==e?void 0:e.sourceTitle),t.set("from",null==e?void 0:e.sourceLanguage),t.set("to",null==e?void 0:e.targetLanguage),t.set("sx",!0),Xa(Object.fromEntries(t))},Xa=e=>{history.replaceState({},document.title,E("Special:ContentTranslation",e))};var Wa=()=>{const{currentSectionSuggestion:e}=ba(),t=Object(gn.a)(()=>{var t,n;return null===(t=e.value.orderedMissingSections)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.sourceTitle}),n=Object(gn.a)(()=>e.value.missingSectionsCount),a=Object(gn.a)(()=>e.value.presentSectionsCount),s=Object(gn.a)(()=>{var t;return!(null===(t=e.value)||void 0===t||!t.translationExists)}),i=Object(gn.a)(()=>{var t,n;return I.getPageUrl((null===(t=e.value)||void 0===t?void 0:t.targetLanguage)||"",(null===(n=e.value)||void 0===n?void 0:n.targetTitle)||"")});return{actionInformationMessageArgs:Object(gn.a)(()=>{let e;return e=n.value>1?["cx-sx-existing-translation-additional-info",`"${t.value}"`,n.value-1]:1===n.value&&a.value>0?["cx-sx-translation-confirmer-action-message-single-missing-multiple-present",`"${t.value}"`]:1===n.value&&0===a.value?["cx-sx-translation-confirmer-action-message-single-missing-none-present",`"${t.value}"`]:a.value>0?["cx-sx-translation-confirmer-action-message-none-missing-multiple-present"]:["cx-sx-translation-confirmer-action-message-none-missing-none-present"],e}),getActionButtonLabel:e=>e?"cx-sx-translation-confirmer-translate-prefilled-section-button-label":s.value?n.value>1||1===n.value&&a.value>0?"cx-sx-select-section":1===n.value&&0===a.value?"cx-sx-translation-confirmer-action-view-section":0===n.value&&a.value>0?"cx-sx-select-section":0===n.value&&0===a.value?"cx-sx-translation-confirmer-action-new-translation":void 0:"cx-sx-start-translation-button-label",isProgressiveButton:Object(gn.a)(()=>{var t;return!s.value||(null===(t=e.value)||void 0===t?void 0:t.missingSectionsCount)>0}),targetArticlePath:i,translationExists:s}},Za={name:"SxTranslationConfirmerActionPanel",components:{MwButton:o.b,MwRow:o.p,MwCol:o.e,MwIcon:o.j},setup(e,t){const n=t.root.$router,{targetLanguageAutonym:a,currentSectionSuggestion:s}=ba(),{clearPreFilledSection:i,onSectionSelectorClick:o,preFilledSectionTitle:r}=(e=>{const t=new URLSearchParams(location.search),n=Object(gn.d)(t.get("section")),{currentSourceSection:a,currentSectionSuggestion:s}=ba(),i=Object(gn.a)(()=>{var e;return!(null===(e=s.value)||void 0===e||!e.translationExists)}),o=()=>{n.value=null,t.delete("section"),Xa(Object.fromEntries(t))};return{clearPreFilledSection:o,onSectionSelectorClick:async()=>{n.value?(await Gt.dispatch("application/selectPageSectionByTitle",n.value),a.value?e.push({name:"sx-content-comparator",params:{force:!0}}):o()):i.value?e.push({name:"sx-section-selector"}):(await Gt.dispatch("application/selectPageSectionByIndex",0),e.push({name:"sx-quick-tutorial",params:{force:!0}})),Va(s.value)},preFilledSectionTitle:n}})(n),{actionInformationMessageArgs:c,getActionButtonLabel:l,isProgressiveButton:u,targetArticlePath:g,translationExists:d}=Wa(),p=Object(gn.a)(()=>t.root.$i18n(l(!!r.value))),m=Object(gn.a)(()=>t.root.$i18n(...c.value));return Object(gn.c)(()=>{const e=r.value;e&&!s.value.hasSectionTitle(e)&&i()}),{actionButtonLabel:p,actionInformationMessage:m,isProgressiveButton:u,mwIconLinkExternal:tn.w,onMoreSectionsClick:()=>{n.push({name:"sx-section-selector"}),Va(s.value)},onSectionSelectorClick:o,preFilledSectionTitle:r,targetArticlePath:g,targetLanguageAutonym:a,translationExists:d}}},Qa=(n("3619"),Object(u.a)(Za,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"sx-translation-confirmer-body pb-4"},[e.preFilledSectionTitle?n("section",{staticClass:"sx-translation-confirmer-body__pre-filled-banner pa-4 ma-0"},[n("h6",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-translation-confirmer-prefilled-section-heading",arg:"cx-sx-translation-confirmer-prefilled-section-heading"}]}),n("h5",{staticClass:"ma-0",domProps:{textContent:e._s(e.preFilledSectionTitle)}})]):e.translationExists?n("section",{staticClass:"mt-1 px-4 pt-4"},[n("mw-row",{staticClass:"sx-translation-confirmer__translation-status ma-0 pb-2",attrs:{justify:"between"}},[n("mw-col",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-existing-translation-status",value:[e.targetLanguageAutonym],expression:"[targetLanguageAutonym]",arg:"cx-sx-existing-translation-status"}],staticClass:"ma-0 pe-2",attrs:{tag:"h5"}}),n("mw-col",{attrs:{shrink:""}},[n("a",{attrs:{href:e.targetArticlePath,target:"_blank"}},[n("mw-icon",{attrs:{icon:e.mwIconLinkExternal,size:"16","icon-color":e.$mwui.colors.base30}})],1)])],1),n("mw-row",{staticClass:"ma-0"},[n("mw-col",[n("span",{domProps:{textContent:e._s(e.actionInformationMessage)}})])],1)],1):e._e(),n("mw-row",{staticClass:"sx-translation-confirmer__action pt-5 pb-2 ma-0 px-4",attrs:{justify:e.preFilledSectionTitle?"between":"center"}},[e.preFilledSectionTitle?n("mw-col",{attrs:{shrink:""}},[n("mw-button",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-translation-confirmer-more-sections-button-label",arg:"cx-sx-translation-confirmer-more-sections-button-label"}],attrs:{large:"",progressive:"",type:"text",label:e.actionButtonLabel},on:{click:e.onMoreSectionsClick}})],1):e._e(),n("mw-col",{attrs:{shrink:""}},[n("mw-button",{attrs:{large:"",progressive:e.isProgressiveButton,label:e.actionButtonLabel},on:{click:e.onSectionSelectorClick}})],1)],1)],1)}),[],!1,null,null,null)).exports,as={name:"SxArticleLanguageSelector",components:{SxTranslationListLanguageSelector:Mn},setup(e,t){const{supportedLanguageCodes:n,enabledTargetLanguages:a}=In(),s=t.root.$store,i=Object(gn.a)(()=>s.getters["application/getCurrentLanguageTitleGroup"]);return{availableSourceLanguages:Object(gn.a)(()=>{var e;return(null===(e=i.value)||void 0===e?void 0:e.titles.map(e=>e.lang))||[]}),targetLanguages:Object(gn.a)(()=>a.value||n.value),onSourceLanguageSelected:e=>s.dispatch("application/updateSourceLanguage",e),onTargetLanguageSelected:e=>s.dispatch("application/updateTargetLanguage",e)}}},is=(n("9bc3"),Object(u.a)(as,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("sx-translation-list-language-selector",{staticClass:"sx-article-language-selector",attrs:{"source-languages":e.availableSourceLanguages,"target-languages":e.targetLanguages},on:{"source-language-selected":e.onSourceLanguageSelected,"target-language-selected":e.onTargetLanguageSelected}})}),[],!1,null,null,null)).exports,ls={name:"SxTranslationConfirmerArticleInformation",components:{MwRow:o.p,MwCol:o.e,MwIcon:o.j,MwButton:o.b},setup(e,t){const n=t.root.$store,{currentSectionSuggestion:a}=ba(),s=Object(gn.a)(()=>n.state.suggestions.favorites||[]),i=Object(gn.a)(()=>s.value.some(e=>a.value.sourceTitle===e.title&&a.value.sourceLanguage===e.sourceLanguage&&a.value.targetLanguage===e.targetLanguage)),o=async()=>n.dispatch("suggestions/removeFavoriteSuggestion",new te({title:a.value.sourceTitle,sourceLanguage:a.value.sourceLanguage,targetLanguage:a.value.targetLanguage})),r=async()=>n.dispatch("suggestions/doMarkSuggestionAsFavorite",a.value),c=Object(gn.a)(()=>i.value?tn.i:tn.j),l=Object(gn.a)(()=>i.value?o:r),u=Object(gn.a)(()=>n.getters["application/getCurrentPage"]),g=Object(gn.a)(()=>{var e;return null===(e=a.value)||void 0===e?void 0:e.sourceTitle}),d=Object(gn.a)(()=>{var e;return I.getPageUrl((null===(e=a.value)||void 0===e?void 0:e.sourceLanguage)||"",g.value||"")}),p=Object(gn.a)(()=>{var e;return null===(e=u.value)||void 0===e?void 0:e.langLinksCount}),m=Object(gn.a)(()=>{var e;return Object.values((null===(e=u.value)||void 0===e?void 0:e.pageviews)||{}).reduce((e,t)=>e+t,0)});return{bookmarkIcon:c,isFavorite:i,langLinksCount:p,mwIconLanguage:tn.u,mwIconLinkExternal:tn.w,sourceArticle:u,sourceArticlePath:d,sourceTitle:g,toggleFavorite:l,weeklyViews:m}}},gs=(n("d940"),Object(u.a)(ls,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-row",{staticClass:"sx-translation-confirmer__article-information ma-0 pa-4",attrs:{align:"stretch",justify:"start"}},[n("mw-col",[n("mw-row",{staticClass:"sx-translation-confirmer__article-information__header ma-0 mb-2",attrs:{justify:"between"}},[n("mw-col",{staticClass:"pa-0 pe-4 flex sx-translation-confirmer__article-information__title",attrs:{tag:"a",href:e.sourceArticlePath,target:"_blank"}},[n("h5",{staticClass:" ma-0  me-1",domProps:{textContent:e._s(e.sourceTitle)}}),n("mw-icon",{attrs:{icon:e.mwIconLinkExternal,size:"10","icon-color":e.$mwui.colors.base30}})],1),n("mw-col",{attrs:{shrink:"",align:"start"}},[n("mw-button",{staticClass:"pa-0",attrs:{type:"icon",icon:e.bookmarkIcon,progressive:e.isFavorite},on:{click:e.toggleFavorite}})],1)],1),n("p",{staticClass:"complementary sx-translation-confirmer__article-information__stats ma-0 flex"},[n("mw-icon",{staticClass:"me-1",attrs:{icon:e.mwIconLanguage,size:"16"}}),n("span",{staticClass:"pe-3",domProps:{textContent:e._s(e.langLinksCount)}}),n("span",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-translation-confirmer-views-count",value:[e.weeklyViews],expression:"[weeklyViews]",arg:"cx-sx-translation-confirmer-views-count"}]})],1)],1)],1)}),[],!1,null,null,null)).exports;function fs(){var e=this.getReferenceNode();return e?(this.view=new ve.ui.MWPreviewElement(e,{useView:!0}),this.view.once("render",this.context.updateDimensions.bind(this.context)),this.view.$element):$("<div>").addClass("ve-ui-mwReferenceContextItem-muted").text(ve.msg("cite-ve-referenceslist-missingref"))}async function vs(e,t){await Cs(),OO.ui.isMobile=()=>!0,await mw.libs.ve.targetLoader.loadModules("visual"),n("45dd"),n("9c2c"),n("0651"),n("3634");return new(n("85be"))(function(e){return e.$el=$(e),e}(t),e)}var ws={name:"VisualEditor",props:{content:{type:String,required:!0},language:{type:String,required:!0},title:{type:String,required:!0},dir:{type:String,default:"auto"}},emits:["ready","close","edit-completed"],setup(e,t){const n=Object(gn.d)(null);let a=null;const s=Object(gn.a)(()=>a.getHtml()),r={placeholder:!1,log:console.log,sectionId:0,onBack:()=>{a.destroy(),t.emit("close")},onNext:()=>{t.emit("edit-completed",s.value),a.destroy()},language:e.language,title:e.title,siteMapper:new mw.cx.SiteMapper};return Object(gn.c)(async()=>{const s=await vs(r,n.value);t.emit("ready"),n.value.appendChild(s.$element[0]),a=function(e,t,n,a){e.clearSurfaces();const s=ve.dm.converter.getModelFromDom(ve.createDocumentFromHtml(t||"<span class='sx-edit-dummy-node' />"),{lang:n,dir:a}),i=e.createSurface(s);return e.surfaces.push(i),e.setSurface(i),i.initialize(),i}(s,e.content,e.language,e.dir),ve.ui.MWReferenceContextItem.prototype.getRendering=fs}),{sxeditor:n}}},bs=(n("fe49"),Object(u.a)(ws,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"sxeditor",staticClass:"visual-editor",attrs:{lang:e.language,dir:e.dir}},[e._m(0),n("div",{staticClass:"surface pa-5",attrs:{lang:e.language,dir:e.dir}})])}),[function(){var t=this.$createElement,n=this._self._c||t;return n("div",{staticClass:"overlay-header header initial-header"},[n("div",{staticClass:"toolbar"})])}],!1,null,null,null)).exports;function Cs(){return mw.loader.using(["ext.visualEditor.targetLoader","ext.visualEditor.mobileArticleTarget","ext.cite.visualEditor"])}var ys={name:"SxTranslationConfirmer",components:{MwIcon:o.j,SxTranslationConfirmerArticleInformation:gs,MwRow:o.p,MwCol:o.e,MwButton:o.b,SxArticleLanguageSelector:is,SxTranslationConfirmerActionPanel:Qa},setup(e,t){const n=t.root.$store,a=Object(gn.a)(()=>{var e;const t=n.getters["application/getCurrentPage"];return null==t||null===(e=t.image)||void 0===e?void 0:e.source}),{previousRoute:s,eventSource:i}=t.root.$route.params;Object(gn.c)(()=>{n.dispatch("application/fetchCurrentSectionSuggestionLanguageTitles"),t.root.$logEvent({event_type:"dashboard_translation_start",event_source:i}),Cs()});return{articleImageSource:a,mwIconArticle:tn.f,mwIconClose:tn.l,onClose:()=>{n.dispatch("application/clearCurrentSectionSuggestion"),Xa(null),t.root.$router.push({name:s})}}}},Ps={name:"SxTranslationConfirmerView",components:{SxTranslationConfirmer:(n("f92f"),Object(u.a)(ys,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"sx-translation-confirmer"},[n("mw-row",{staticClass:"sx-translation-confirmer__header ma-0 py-3",attrs:{align:"stretch",justify:"start"}},[n("mw-col",{staticClass:"px-4",attrs:{grow:"",align:"center"}},[n("h5",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-translation-confirmer-title",arg:"cx-sx-translation-confirmer-title"}],staticClass:"mb-0"})]),n("mw-col",{staticClass:"pe-4",attrs:{shrink:"",align:"start"}},[n("mw-button",{staticClass:"pa-0",attrs:{type:"icon",icon:e.mwIconClose,"icon-size":20},on:{click:e.onClose}})],1)],1),n("div",{staticClass:"sx-translation-confirmer__article-image flex justify-center"},[e.articleImageSource?n("img",{attrs:{src:e.articleImageSource}}):n("mw-icon",{attrs:{size:"120",icon:e.mwIconArticle,"icon-color":e.$mwui.colors.primary}})],1),n("sx-translation-confirmer-article-information"),n("sx-article-language-selector"),n("sx-translation-confirmer-action-panel"),n("mw-row",{staticClass:"sx-translation-confirmer__license ma-0",attrs:{justify:"center"}},[n("p",{staticClass:"ma-3"},[n("small",{directives:[{name:"i18n-html",rawName:"v-i18n-html:cx-license-agreement",arg:"cx-license-agreement"}]})])])],1)}),[],!1,null,null,null)).exports},computed:{classes(){return{fullscreen:this.$mwui.breakpoint.mdAndDown}}}},As=(n("8c24"),Object(u.a)(Ps,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"sx-translation-confirmer-view",class:e.classes},[n("sx-translation-confirmer")],1)}),[],!1,null,null,null)).exports,Rs={name:"SxSectionSelectorViewArticleItem",components:{MwRow:o.p,MwButton:o.b},props:{path:{type:String,required:!0},autonym:{type:String,required:!0}},data:()=>({mwIconLinkExternal:tn.w})},Ds=Object(u.a)(Rs,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-row",{staticClass:"ma-0",attrs:{tag:"li"}},[n("mw-button",{staticClass:"col justify-between py-3 px-4",attrs:{href:e.path,target:"_blank",indicator:e.mwIconLinkExternal,label:e.$i18n("cx-sx-section-selector-view-article-button-label",e.autonym),type:"text",outlined:!1}})],1)}),[],!1,null,null,null).exports,Vs={name:"SxSectionSelectorHeader",components:{MwRow:o.p,MwCol:o.e,MwButton:o.b},props:{suggestion:{type:ee,required:!0}},data:()=>({mwIconClose:tn.l})},zs=(n("bd9f"),Object(u.a)(Vs,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sx-section-selector__header pa-4"},[n("mw-row",{staticClass:"ma-0 pb-3"},[n("mw-col",[n("h6",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-title",arg:"cx-sx-section-selector-title"}],staticClass:"sx-section-selector__header-text ma-0"}),n("h2",{staticClass:"sx-section-selector__title ma-0 py-0",domProps:{textContent:e._s(e.suggestion.sourceTitle)}})]),n("mw-col",{staticClass:"justify-end",attrs:{shrink:""}},[n("mw-button",{staticClass:"pa-0",attrs:{large:!0,type:"icon",icon:e.mwIconClose},on:{click:function(t){return e.$emit("close")}}})],1)],1),n("h4",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-subtitle",arg:"cx-sx-section-selector-subtitle"}],staticClass:"pt-0 ma-0"}),n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-desc",arg:"cx-sx-section-selector-desc"}],staticClass:"ma-0"})],1)}),[],!1,null,null,null)).exports,Qs={name:"SxSectionSelectorSectionList",components:{MwRow:o.p,MwButton:o.b,MwIcon:o.j},props:{sections:{type:Array,required:!0}},data:()=>({mwIconArrowForward:tn.c})},ti=Object(u.a)(Qs,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ul",{staticClass:"sx-section-selector__sections-list ma-0 pa-0"},e._l(e.sections,(function(t){return n("mw-row",{key:t.sourceTitle,staticClass:"ma-0",attrs:{tag:"li"}},[n("mw-button",{staticClass:"col justify-between py-3 px-4",attrs:{label:t.sourceTitle,type:"text",outlined:!1},on:{click:function(n){return e.$emit("select-section",t.sourceTitle)}}},[e._t("default",null,{targetSection:t.targetTitle,sourceSection:t.sourceTitle}),n("mw-icon",{staticClass:"mw-ui-button__indicator",attrs:{icon:e.mwIconArrowForward}})],2)],1)})),1)}),[],!1,null,null,null).exports,ai={name:"SxSectionSelectorSectionListMissing",components:{SxSectionSelectorSectionList:ti,MwRow:o.p,MwCol:o.e,MwButton:o.b},props:{suggestion:{type:ee,required:!0}},data:()=>({sadRobotSVG:n("37fc")}),computed:{targetLanguageAutonym(){return Object(en.getAutonym)(this.suggestion.targetLanguage)},emptySections(){return 0===Object.keys(this.suggestion.missingSections).length}}},ii=(n("39bd"),Object(u.a)(ai,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"sx-section-selector__missing-sections py-2"},[n("h4",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-missing-sections-title",value:[e.targetLanguageAutonym],expression:"[\n      targetLanguageAutonym\n    ]",arg:"cx-sx-section-selector-missing-sections-title"}],staticClass:"sx-section-selector__list-title mb-0 pb-0 py-3 px-4"}),e.emptySections?e._e():n("sx-section-selector-section-list",e._g({attrs:{sections:e.suggestion.orderedMissingSections},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.sourceSection;return[n("h5",{staticClass:"ma-0",domProps:{textContent:e._s(a)}})]}}],null,!1,4098727704)},e.$listeners)),e.emptySections?n("mw-row",{staticClass:"sx-section-selector__empty-missing-sections px-4 my-0"},[n("mw-col",{staticClass:"py-6 justify-center",domProps:{innerHTML:e._s(e.sadRobotSVG)}}),n("mw-col",{staticClass:"sx-section-selector__empty-missing-sections-details pa-0",attrs:{cols:"12"}},[n("h6",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-empty-missing-sections-title",arg:"cx-sx-section-selector-empty-missing-sections-title"}]})]),n("mw-col",{staticClass:"sx-section-selector__empty-missing-sections-details pa-0 mb-2",attrs:{cols:"12"}},[n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-empty-missing-sections-desc",arg:"cx-sx-section-selector-empty-missing-sections-desc"}]})]),n("mw-col",{staticClass:"pa-0 mb-2",attrs:{cols:"12"}},[n("mw-button",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-pick-other-translation-button-label",arg:"cx-sx-section-selector-pick-other-translation-button-label"}],staticClass:"sx-section-selector__empty-missing-sections__close-button px-0",attrs:{type:"text"},on:{click:function(t){return e.$emit("close")}}})],1)],1):e._e()],1)}),[],!1,null,null,null)).exports,li={name:"SxSectionSelectorSectionListPresent",components:{SxSectionSelectorSectionList:ti},props:{suggestion:{type:ee,required:!0}},data:()=>({mwIconArrowForward:tn.c}),computed:{targetLanguageAutonym(){return Object(en.getAutonym)(this.suggestion.targetLanguage)}}},pi={name:"SxSectionSelector",components:{SxSectionSelectorSectionListPresent:(n("c3e3"),Object(u.a)(li,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"sx-section-selector__present-sections py-2"},[n("h4",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-present-sections-title",value:[e.targetLanguageAutonym],expression:"[\n      targetLanguageAutonym\n    ]",arg:"cx-sx-section-selector-present-sections-title"}],staticClass:"sx-section-selector__list-title mb-0 pb-0 py-3 px-4"}),n("sx-section-selector-section-list",e._g({attrs:{sections:e.suggestion.orderedPresentSections},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.sourceSection,s=t.targetSection;return[n("div",{staticClass:"sx-section-selector__present-section-button-content"},[n("h5",{staticClass:"sx-section-selector__present-section-button-source",domProps:{textContent:e._s(a)}}),n("h6",{staticClass:"sx-section-selector__present-section-button-target",domProps:{textContent:e._s(s)}})])]}}])},e.$listeners))],1)}),[],!1,null,null,null)).exports,SxSectionSelectorSectionListMissing:ii,SxSectionSelectorHeader:zs,SxSectionSelectorViewArticleItem:Ds,MwRow:o.p,MwCol:o.e,MwIcon:o.j,SxArticleLanguageSelector:is},setup(e,t){const{currentSectionSuggestion:n,sourceLanguageAutonym:a,targetLanguageAutonym:s}=ba(),i=Object(gn.a)(()=>I.getPageUrl(n.value.sourceLanguage,n.value.sourceTitle)),o=Object(gn.a)(()=>I.getPageUrl(n.value.targetLanguage,n.value.targetTitle)),r=Object(gn.a)(()=>[{path:i.value,autonym:a.value},{path:o.value,autonym:s.value}]);return{goToDashboard:()=>{Xa(null),t.root.$router.push({name:"dashboard"})},mwIconRobot:tn.B,mwIconLabFlask:tn.t,selectSection:e=>{t.root.$store.dispatch("application/selectPageSectionByTitle",e),t.root.$router.push({name:"sx-content-comparator"})},suggestion:n,targetLanguageAutonym:s,viewArticleItems:r}}},Si={name:"SxSectionSelectorView",components:{SxSectionSelector:(n("58c6"),Object(u.a)(pi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"sx-section-selector"},[n("sx-section-selector-header",{attrs:{suggestion:e.suggestion},on:{close:e.goToDashboard}}),n("section",{staticClass:"sx-section-selector__body"},[n("sx-article-language-selector"),n("sx-section-selector-section-list-missing",{attrs:{suggestion:e.suggestion},on:{"select-section":e.selectSection,close:e.goToDashboard}}),n("sx-section-selector-section-list-present",{attrs:{suggestion:e.suggestion},on:{"select-section":e.selectSection}}),n("section",{staticClass:" py-2"},[n("h4",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-more-details-title",value:[e.targetLanguageAutonym],expression:"[\n          targetLanguageAutonym\n        ]",arg:"cx-sx-section-selector-more-details-title"}],staticClass:"sx-section-selector__list-title mb-0 pb-0 py-3 px-4"}),n("ul",{staticClass:"ma-0 pa-0"},e._l(e.viewArticleItems,(function(e,t){return n("sx-section-selector-view-article-item",{key:"view-article-item-"+t,attrs:{path:e.path,autonym:e.autonym}})})),1)]),n("mw-row",{staticClass:"sx-section-selector__additional-considerations ma-0"},[n("mw-col",{staticClass:"px-4 pt-5 pb-4",attrs:{cols:"12",md:"6"}},[n("h6",{staticClass:"sx-section-selector__additional-consideration-title"},[n("mw-icon",{staticClass:"pe-2",attrs:{icon:e.mwIconRobot}}),e._v(" "+e._s(e.$i18n("cx-sx-section-selector-automatic-section-matching-title"))+" ")],1),n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-automatic-section-matching-description",arg:"cx-sx-section-selector-automatic-section-matching-description"}]}),n("a",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-learn-more-anchor-label",arg:"cx-sx-section-selector-learn-more-anchor-label"}],attrs:{href:"#"}})]),n("mw-col",{staticClass:"px-4 py-5",attrs:{cols:"12",md:"6"}},[n("h6",{staticClass:"sx-section-selector__additional-consideration-title"},[n("mw-icon",{staticClass:"pe-2",attrs:{icon:e.mwIconLabFlask}}),e._v(" "+e._s(e.$i18n("cx-sx-section-selector-unsupported-sections-title"))+" ")],1),n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-unsupported-sections-description",arg:"cx-sx-section-selector-unsupported-sections-description"}]}),n("a",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-learn-more-anchor-label",arg:"cx-sx-section-selector-learn-more-anchor-label"}],attrs:{href:"#"}})])],1)],1)],1)}),[],!1,null,null,null)).exports},computed:{classes(){return{fullscreen:this.$mwui.breakpoint.mdAndDown}}}},xi=(n("4d50"),Object(u.a)(Si,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"sx-section-selector-view",class:e.classes},[n("sx-section-selector")],1)}),[],!1,null,null,null)).exports;var ji=(e,t)=>{const{currentSectionSuggestion:n}=ba();return Object(gn.a)(()=>{const a={value:"source_section",props:{label:t.$i18n("cx-sx-content-comparator-source-selector-title",Object(en.getAutonym)(n.value.sourceLanguage)),type:"text",class:"px-0 py-4 mx-4"}};let s;switch(!0){case e.isMappedSection:s={value:"target_section",props:{label:t.$i18n("cx-sx-content-comparator-target-selector-target-section-title",Object(en.getAutonym)(n.value.targetLanguage)),type:"text",class:"px-0 py-4 mx-4"}};break;default:s={value:"target_article",props:{label:t.$i18n("cx-sx-content-comparator-target-selector-full-article-title",Object(en.getAutonym)(n.value.targetLanguage)),type:"text",class:"px-0 py-4 mx-4"}}}return[a,s]})},Mi={name:"SxContentComparatorSourceVsTargetSelector",components:{MwButtonGroup:o.c},props:{selection:{type:String,required:!0},isMappedSection:{type:Boolean,required:!0}},emits:["update:selection"],setup(e,t){const n=e=>t.emit("update:selection",e),a=ji(e,t.root);return Object(gn.e)(()=>e.isMappedSection,()=>{a.value.map(e=>e.value).includes(e.selection)||n(a.value[0].value)}),{listSelector:a,updateSelection:n}}},Ei=(n("cd7f"),Object(u.a)(Mi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sx-content-comparator__source-target-selector"},[n("mw-button-group",{attrs:{items:e.listSelector,active:e.selection},on:{select:e.updateSelection}})],1)}),[],!1,null,null,null)).exports,Fi={name:"SxContentComparatorNewSectionPlaceholder",props:{isMappedSection:{type:Boolean,required:!0}},setup:(e,t)=>({placeholderTitle:Object(gn.a)(()=>e.isMappedSection?t.root.$i18n("cx-sx-content-comparator-present-section-placeholder-title"):t.root.$i18n("cx-sx-content-comparator-missing-section-placeholder-title"))})},Ui=(n("07c3"),Object(u.a)(Fi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"sx-content-comparator__new-section-placeholder--present mt-4 py-4 px-7"},[n("h5",{domProps:{innerHTML:e._s(e.placeholderTitle)}}),e.isMappedSection?n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-content-comparator-present-section-placeholder-subtitle",arg:"cx-sx-content-comparator-present-section-placeholder-subtitle"}]}):e._e()])}),[],!1,null,null,null)).exports;var qi=()=>{const e=Object(gn.d)([]),{currentSectionSuggestion:t,currentSourceSection:n}=ba(),s=Object(gn.a)(()=>t.value.targetTitle),i=Object(gn.a)(()=>Gt.getters["application/getCurrentSourceSectionTitle"]),o=Object(gn.a)(()=>Gt.getters["mediawiki/getPage"](t.value.targetLanguage,s.value)),r=Object(gn.a)(()=>t.value.missingSections[i.value]||t.value.presentSections[i.value]||""),c=Object(gn.a)(()=>{var e;return((null===(e=l.value)||void 0===e?void 0:e.title)||"").replace(/ /g,"_")}),l=Object(gn.a)(()=>{var e;return null===(e=o.value)||void 0===e?void 0:e.getSectionByTitle(r.value)}),u=Object(gn.a)(()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.html}),g=Object(gn.a)(()=>{var e;return null===(e=l.value)||void 0===e?void 0:e.html}),p=()=>new(a.default.extend(Ui))({props:{isMappedSection:h.value}}).$mount().$el,m=Object(gn.a)(()=>{var e;const n=document.createElement("div");n.innerHTML=null===(e=o.value)||void 0===e?void 0:e.content;const a=p(),s=(e=>Gt.getters["suggestions/getFirstAppendixTitleBySectionSuggestion"](e))(t.value);if(s){const t=Array.from(n.querySelectorAll("h2")).filter(e=>e.textContent.match(s))[0].parentNode;t.parentNode.insertBefore(a,t)}else n.appendChild(a);return n.innerHTML}),h=Object(gn.a)(()=>!Gt.getters["application/isCurrentSourceSectionMissing"]&&!e.value.includes(r.value));return{activeSectionTargetTitle:r,discardedSections:e,isCurrentSectionMapped:h,sourceSectionContent:u,sourceSectionTitle:i,targetPageContent:m,targetSectionAnchor:c,targetSectionContent:g}},Gi={name:"SxContentComparatorContentHeader",components:{SxContentComparatorSourceVsTargetSelector:Ei,MwRow:o.p,MwCol:o.e,MwButton:o.b},props:{sourceVsTargetSelection:{type:String,required:!0},isMappedSection:{type:Boolean,required:!0}},emits:["update:sourceVsTargetSelection","translation-button-clicked"],setup(e,t){const n=t.root.$store,a=Object(gn.d)(!1),{currentSectionSuggestion:s}=ba(),i=Object(gn.a)(()=>n.getters["application/getCurrentSourceSectionTitle"]),o=Object(gn.a)(()=>n.getters["application/getCurrentSourceSectionAnchor"]),{activeSectionTargetTitle:c,targetSectionAnchor:l}=qi(),u=Object(gn.a)(()=>{switch(e.sourceVsTargetSelection){case"source_section":return{title:i.value,path:`${I.getPageUrl(s.value.sourceLanguage,s.value.sourceTitle)}#${o.value}`,lang:s.value.sourceLanguage,dir:Object(en.getDir)(s.value.sourceLanguage)};case"target_article":return{title:s.value.targetTitle,path:g.value,lang:s.value.targetLanguage,dir:Object(en.getDir)(s.value.targetLanguage)};default:return{title:c.value,path:`${g.value}#${l.value}`}}}),g=Object(gn.a)(()=>I.getPageUrl(s.value.targetLanguage,s.value.targetTitle)),d=Object(gn.d)(null);return Object(gn.c)(()=>{new IntersectionObserver(([e])=>{a.value=e.intersectionRect.height<e.boundingClientRect.height},{threshold:[1]}).observe(d.value.$el)}),{activeContent:u,contentHeader:d,isSticky:a,mwIconLinkExternal:tn.w,mwIconEdit:tn.n,updateSelection:e=>t.emit("update:sourceVsTargetSelection",e)}}},Xi=(n("4550"),Object(u.a)(Gi,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-row",{ref:"contentHeader",staticClass:"sx-content-comparator__content-header ma-0 pt-1",class:{sticky:e.isSticky},attrs:{direction:"column",align:"stretch",reverse:e.isSticky}},[n("sx-content-comparator-source-vs-target-selector",{attrs:{"is-mapped-section":e.isMappedSection,selection:e.sourceVsTargetSelection},on:{"update:selection":e.updateSelection}}),n("mw-row",{staticClass:"sx-content-comparator__content-header-title mx-4 my-0 pt-4 pb-2",attrs:{justify:"between"}},[n("mw-col",[n("h3",{staticClass:"ma-0 pa-0",attrs:{lang:e.activeContent.lang,dir:e.activeContent.dir},domProps:{textContent:e._s(e.activeContent.title)}})]),n("mw-col",{attrs:{shrink:""}},[e.isSticky?n("mw-button",{attrs:{icon:e.mwIconEdit,progressive:!0,label:e.$i18n("cx-sx-content-comparator-content-header-translate-button-label")},on:{click:function(t){return e.$emit("translation-button-clicked")}}}):n("mw-button",{staticClass:"sx-content-comparator__open-content-link-button pa-0 pe-2",attrs:{icon:e.mwIconLinkExternal,type:"icon",href:e.activeContent.path,target:"_blank"}})],1)],1)],1)}),[],!1,null,null,null)).exports,Ji={name:"SxContentComparatorHeaderNavigation",components:{MwCol:o.e,MwButton:o.b},props:{sectionSourceTitles:{type:Array,required:!0}},setup(e,t){const n=t.root.$store,{sourceSectionTitle:a}=qi(),s=Object(gn.a)(()=>e.sectionSourceTitles.indexOf(a.value));return{goToNextSection:()=>{const t=(s.value+1)%e.sectionSourceTitles.length;n.dispatch("application/selectPageSectionByIndex",t)},goToPreviousSection:()=>{const t=(s.value-1+e.sectionSourceTitles.length)%e.sectionSourceTitles.length;n.dispatch("application/selectPageSectionByIndex",t)},mwIconPrevious:tn.y,mwIconArrowForward:tn.c}}},eo=Object(u.a)(Ji,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-col",{staticClass:"justify-end",attrs:{align:"center"}},[n("mw-button",{staticClass:"pa-0 pe-1",attrs:{type:"icon",icon:e.mwIconPrevious},on:{click:e.goToPreviousSection}}),n("mw-button",{staticClass:"pa-0 ps-1",attrs:{type:"icon",icon:e.mwIconArrowForward},on:{click:e.goToNextSection}})],1)}),[],!1,null,null,null).exports,so={name:"SxContentComparatorHeaderMappedSection",components:{MwRow:o.p,MwCol:o.e,MwButton:o.b},props:{suggestion:{type:ee,required:!0},targetSectionTitle:{type:String,required:!0},discardedSections:{type:Array,required:!0}},data:()=>({mwIconTrash:tn.F,mwIconUndo:tn.G}),computed:{isDiscardedSection(){return this.discardedSections.includes(this.targetSectionTitle)},mappedSectionHeaderTitle(){return this.$i18n("cx-sx-content-comparator-mapped-section-header-title",Object(en.getAutonym)(this.suggestion.targetLanguage))}},methods:{discardMapping(){this.isDiscardedSection||this.$emit("update:discardedSections",[...this.discardedSections,this.targetSectionTitle])},undoDiscard(){this.isDiscardedSection&&this.$emit("update:discardedSections",this.discardedSections.filter(e=>e!==this.targetSectionTitle))}}},co={name:"SxContentComparatorHeader",components:{SxContentComparatorHeaderMappedSection:(n("07b6"),Object(u.a)(so,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sx-content-comparator-header__mapped-section"},[n("mw-row",{staticClass:"sx-content-comparator-header__mapped-section-header pa-2 ma-0"},[n("mw-col",{attrs:{grow:""}},[n("h6",{staticClass:"sx-content-comparator-header__mapped-section-header-title pa-0 mb-1 ms-1"},[e._v(" "+e._s(e.mappedSectionHeaderTitle)+" "),e.isDiscardedSection?n("span",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-content-comparator-discarded-section-label",arg:"cx-sx-content-comparator-discarded-section-label"}]}):e._e()]),n("h6",{staticClass:"sx-content-comparator-header__mapped-section-target-title pa-0 ms-1",class:{"sx-content-comparator-header__mapped-section-target-title--discarded":e.isDiscardedSection}},[e._v(" "+e._s(e.targetSectionTitle)+" ")])]),n("mw-col",{attrs:{shrink:""}},[e.isDiscardedSection?n("mw-button",{staticClass:"pa-0",attrs:{icon:e.mwIconUndo,type:"icon"},on:{click:e.undoDiscard}}):n("mw-button",{staticClass:"pa-0",attrs:{icon:e.mwIconTrash,type:"icon"},on:{click:e.discardMapping}})],1)],1),e.isDiscardedSection?n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-content-comparator-discarded-section-clarifications",arg:"cx-sx-content-comparator-discarded-section-clarifications"}],staticClass:"sx-content-comparator-header__mapped-section-clarifications pa-3 ma-0 complementary"}):n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-content-comparator-mapped-section-clarifications",arg:"cx-sx-content-comparator-mapped-section-clarifications"}],staticClass:"sx-content-comparator-header__mapped-section-clarifications pa-3 ma-0 complementary"})],1)}),[],!1,null,null,null)).exports,SxContentComparatorHeaderNavigation:eo,MwButton:o.b,MwCol:o.e,MwRow:o.p,MwIcon:o.j},props:{discardedSections:{type:Array,required:!0}},setup(e,t){const{currentSectionSuggestion:n,currentSourceSection:a}=ba(),s=t.root.$store,i=Object(gn.a)(()=>s.getters["application/getCurrentSourceSectionTitle"]),o=Object(gn.a)(()=>s.getters["application/isCurrentSourceSectionMissing"]),r=Object(gn.a)(()=>s.getters["application/isCurrentSourceSectionPresent"]),{activeSectionTargetTitle:c}=qi(),l=Object(gn.a)(()=>{var e;return null===(e=a.value)||void 0===e?void 0:e.html}),u=Object(gn.a)(()=>[...Object.keys(n.value.missingSections),...Object.keys(n.value.presentSections)]);return{activeSectionTargetTitle:c,isCurrentSectionMissing:o,isCurrentSectionPresent:r,mwIconArrowPrevious:tn.e,mwIconEdit:tn.n,mwIconEye:tn.r,sectionSourceTitles:u,sourceSectionContent:l,sourceSectionTitle:i,suggestion:n}}},uo=(n("3ac3"),Object(u.a)(co,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"sx-content-comparator__header pa-4"},[n("mw-button",{staticClass:"py-2 pa-0",attrs:{icon:e.mwIconArrowPrevious,label:e.$i18n("cx-sx-content-comparator-back-to-sections-button-label"),type:"text",outlined:!1},on:{click:function(t){return e.$emit("close")}}}),n("mw-row",{staticClass:"my-1 py-2 mx-0"},[n("mw-col",{attrs:{grow:""}},[n("h4",{staticClass:"pa-0 sx-content-comparator-header__article-title"},[e._v(" "+e._s(e.suggestion.sourceTitle)+" ")]),n("h2",{staticClass:"sx-content-comparator-header__section-title pa-0 ma-0"},[e._v(" "+e._s(e.sourceSectionTitle)+" ")])]),n("sx-content-comparator-header-navigation",{attrs:{cols:"2","section-source-titles":e.sectionSourceTitles}}),n("mw-col",{staticClass:"py-2 mb-1",attrs:{cols:"12",sm:"12",md:"4"}},[n("mw-button",{attrs:{icon:e.mwIconEdit,progressive:!0,label:e.$i18n("cx-sx-content-comparator-translation-section-button-label"),disabled:!e.sourceSectionContent},on:{click:function(t){return e.$emit("translation-button-clicked")}}})],1)],1),e.isCurrentSectionMissing?n("mw-row",{staticClass:"sx-content-comparator-header__review-contents mx-0",attrs:{align:"start"}},[n("mw-col",{staticClass:"pe-2",attrs:{shrink:""}},[n("mw-icon",{attrs:{icon:e.mwIconEye}})],1),n("mw-col",{staticClass:"ma-0"},[n("strong",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-content-comparator-review-contents-title",arg:"cx-sx-content-comparator-review-contents-title"}]}),n("br"),n("span",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-content-comparator-review-contents-rest",arg:"cx-sx-content-comparator-review-contents-rest"}]})])],1):e._e(),e.isCurrentSectionPresent?n("sx-content-comparator-header-mapped-section",{attrs:{suggestion:e.suggestion,"target-section-title":e.activeSectionTargetTitle,"discarded-sections":e.discardedSections},on:{"update:discardedSections":function(t){return e.$emit("update:discardedSections",t)}}}):e._e()],1)}),[],!1,null,null,null)).exports,po={name:"SxContentComparator",components:{SxContentComparatorNewSectionPlaceholder:Ui,SxContentComparatorHeader:uo,SxContentComparatorContentHeader:Xi,MwSpinner:o.q},setup(e,t){const n=t.root.$store,a=t.root.$router,s=Object(gn.d)("source_section"),{activeSectionTargetTitle:r,discardedSections:c,isCurrentSectionMapped:l,sourceSectionContent:u,targetPageContent:g,targetSectionContent:d}=qi(),{currentSectionSuggestion:p,sourceLanguage:m,targetLanguage:h}=ba(),f=Object(gn.a)(()=>p.value.targetTitle);return Object(gn.e)(f,()=>n.dispatch("mediawiki/fetchPageContent",{sourceLanguage:h.value,targetLanguage:m.value,sourceTitle:f.value}),{immediate:!0}),{getDir:en.getDir,activeSectionTargetTitle:r,discardedSections:c,goToSectionSelector:()=>a.push({name:"sx-section-selector"}),isCurrentSectionMapped:l,sourceSectionContent:u,sourceVsTargetSelection:s,targetPageContent:g,targetSectionContent:d,translateSection:()=>{n.getters["translator/hasSectionTranslations"]?a.push({name:"sx-sentence-selector"}):a.push({name:"sx-quick-tutorial"})},sourceLanguage:m,targetLanguage:h}}},So={name:"SxContentComparatorView",components:{SxContentComparator:(n("5aee"),Object(u.a)(po,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"sx-content-comparator"},[n("sx-content-comparator-header",{attrs:{"discarded-sections":e.discardedSections},on:{"update:discardedSections":function(t){e.discardedSections=t},"update:discarded-sections":function(t){e.discardedSections=t},"translation-button-clicked":e.translateSection,close:e.goToSectionSelector}}),n("sx-content-comparator-content-header",{attrs:{"is-mapped-section":e.isCurrentSectionMapped,"source-vs-target-selection":e.sourceVsTargetSelection},on:{"update:sourceVsTargetSelection":function(t){e.sourceVsTargetSelection=t},"update:source-vs-target-selection":function(t){e.sourceVsTargetSelection=t},"translation-button-clicked":e.translateSection}}),n("section",{staticClass:"sx-content-comparator__source-content"},["source_section"===e.sourceVsTargetSelection?[e.sourceSectionContent?e._e():n("mw-spinner"),n("section",{staticClass:"pt-2 px-4",attrs:{lang:e.sourceLanguage,dir:e.getDir(e.sourceLanguage)},domProps:{innerHTML:e._s(e.sourceSectionContent)}})]:"target_article"===e.sourceVsTargetSelection?[e.targetPageContent?e._e():n("mw-spinner"),n("article",{staticClass:"px-4",attrs:{lang:e.targetLanguage,dir:e.getDir(e.targetLanguage)},domProps:{innerHTML:e._s(e.targetPageContent)}})]:[n("section",{staticClass:"pa-4",domProps:{innerHTML:e._s(e.targetSectionContent)}}),n("sx-content-comparator-new-section-placeholder",{attrs:{"is-mapped-section":e.isCurrentSectionMapped}})]],2)],1)}),[],!1,null,null,null)).exports},computed:{classes(){return{fullscreen:this.$mwui.breakpoint.mdAndDown}}}},xo=(n("3e4a"),Object(u.a)(So,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"sx-content-comparator-view",class:e.classes},[n("sx-content-comparator")],1)}),[],!1,null,null,null)).exports,Oo={name:"SxTranslationSelector",components:{MwCard:o.d,MwButton:o.b,MwDialog:o.f},props:{active:{type:Boolean,required:!0}},emits:["update:active"],setup(e,t){const n=M.EMPTY_TEXT_PROVIDER_KEY,a=M.ORIGINAL_TEXT_PROVIDER_KEY,s=t.root.$store,{sourceLanguage:i,targetLanguage:o,currentSourceSection:r,isSectionTitleSelected:c,selectedContentTranslationUnit:l}=ba(),u=Object(gn.a)(()=>s.getters["mediawiki/getSupportedMTProviders"](i.value,o.value)),g=Object(gn.a)(()=>{const e=[a,n];return u.value.filter(t=>!e.includes(t))}),d=Object(gn.a)(()=>c.value?r.value.proposedTitleTranslations:l.value.proposedTranslations),m=()=>t.emit("update:active",!1);return{apiMtProviders:g,close:m,emptyTextProviderKey:n,getDir:en.getDir,mwIconClose:tn.l,originalTextProviderKey:a,proposedTranslations:d,selectProvider:e=>{s.dispatch("application/updateMTProvider",e),m()},sourceLanguage:i}}},jo=(n("542a"),Object(u.a)(Oo,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.active?n("mw-dialog",{staticClass:"sx-sentence-selector__translation-options",attrs:{fullscreen:""}},[n("template",{slot:"header"},[n("div",{staticClass:"mw-ui-dialog__header pa-4"},[n("div",{staticClass:"row ma-0 py-2"},[n("div",{staticClass:"col grow items-center mw-ui-dialog__header-title justify-start pe-2"},[n("h4",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-sentence-selector-translation-options-header-title",arg:"cx-sx-sentence-selector-translation-options-header-title"}],staticClass:"mb-0"})]),n("div",{staticClass:"col shrink justify-center"},[n("mw-button",{staticClass:"pa-0",attrs:{type:"icon",icon:e.mwIconClose},on:{click:e.close}})],1)]),n("h6",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-sentence-selector-translation-options-header-text",arg:"cx-sx-sentence-selector-translation-options-header-text"}],staticClass:"pb-2 mb-0"})])]),n("mw-card",{staticClass:"sx-sentence-selector__mt-provider-option-card mx-4 pa-5",attrs:{role:"button"},nativeOn:{click:function(t){return e.selectProvider(e.originalTextProviderKey)}}},[n("template",{slot:"header"},[n("h5",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-sentence-selector-translation-options-original-card-title",arg:"cx-sx-sentence-selector-translation-options-original-card-title"}],staticClass:"sx-sentence-selector__translation-options-card-title mb-4"})]),n("p",{attrs:{dir:e.getDir(e.sourceLanguage),lang:e.sourceLanguage},domProps:{innerHTML:e._s(e.proposedTranslations[e.originalTextProviderKey])}})],2),e._l(e.apiMtProviders,(function(t){return n("mw-card",{key:t,staticClass:"sx-sentence-selector__mt-provider-option-card mx-4 pa-5",attrs:{role:"button"},nativeOn:{click:function(n){return e.selectProvider(t)}}},[n("template",{slot:"header"},[n("h5",{staticClass:"sx-sentence-selector__translation-options-card-title mb-4",domProps:{textContent:e._s(t)}})]),n("p",{domProps:{innerHTML:e._s(e.proposedTranslations[t])}})],2)})),n("mw-card",{staticClass:"sx-sentence-selector__mt-provider-option-card mx-4 pa-5",attrs:{role:"button"},nativeOn:{click:function(t){return e.selectProvider(e.emptyTextProviderKey)}}},[n("template",{slot:"header"},[n("h5",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-sentence-selector-translation-options-empty-card-title",arg:"cx-sx-sentence-selector-translation-options-empty-card-title"}],staticClass:"sx-sentence-selector__translation-options-card-title mb-4"})]),n("p",{staticClass:"sx-sentence-selector__empty-sentence-option__cursor"},[e._v("|")])],2)],2):e._e()}),[],!1,null,null,null)).exports,Eo={name:"SxSentenceSelectorContentHeader",components:{MwIcon:o.j,MwCol:o.e},setup(e,t){const n=t.root.$store,a="sx-sentence-selector__section-title",s=Object(gn.a)(()=>n.getters["application/getCurrentPage"]),{currentSectionSuggestion:i,currentSourceSection:o,isSectionTitleSelected:r}=ba(),c=Object(gn.a)(()=>{var e;return(null===(e=o.value)||void 0===e?void 0:e.title)||s.value.title}),l=Object(gn.a)(()=>I.getPageUrl(i.value.sourceLanguage,i.value.sourceTitle)),u=Object(gn.a)(()=>{var e;return!(null===(e=o.value)||void 0===e||!e.translatedTitle)}),g=Object(gn.a)(()=>u.value?"translated":"selected"),d=Object(gn.a)(()=>{const e=[a];return r.value&&e.push(`${a}--${g.value}`),e});return{mwIconLinkExternal:tn.w,selectSectionTitle:()=>n.dispatch("application/selectTranslationUnitById",0),sourceArticlePath:l,sourceSectionTitle:c,suggestion:i,titleClasses:d}}},$o=(n("d5b5"),Object(u.a)(Eo,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-col",{staticClass:"sx-sentence-selector__section-header pa-5",attrs:{shrink:""}},[n("a",{staticClass:"sx-sentence-selector__section-article-title mb-1",attrs:{href:e.sourceArticlePath,target:"_blank"}},[n("strong",{domProps:{textContent:e._s(e.suggestion.sourceTitle)}}),n("mw-icon",{staticClass:"ms-1",attrs:{icon:e.mwIconLinkExternal,size:"12"}})],1),n("h2",{staticClass:"pa-0 ma-0",class:e.titleClasses,domProps:{innerHTML:e._s(e.sourceSectionTitle)},on:{click:e.selectSectionTitle}})])}),[],!1,null,null,null)).exports,qo={name:"ProposedTranslationActionButtons",components:{MwRow:o.p,MwButton:o.b},emits:["select-previous-segment","apply-translation","skip-translation"],setup(){const{currentSourceSection:e,proposedTranslation:t,isSectionTitleSelected:n}=ba();return{isLastTranslationUnit:Object(gn.a)(()=>e.value.isSelectedTranslationUnitLast),isSectionTitleSelected:n,mwIconPrevious:tn.y,mwIconArrowForward:tn.c,proposedTranslation:t}}},Go=(n("6c2a"),Object(u.a)(qo,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-row",{staticClass:"sx-sentence-selector__translation-action-buttons ma-0"},[n("mw-button",{staticClass:"sx-sentence-selector__previous-sentence-button col shrink pa-4",attrs:{icon:e.mwIconPrevious,type:"icon",disabled:e.isSectionTitleSelected},on:{click:function(t){return e.$emit("select-previous-segment")}}}),n("mw-button",{staticClass:"sx-sentence-selector__apply-translation-button col grow pa-4",attrs:{type:"text",label:e.$i18n("cx-sx-sentence-selector-apply-translation-button-label"),disabled:!e.proposedTranslation},on:{click:function(t){return e.$emit("apply-translation")}}}),n("mw-button",{staticClass:"sx-sentence-selector__skip-translation-button col shrink pa-4",attrs:{type:"text",indicator:e.mwIconArrowForward,label:e.$i18n("cx-sx-sentence-selector-skip-translation-button-label"),disabled:e.isLastTranslationUnit},on:{click:function(t){return e.$emit("skip-translation")}}})],1)}),[],!1,null,null,null)).exports,Wo={name:"ProposedTranslationHeader",components:{MwRow:o.p,MwCol:o.e,MwButton:o.b},setup(e,t){const n=t.root.$store,a=Object(gn.a)(()=>n.state.application.currentMTProvider),s=Object(gn.a)(()=>({[M.ORIGINAL_TEXT_PROVIDER_KEY]:t.root.$i18n("cx-sx-sentence-selector-translation-options-original-card-title"),[M.EMPTY_TEXT_PROVIDER_KEY]:t.root.$i18n("cx-sx-sentence-selector-translation-options-empty-card-title")})),i=Object(gn.a)(()=>s.value[a.value]||t.root.$i18n("cx-sx-sentence-selector-suggested-translation-title",a.value));return{mwIconEllipsis:tn.o,mtOptionLabel:i}}},Ko=(n("34e5"),Object(u.a)(Wo,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-col",{staticClass:"sx-sentence-selector__proposed-translation__header pt-5 shrink"},[n("mw-row",{staticClass:"ma-0 ps-5 pb-4"},[n("mw-col",{staticClass:"sx-sentence-selector__proposed-translation__header-title pa-0 ma-0 pe-4",attrs:{tag:"h6",grow:""},domProps:{textContent:e._s(e.mtOptionLabel)}}),n("mw-col",{staticClass:"pe-5",attrs:{shrink:""}},[n("mw-button",{staticClass:"sx-sentence-selector__proposed-translation__header-settings-button pa-0",attrs:{icon:e.mwIconEllipsis,type:"icon"},on:{click:function(t){return e.$emit("configure-options")}}})],1)],1)],1)}),[],!1,null,null,null)).exports,Jo={name:"ProposedTranslationCard",components:{MwSpinner:o.q,MwCard:o.d,ProposedTranslationHeader:Ko,MwRow:o.p,MwCol:o.e,MwButton:o.b,ProposedTranslationActionButtons:Go},setup(e,t){const n=Object(gn.d)(0),{currentMTProvider:a,targetLanguage:s,proposedTranslation:i}=ba(),o=Object(gn.a)(()=>({"max-height":`calc(100% - ${n.value}px)`})),r=Object(gn.a)(()=>!!i.value||a.value===M.EMPTY_TEXT_PROVIDER_KEY),c=()=>{n.value=t.refs.header.$el.clientHeight+t.refs.footer.$el.clientHeight};return Object(gn.e)(a,c),Object(gn.c)(async()=>{await t.root.$nextTick(),c()}),{getDir:en.getDir,mwIconEllipsis:tn.o,mwIconEdit:tn.n,proposedTranslation:i,hasProposedTranslation:r,targetLanguage:s,contentsStyle:o}}},er=(n("804d"),Object(u.a)(Jo,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-card",{staticClass:"sx-sentence-selector__proposed-translation col shrink pa-0"},[n("mw-row",{staticClass:"ma-0 no-wrap fill-height",attrs:{direction:"column",align:"start"}},[n("proposed-translation-header",e._g({ref:"header"},e.$listeners)),n("mw-col",{staticClass:"sx-sentence-selector__proposed-translation__contents px-5",class:{"sx-sentence-selector__proposed-translation__contents--empty":!e.hasProposedTranslation},style:e.contentsStyle},[e.hasProposedTranslation?n("section",{attrs:{lang:e.targetLanguage,dir:e.getDir(e.targetLanguage)},domProps:{innerHTML:e._s(e.proposedTranslation)}}):n("mw-spinner")],1),n("mw-col",{ref:"footer",staticClass:"sx-sentence-selector__proposed-translation__footer",attrs:{shrink:""}},[n("mw-button",{staticClass:"sx-sentence-selector__proposed-translation-edit-button pa-5 pt-4",attrs:{icon:e.mwIconEdit,type:"text",label:e.$i18n("cx-sx-sentence-selector-edit-translation-button-label"),progressive:"",disabled:!e.hasProposedTranslation},on:{click:function(t){return e.$emit("edit-translation",e.proposedTranslation)}}}),n("proposed-translation-action-buttons",e._g({},e.$listeners))],1)],1)],1)}),[],!1,null,null,null)).exports;var sr=e=>Object(gn.a)(()=>{if(e.isBlockTemplate)return e.isTranslated?e.translatedContent:e.node.innerHTML;const t="sx-sentence-selector__section-sentence",n=e.node.cloneNode(!0);return Array.from(n.getElementsByClassName("cx-segment")).forEach(n=>{const a=e.getSentenceById(n.dataset.segmentid);n.classList.add(t,"py-1","me-1");const s=["untranslated","translated","selected"].map(e=>`${t}--${e}`);n.classList.remove(...s),a.selected&&n.classList.add(t+"--selected");const i=a.isTranslated?"translated":"untranslated";n.classList.add(`${t}--${i}`),n.innerHTML=a.content}),n.innerHTML}),or={name:"SubSection",props:{subSection:{type:He,required:!0}},setup(e,t){const n=Object(gn.d)(null),a=sr(e.subSection);Object(gn.c)(()=>{n.value.addEventListener("click",t=>{let n;e.subSection.isBlockTemplate?n=e.subSection:t.target.classList.contains("cx-segment")&&(n=e.subSection.getSentenceById(t.target.dataset.segmentid)),i(n)})});const s=t.root.$store,i=e=>{e.selected?t.emit("bounce-translation"):s.dispatch("application/selectTranslationUnitById",e.id)};return{content:a,rootClasses:Object(gn.a)(()=>({"sx-sentence-selector__subsection--block-selected":e.subSection.selected})),subSectionRoot:n}}},cr=(n("bc1b"),Object(u.a)(or,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("div",{ref:"subSectionRoot",staticClass:"sx-sentence-selector__subsection",class:e.rootClasses,domProps:{innerHTML:e._s(e.content)}})}),[],!1,null,null,null)).exports,dr={name:"BlockTemplateAdaptationCard",components:{MwSpinner:o.q,MwIcon:o.j,MwCard:o.d,MwRow:o.p,MwCol:o.e,MwButton:o.b,ProposedTranslationActionButtons:Go},emits:["edit-translation","apply-translation","skip-translation","select-previous-segment"],setup(){const{selectedContentTranslationUnit:e,targetLanguageAutonym:t,currentMTProvider:n,proposedTranslation:a}=ba(),s=Object(gn.a)(()=>{var t;return null===(t=e.value)||void 0===t?void 0:t.getTargetBlockTemplateNameByProvider(n.value)}),i=Object(gn.a)(()=>"string"==typeof a.value&&"string"==typeof s.value),o=Object(gn.a)(()=>{var t;return null===(t=e.value)||void 0===t?void 0:t.sourceBlockTemplateName});return{mwIconCheck:tn.k,mwIconPuzzle:tn.z,proposedBlockTranslation:a,sourceTemplateName:o,targetLanguageAutonym:t,targetTemplateName:s,translationLoaded:i}}},mr=(n("e210"),Object(u.a)(dr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-card",{staticClass:"block-template-adaptation-card col shrink pa-0 ma-0"},[n("div",{staticClass:"block-template-adaptation-card__container pa-4"},[n("mw-row",{staticClass:"block-template-adaptation-card__header ma-0 pb-5"},[n("mw-col",{attrs:{shrink:""}},[n("mw-icon",{staticClass:"me-2",attrs:{icon:e.mwIconPuzzle}})],1),n("mw-col",{staticClass:"ma-0",attrs:{tag:"h5"},domProps:{textContent:e._s(e.sourceTemplateName)}})],1),e.targetTemplateName?n("div",{staticClass:"block-template-adaptation-card__body--success pa-4 mb-4"},[n("mw-row",{staticClass:"block-template-adaptation-card__body__header ma-0 pb-1"},[n("mw-col",{directives:[{name:"i18n",rawName:"v-i18n:sx-block-template-adaptation-card-body-header-success",arg:"sx-block-template-adaptation-card-body-header-success"}],attrs:{tag:"h5"}}),n("mw-col",{attrs:{shrink:""}},[n("mw-icon",{attrs:{icon:e.mwIconCheck}})],1)],1),n("h5",{staticClass:"block-template-adaptation-card__body__template-title pb-2",domProps:{textContent:e._s(e.targetTemplateName)}}),n("mw-button",{staticClass:"px-0",attrs:{type:"text",progressive:""},on:{click:function(t){return e.$emit("edit-translation",e.proposedBlockTranslation)}}},[n("span",{directives:[{name:"i18n",rawName:"v-i18n:sx-block-template-adaptation-card-edit-button-label",arg:"sx-block-template-adaptation-card-edit-button-label"}]})])],1):e.translationLoaded?n("div",{staticClass:"block-template-adaptation-card__body--failure pa-4 mb-4"},[n("h5",{directives:[{name:"i18n",rawName:"v-i18n:sx-block-template-adaptation-card-body-header-failure",value:[e.targetLanguageAutonym],expression:"[\n          targetLanguageAutonym\n        ]",arg:"sx-block-template-adaptation-card-body-header-failure"}],staticClass:"block-template-adaptation-card__body__header pb-0 mb-0"})]):n("mw-spinner")],1),n("proposed-translation-action-buttons",e._g({},e.$listeners))],1)}),[],!1,null,null,null)).exports,xr={name:"TranslatedSegmentCardHeader",components:{MwButtonGroup:o.c},props:{selection:{type:String,required:!0,validator:e=>["sentence","paragraph"].includes(e)}},setup(e,t){const{isSectionTitleSelected:n}=ba();return{scopeOptions:Object(gn.a)(()=>[{value:"sentence",props:{label:t.root.$i18n("cx-sx-sentence-selector-translated-segment-sentence-option"),type:"text",class:"px-0 py-4 mx-4"}},{value:"paragraph",props:{label:t.root.$i18n("cx-sx-sentence-selector-translated-segment-paragraph-option"),type:"text",class:"px-0 py-4 mx-4",disabled:n.value}}]),updateSelection:e=>t.emit("update:selection",e)}}},Cr=(n("4afe"),Object(u.a)(xr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"translated-segment-card-header"},[n("mw-button-group",{attrs:{items:e.scopeOptions,active:e.selection},on:{select:e.updateSelection}})],1)}),[],!1,null,null,null)).exports,Lr={name:"TranslatedSegmentCardActionButtons",components:{MwRow:o.p,MwButton:o.b},emits:["select-previous-segment","skip-translation"],setup(){const{currentSourceSection:e,isSectionTitleSelected:t}=ba(),n=Object(gn.a)(()=>e.value.isSelectedTranslationUnitLast);return{mwIconArrowForward:tn.c,mwIconPrevious:tn.y,isLastTranslationUnit:n,isSectionTitleSelected:t}}},jr={name:"TranslatedSegmentCard",components:{TranslatedSegmentCardActionButtons:Object(u.a)(Lr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-row",{staticClass:"sx-sentence-selector__translation-action-buttons ma-0"},[n("mw-button",{staticClass:"sx-sentence-selector__previous-sentence-button col pa-4",attrs:{icon:e.mwIconPrevious,type:"icon",disabled:e.isSectionTitleSelected},on:{click:function(t){return e.$emit("select-previous-segment")}}}),n("mw-button",{staticClass:"sx-sentence-selector__skip-translation-button col pa-4 items-start",attrs:{type:"icon",icon:e.mwIconArrowForward,disabled:e.isLastTranslationUnit},on:{click:function(t){return e.$emit("skip-translation")}}})],1)}),[],!1,null,null,null).exports,MwProgressBar:o.m,MwIcon:o.j,TranslatedSegmentCardHeader:Cr,MwCard:o.d,MwRow:o.p,MwCol:o.e,MwButton:o.b},emits:["edit-translation"],setup(e,t){const n=Object(gn.d)("sentence"),{currentMTProvider:a,isSectionTitleSelected:s,currentSourceSection:i,selectedContentTranslationUnit:o,proposedTranslation:r}=ba(),c=Object(gn.a)(()=>"sentence"===n.value),l=Object(gn.a)(()=>i.value.subSections.find(e=>e.sentences.some(e=>e.id===o.value.id))),u=Object(gn.a)(()=>c.value?r.value:l.value.getProposedTranslation(a.value)),g=t.root.$mwui.colors.base80,d=t.root.$mwui.colors.red50,p=Object(gn.a)(()=>s.value?i.value.translatedTitle:c.value?o.value.translatedContent:l.value.translatedContent),m=Object(gn.a)(()=>O_calculateScore(p.value,u.value)),h=Object(gn.a)(()=>O_getScoreStatus(m.value)),f=Object(gn.a)(()=>"translated-segment-card__modification-stats__percentage--"+h.value),v=Object(gn.a)(()=>({failure:0===m.value?null:t.root.$mwui.colors.yellow30,warning:t.root.$mwui.colors.yellow30,success:t.root.$mwui.colors.green30})),S=Object(gn.a)(()=>v.value[h.value]);return{errorColor:d,modificationPercentageClass:f,mtScore:m,mwIconEdit:tn.n,mwIconEllipsis:tn.o,mwIconRobot:tn.B,mwIconUserAvatar:tn.H,progressBarBackgroundColor:g,scopeSelection:n,showSentenceTab:c,translation:p,userIconColor:S}}},Er={name:"SxSentenceSelector",components:{BlockTemplateAdaptationCard:mr,TranslatedSegmentCard:(n("391f"),Object(u.a)(jr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-card",{staticClass:"translated-segment-card col shrink pa-0 mb-0"},[n("mw-row",{staticClass:"ma-0 no-wrap fill-height",attrs:{direction:"column",align:"start"}},[n("translated-segment-card-header",{attrs:{selection:e.scopeSelection},on:{"update:selection":function(t){e.scopeSelection=t}}}),n("mw-col",{staticClass:"translated-segment-card__body pa-5",attrs:{tag:"section"}},[n("mw-row",{staticClass:"ma-0"},[n("mw-col",{staticClass:"translated-segment-card__modification-stats",attrs:{grow:""}},[n("h5",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-sentence-selector-translated-segment-modification-percentage-header",arg:"cx-sx-sentence-selector-translated-segment-modification-percentage-header"}]}),0===e.mtScore?n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-sentence-selector-translated-segment-no-edits-label",arg:"cx-sx-sentence-selector-translated-segment-no-edits-label"}],style:{color:e.errorColor}}):n("p",{directives:[{name:"i18n-html",rawName:"v-i18n-html:cx-sx-sentence-selector-translated-segment-modification-percentage",value:[e.mtScore],expression:"[\n              mtScore\n            ]",arg:"cx-sx-sentence-selector-translated-segment-modification-percentage"}],class:e.modificationPercentageClass})]),n("mw-col",{staticClass:"translated-segment-card__animated-stats",attrs:{shrink:""}},[n("mw-row",{staticClass:"ma-0 ms-2"},[n("mw-col",{attrs:{shrink:"",align:"center"}},[n("mw-icon",{attrs:{icon:e.mwIconUserAvatar,"icon-color":e.userIconColor}})],1),n("mw-col",{staticClass:"px-3",attrs:{shrink:""}},[n("mw-progress-bar",{attrs:{value:e.mtScore,height:"4px",width:"64px",color:e.userIconColor,background:e.progressBarBackgroundColor}})],1),n("mw-col",{attrs:{shrink:""}},[n("mw-icon",{attrs:{icon:e.mwIconRobot}})],1)],1)],1)],1),e.showSentenceTab?n("mw-button",{staticClass:"sx-sentence-selector__proposed-translation-edit-button pa-0 mt-4",attrs:{icon:e.mwIconEdit,type:"text",label:e.$i18n("cx-sx-sentence-selector-edit-translation-button-label"),progressive:""},on:{click:function(t){return e.$emit("edit-translation",e.translation)}}}):e._e()],1),n("mw-col",{staticClass:"translated-segment-card__actions"},[n("translated-segment-card-action-buttons",e._g({},e.$listeners))],1)],1)],1)}),[],!1,null,null,null)).exports,ProposedTranslationCard:er,SubSection:cr,SxSentenceSelectorContentHeader:$o,MwRow:o.p,MwCol:o.e,SxTranslationSelector:jo,MwButton:o.b},setup(e,t){const n=Object(gn.d)(!1),a=Object(gn.d)(!1),s=Object(gn.d)("100%"),i=t.root.$store,{currentSectionSuggestion:o,currentSourceSection:r,selectedContentTranslationUnit:c}=ba(),l=Object(gn.a)(()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.isSelectedTranslationUnitTranslated}),u=Object(gn.a)(()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.subSections}),g=Object(gn.a)(()=>{var e;return null===(e=r.value)||void 0===e?void 0:e.selectedTranslationUnitOriginalContent}),d=Object(gn.a)(()=>isNaN(s.value)?s.value:s.value+"px");Object(gn.c)(async()=>{i.commit("application/clearPublishFeedbackMessages"),await i.dispatch("application/initializeMTProviders"),c.value||i.dispatch("application/selectTranslationUnitById",0),s.value=window.innerHeight});const v=t.root.$router;Object(gn.e)(c,()=>{if(!c.value)return;const e=c.value.id,t=C.value?document.getElementById(e):document.querySelector(`[data-segmentid='${e}']`);Array.from(t.getClientRects()).every(e=>document.elementFromPoint(e.x,e.y)===t)||t.scrollIntoView({behavior:"smooth",block:"center",inline:"nearest"})});const C=Object(gn.a)(()=>c.value instanceof He);return{applyTranslation:()=>i.dispatch("application/applyProposedTranslationToSelectedTranslationUnit"),bounceTranslation:()=>{a.value=!0,setTimeout(()=>{a.value=!1},100)},configureTranslationOptions:()=>{C.value||(n.value=!0,i.dispatch("application/translateSelectedTranslationUnitForAllProviders"))},currentPageSection:r,editTranslation:e=>v.push({name:"sx-editor",params:{content:e,sourceLanguage:o.value.sourceLanguage,targetLanguage:o.value.targetLanguage,originalContent:g.value,title:o.value.targetTitle||o.value.sourceTitle}}),getDir:en.getDir,goToContentComparator:()=>v.push({name:"sx-content-comparator"}),isBlockTemplateSelected:C,isSelectedTranslationUnitTranslated:l,isTranslationOptionsActive:n,mwIconArrowPrevious:tn.e,previewTranslation:()=>v.push({name:"sx-publisher"}),selectPreviousTranslationUnit:()=>i.dispatch("application/selectPreviousTranslationUnit"),sentenceSelectorStyle:d,shouldProposedTranslationBounce:a,skipTranslation:()=>i.dispatch("application/selectNextTranslationUnit"),sourceLanguage:o.value.sourceLanguage,subSections:u}}},Rr={name:"SxSentenceSelectorView",components:{SxSentenceSelector:(n("83f9"),Object(u.a)(Er,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"sx-sentence-selector fill-height column ma-0 no-wrap",style:e.sentenceSelectorStyle},[n("mw-row",{staticClass:"sx-sentence-selector__header ma-0 py-2"},[n("mw-col",{attrs:{shrink:""}},[n("mw-button",{staticClass:"px-3",attrs:{type:"icon",icon:e.mwIconArrowPrevious},on:{click:e.goToContentComparator}})],1),n("mw-col",{staticClass:"px-1",attrs:{grow:""}},[n("h4",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-sentence-selector-header-title",arg:"cx-sx-sentence-selector-header-title"}],staticClass:"sx-sentence-selector__header-title"})]),n("mw-col",{staticClass:"px-3",attrs:{shrink:""}},[n("mw-button",{attrs:{label:e.$i18n("cx-sx-sentence-selector-done-button-label"),disabled:!e.currentPageSection.isTranslated},on:{click:e.previewTranslation}})],1)],1),n("mw-row",{staticClass:"sx-sentence-selector__body fill-height ma-0",attrs:{tag:"section",direction:"column",align:"start",justify:"between"}},[n("mw-col",{staticClass:"sx-sentence-selector__section",attrs:{dir:e.getDir(e.sourceLanguage),lang:e.sourceLanguage}},[n("sx-sentence-selector-content-header"),n("div",{staticClass:"sx-sentence-selector__section-contents px-4"},e._l(e.subSections,(function(t){return n("sub-section",{key:"sub-section-"+t.id,attrs:{id:t.id,"sub-section":t},on:{"bounce-translation":e.bounceTranslation}})})),1)],1),!e.isBlockTemplateSelected&&e.isSelectedTranslationUnitTranslated?n("translated-segment-card",{on:{"edit-translation":e.editTranslation,"skip-translation":e.skipTranslation,"select-previous-segment":e.selectPreviousTranslationUnit}}):e.isBlockTemplateSelected?n("block-template-adaptation-card",{on:{"edit-translation":e.editTranslation,"apply-translation":e.applyTranslation,"skip-translation":e.skipTranslation,"select-previous-segment":e.selectPreviousTranslationUnit}}):n("proposed-translation-card",{class:{"mb-0":!e.shouldProposedTranslationBounce},on:{"configure-options":e.configureTranslationOptions,"edit-translation":e.editTranslation,"apply-translation":e.applyTranslation,"skip-translation":e.skipTranslation,"select-previous-segment":e.selectPreviousTranslationUnit}})],1),n("sx-translation-selector",{attrs:{active:e.isTranslationOptionsActive},on:{"update:active":function(t){e.isTranslationOptionsActive=t}}})],1)}),[],!1,null,null,null)).exports},computed:{classes(){return{fullscreen:this.$mwui.breakpoint.mdAndDown}}}},Dr=(n("f767"),Object(u.a)(Rr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"sx-sentence-selector-view",class:e.classes},[n("sx-sentence-selector")],1)}),[],!1,null,null,null)).exports,zr={name:"SxQuickTutorial",components:{MwButton:o.b,MwRow:o.p},data:()=>({mwIconArrowForward:tn.c,totalSteps:2,activeStep:1,tutorialSvgMT:n("e1b0"),tutorialSvgSections:n("c69b")}),methods:{goToNextStep(){this.activeStep<this.totalSteps&&this.activeStep++},isActiveStep(e){return e===this.activeStep},completeTutorial(){this.$router.push({name:"sx-sentence-selector"})}}},Jr={name:"SxContentComparatorView",components:{SxQuickTutorial:(n("7fc4"),Object(u.a)(zr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"sx-quick-tutorial"},[n("mw-row",{staticClass:"sx-quick-tutorial__body-container ma-0",attrs:{direction:"column"}},[n("section",{staticClass:"sx-quick-tutorial__main-point py-9 px-6"},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isActiveStep(1)?n("h2",{directives:[{name:"i18n",rawName:"v-i18n:sx-quick-tutorial-main-point-step-1",arg:"sx-quick-tutorial-main-point-step-1"}],key:"main-point-1",staticClass:"ma-0 pa-0"}):e._e(),e.isActiveStep(2)?n("h2",{directives:[{name:"i18n",rawName:"v-i18n:sx-quick-tutorial-main-point-step-2",arg:"sx-quick-tutorial-main-point-step-2"}],key:"main-point-2",staticClass:"ma-0 pa-0"}):e._e()])],1),n("section",{staticClass:"sx-quick-tutorial__illustration"},[n("transition",{attrs:{name:"mw-ui-animation-slide-left"}},[e.isActiveStep(1)?n("div",{key:"illustration-1",domProps:{innerHTML:e._s(e.tutorialSvgSections)}}):e._e(),e.isActiveStep(2)?n("div",{key:"illustration-2",domProps:{innerHTML:e._s(e.tutorialSvgMT)}}):e._e()])],1),n("div",{staticClass:"sx-quick-tutorial__step-indicator py-3"},e._l(e.totalSteps,(function(t){return n("span",{key:"dot-"+t,staticClass:"dot mx-1",class:{"dot-active":e.isActiveStep(t)},attrs:{role:"button"},on:{click:function(n){e.activeStep=t}}})})),0),n("section",{staticClass:"sx-quick-tutorial__secondary-point py-4 px-6"},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isActiveStep(1)?n("h3",{directives:[{name:"i18n",rawName:"v-i18n:sx-quick-tutorial-secondary-point-step-1",arg:"sx-quick-tutorial-secondary-point-step-1"}],key:"secondary-point-1",staticClass:"ma-0"}):e._e(),e.isActiveStep(2)?n("h3",{directives:[{name:"i18n",rawName:"v-i18n:sx-quick-tutorial-secondary-point-step-2",arg:"sx-quick-tutorial-secondary-point-step-2"}],key:"secondary-point-2",staticClass:"ma-0"}):e._e()])],1),n("div",{staticClass:"sx-quick-tutorial__action-button pt-4 pb-6"},[n("transition",{attrs:{name:"fade",mode:"out-in"}},[e.isActiveStep(1)?n("mw-button",{key:"quick-tutorial-action-button-1",staticClass:"px-8 mx-4",attrs:{icon:e.mwIconArrowForward,progressive:!0},on:{click:e.goToNextStep}}):e._e(),e.isActiveStep(2)?n("mw-button",{key:"quick-tutorial-action-button-2",staticClass:"mx-4",attrs:{label:e.$i18n("sx-quick-tutorial-translate-button-label"),progressive:!0},on:{click:e.completeTutorial}}):e._e()],1)],1)])],1)}),[],!1,null,null,null)).exports},computed:{classes(){return{fullscreen:this.$mwui.breakpoint.mdAndDown}}}},ec=(n("c5a8"),Object(u.a)(Jr,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"sx-quick-tutorial-view",class:e.classes},[n("sx-quick-tutorial")],1)}),[],!1,null,null,null)).exports,cc={name:"SxEditorOriginalContent",components:{MwExpandableContent:o.h},props:{originalContent:{type:String,required:!0},language:{type:String,required:!0},dir:{type:String,required:!0}},setup(){const e=Object(gn.d)(null),t=Object(gn.d)(0);return Object(gn.c)(()=>{t.value=2*parseFloat(document.defaultView.getComputedStyle(e.value,null).getPropertyValue("line-height"))}),{originalContentRef:e,twoLinesHeight:t}}},uc=(n("99a9"),Object(u.a)(cc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"px-4 pt-3 pb-2 sx-editor__original-content-panel"},[n("h5",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-editor-original-panel-label",arg:"cx-sx-editor-original-panel-label"}],staticClass:"sx-editor__original-content-panel__header mb-2"}),n("mw-expandable-content",{attrs:{"min-height":e.twoLinesHeight,scroll:""}},[n("div",{ref:"originalContentRef",staticClass:"sx-editor__original-content-panel__body",attrs:{lang:e.language,dir:e.dir},domProps:{innerHTML:e._s(e.originalContent)}})])],1)}),[],!1,null,null,null)).exports,mc={name:"EditCompleteFeedback",props:{showFeedback:{type:Boolean,required:!0},editedTranslation:{type:String,default:null}},setup(e,t){const s=t.root.$route.params.content,i=Object(gn.a)(()=>O_calculateScore(e.editedTranslation,s)),o=Object(gn.a)(()=>{const e=O_getScoreStatus(i.value);return"failure"===e?0===i.value?"failure":"warning":e}),r=Object(gn.a)(()=>"sx-editor__feedback-overlay-content__stats--"+o.value);return{happyRobotSVG:n("0606"),modificationPercentageClass:r,mtScore:i}}},Sc={name:"SxEditor",components:{EditCompleteFeedback:(n("268c"),Object(u.a)(mc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.showFeedback?n("div",{staticClass:"sx-editor__feedback-overlay fill-height"},[n("div",{staticClass:"sx-editor__feedback-overlay-content px-4"},[n("div",{staticClass:"sx-editor__feedback-overlay-content__happy-robot mb-4",domProps:{innerHTML:e._s(e.happyRobotSVG)}}),n("h2",{directives:[{name:"i18n",rawName:"v-i18n:sx-editor-feedback-overlay-title",arg:"sx-editor-feedback-overlay-title"}],staticClass:"sx-editor__feedback-overlay-content__title"}),n("p",{directives:[{name:"i18n",rawName:"v-i18n:sx-editor-feedback-overlay-clarification",arg:"sx-editor-feedback-overlay-clarification"}],staticClass:"sx-editor__feedback-overlay-content__clarification mb-1"}),n("p",{directives:[{name:"i18n-html",rawName:"v-i18n-html:sx-editor-feedback-overlay-stats",value:[e.mtScore],expression:"[mtScore]",arg:"sx-editor-feedback-overlay-stats"}],staticClass:"sx-editor__feedback-overlay-content__stats",class:e.modificationPercentageClass})])]):e._e()}),[],!1,null,null,null)).exports,MwRow:o.p,SxEditorOriginalContent:uc,VisualEditor:bs,MwSpinner:o.q},props:{fromRoute:{type:String,required:!0}},setup(e,t){const n=Object(gn.d)(!1),a=t.root.$router,s=t.root.$route,i=t.root.$store,c=!!s.params.isFinalEdit,l=s.params.content,u=s.params.originalContent,g=Object(gn.d)(null),d=Object(gn.d)(!1);return{closeEditor:()=>a.replace({name:e.fromRoute}),content:l,editedTranslation:g,editorReady:n,getDir:en.getDir,sourceLanguage:s.params.sourceLanguage,targetLanguage:s.params.targetLanguage,onEditorReady:()=>n.value=!0,onEditCompleted:async t=>{g.value=t,d.value=!0,await new Promise(e=>setTimeout(e,2e3)),d.value=!1,c?(i.commit("application/setCurrentSourceSectionEditedTranslation",t),a.replace({name:"sx-publisher"})):(i.dispatch("application/applyEditedTranslationToSelectedTranslationUnit",t),a.replace({name:e.fromRoute}))},originalContent:u,showFeedback:d,title:s.params.title}}},Tc={name:"SxContentComparatorView",components:{SxEditor:(n("15a9"),Object(u.a)(Sc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-row",{staticClass:"sx-editor ma-0 no-wrap",attrs:{tag:"section",direction:"column",align:"normal"}},[e.originalContent?n("sx-editor-original-content",{attrs:{language:e.sourceLanguage,dir:e.getDir(e.sourceLanguage),"original-content":e.originalContent}}):e._e(),e.editorReady?e._e():n("mw-spinner"),n("div",{staticClass:"sx-editor__editing-surface-container grow"},[n("edit-complete-feedback",{attrs:{"edited-translation":e.editedTranslation,"show-feedback":e.showFeedback}}),n("visual-editor",{attrs:{content:e.content,language:e.targetLanguage,dir:e.getDir(e.targetLanguage),title:e.title},on:{ready:e.onEditorReady,close:e.closeEditor,"edit-completed":e.onEditCompleted}})],1)],1)}),[],!1,null,null,null)).exports},beforeRouteEnter(e,t,n){n(e=>{e.fromRoute=t.name})},data:()=>({fromRoute:""}),computed:{classes:e=>({fullscreen:e.$mwui.breakpoint.mdAndDown})}},_c=(n("a50d"),Object(u.a)(Tc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"sx-editor-view",class:e.classes},[n("sx-editor",{attrs:{"from-route":e.fromRoute}})],1)}),[],!1,null,null,null)).exports,Ic={name:"SxPublisherHeader",components:{MwCol:o.e,MwButton:o.b,MwRow:o.p},emits:["publish-translation"],setup:(e,t)=>({isPublishingDisabled:Object(gn.a)(()=>t.root.$store.getters["application/isPublishingDisabled"]),mwIconCheck:tn.k,mwIconClose:tn.l,onClose:()=>{t.root.$router.push({name:"sx-sentence-selector"})}})},Bc=(n("1c5b"),Object(u.a)(Ic,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-row",{staticClass:"ma-0 sx-publisher__header"},[n("mw-col",{attrs:{shrink:""}},[n("mw-button",{attrs:{icon:e.mwIconClose,type:"icon",outlined:!1},on:{click:e.onClose}})],1),n("mw-col",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-publisher-header-title",arg:"cx-sx-publisher-header-title"}],staticClass:"ma-0",attrs:{grow:"",tag:"h5"}}),n("mw-col",{attrs:{shrink:""}},[n("mw-button",{attrs:{progressive:"",type:"button",icon:e.mwIconCheck,disabled:e.isPublishingDisabled},on:{click:function(t){return e.$emit("publish-translation")}}})],1)],1)}),[],!1,null,null,null)).exports,Rc={name:"SxPublisherAnimationDialog",components:{MwDialog:o.f,MwRow:o.p,MwCol:o.e},props:{active:{type:Boolean,required:!0},status:{type:String,required:!0,validator:e=>["pending","success","failure","warning"].includes(e)}},data:e=>({animations:{pending:{svg:"publishing-launching.svg",title:e.$i18n("cx-sx-publisher-animation-publishing-indicator-title"),subtitle:e.$i18n("cx-sx-publisher-animation-publishing-indicator-subtitle")},success:{svg:"publishing-success.svg",title:e.$i18n("cx-sx-publisher-animation-success-message-title"),subtitle:e.$i18n("cx-sx-publisher-animation-success-message-subtitle")},failure:{svg:"publishing-failure.svg",title:e.$i18n("cx-sx-publisher-animation-failure-message-title"),subtitle:e.$i18n("cx-sx-publisher-animation-failure-message-subtitle")},warning:{svg:"publishing-failure.svg",title:e.$i18n("cx-sx-publisher-animation-failure-message-title"),subtitle:e.$i18n("cx-sx-publisher-animation-failure-message-subtitle")}}}),computed:{animationSvg:e=>n("4b31")("./"+e.animations[e.status].svg),animationTitle:e=>e.animations[e.status].title,animationSubtitle:e=>e.animations[e.status].subtitle}},Dc=(n("9866"),Object(u.a)(Rc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.active?n("mw-dialog",{staticClass:"sx-publisher__publish-animation",attrs:{"overlay-opacity":.85,header:!1}},[n("mw-row",{staticClass:"ma-4"},[n("mw-col",[n("div",{staticClass:"sx-publisher__publish-animation-icon mb-4",domProps:{innerHTML:e._s(e.animationSvg)}}),n("h2",{domProps:{textContent:e._s(e.animationTitle)}}),n("p",{staticClass:"ma-0",domProps:{textContent:e._s(e.animationSubtitle)}})])],1)],1):e._e()}),[],!1,null,null,null)).exports,Vc={name:"SxPublishOptionSelector",components:{MwButton:o.b,MwRadioGroup:o.o,MwRadio:o.n,MwDivider:o.g,MwDialog:o.f},props:{active:{type:Boolean,required:!0}},data:()=>({mwIconArrowPrevious:tn.e}),computed:{...Object(r.b)({selectedOption:e=>e.application.publishTarget,isAnon:e=>e.translator.isAnon}),publishOptions:e=>[{label:e.$i18n("cx-sx-publisher-new-section-option-label"),details:e.$i18n("cx-sx-publisher-new-section-option-details"),value:"NEW_SECTION",disabled:!1},{label:e.$i18n("cx-sx-publisher-sandbox-option-label"),details:e.$i18n("cx-sx-publisher-sandbox-option-details"),value:"SANDBOX_SECTION",disabled:e.isAnon}],overlayColor:e=>e.$mwui.colors.base10},methods:{optionMarginBottom(e){return e===this.publishOptions.length-1?"mb-1":"mb-4"},onPublishOptionsClose(){this.$emit("update:active",!1)},updateOption(e){this.$store.commit("application/setPublishTarget",e),this.onPublishOptionsClose()}}},zc=(n("250e"),Object(u.a)(Vc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-dialog",{staticClass:"sx-publisher__publish-options",attrs:{value:e.active,title:e.$i18n("cx-sx-publisher-preview-options-title"),"overlay-opacity":.7,"overlay-color":e.overlayColor},on:{input:function(t){return e.$emit("update:active",t)},close:e.onPublishOptionsClose},scopedSlots:e._u([{key:"header",fn:function(){return[n("div",{staticClass:"mw-ui-dialog__header"},[n("div",{staticClass:"row ma-0 pa-4"},[n("div",{staticClass:"col shrink justify-center"},[n("mw-button",{staticClass:"pa-0",attrs:{type:"icon",icon:e.mwIconArrowPrevious},on:{click:e.onPublishOptionsClose}})],1),n("div",{staticClass:"col grow items-center mw-ui-dialog__header-title justify-start ps-2"},[n("h4",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-publisher-preview-options-title",arg:"cx-sx-publisher-preview-options-title"}],staticClass:"mb-0"})])]),n("mw-divider")],1)]},proxy:!0}])},[n("div",{staticClass:"pa-4"},[n("mw-radio-group",{attrs:{value:e.selectedOption,name:"publish-options"},on:{input:e.updateOption}},[e._l(e.publishOptions,(function(t){return[n("mw-radio",{key:t.label+"-label",staticClass:"pa-0 my-1",attrs:{label:t.label,"input-value":t.value,disabled:t.disabled}}),n("p",{key:t.label+"-details",staticClass:"complementary ms-7 mt-0 mb-4",class:e.optionMarginBottom,domProps:{textContent:e._s(t.details)}})]}))],2)],1)])}),[],!1,null,null,null)).exports,Kc=n("b7c1"),Jc={name:"SxPublisherReviewInfo",components:{MwButton:o.b,MwCol:Kc.e,MwRow:Kc.p,MwMessage:o.l,MwIcon:o.j},setup(e,t){const n=t.root.$store,a=Object(gn.d)(0),s=Object(gn.a)(()=>n.state.application.publishFeedbackMessages),i=Object(gn.a)(()=>{var e;return null===(e=s.value)||void 0===e?void 0:e[a.value]}),o=Object(gn.a)(()=>{var e;return(null===(e=i.value)||void 0===e?void 0:e.status)||"default"}),r=Object(gn.a)(()=>{switch(o.value){case"warning":return tn.b;case"error":return tn.h;default:return tn.r}}),c=Object(gn.a)(()=>"default"===o.value),l=Object(gn.a)(()=>c.value?"notice":o.value),u=Object(gn.a)(()=>"sx-publisher__review-info--"+l.value),g=Object(gn.a)(()=>{var e;return null===(e=i.value)||void 0===e?void 0:e.text}),d=Object(gn.a)(()=>{var e;return(null===(e=i.value)||void 0===e?void 0:e.title)||t.root.$i18n("cx-sx-publisher-review-info-error")});return{goToNextMessage:()=>{a.value=(a.value+1)%s.value.length},goToPreviousMessage:()=>{const e=s.value.length;a.value=(a.value-1+e)%e},isMessageInline:c,messageText:g,messageTitle:d,messageType:l,mwIconAlert:tn.b,mwIconArrowForward:tn.c,mwIconBlock:tn.h,mwIconEye:tn.r,mwIconPrevious:tn.y,reviewIcon:r,reviewInfoClass:u,publishFeedbackMessages:s,status:o}}},el=(n("92fe"),Object(u.a)(Jc,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-message",{staticClass:"sx-publisher__review-info ma-0 pa-4",class:e.reviewInfoClass,attrs:{type:e.messageType,inline:e.isMessageInline}},[n("template",{slot:"icon"},[n("mw-icon",{staticClass:"col shrink mw-ui-message__icon pe-3 items-start",attrs:{icon:e.reviewIcon}})],1),n("div",{staticClass:"sx-publisher__review-info__content"},["default"===e.status?[n("p",{directives:[{name:"i18n-html",rawName:"v-i18n-html:cx-sx-publisher-review-info",arg:"cx-sx-publisher-review-info"}],staticClass:"complementary ma-0"})]:[n("h5",{domProps:{textContent:e._s(e.messageTitle)}}),n("p",{domProps:{textContent:e._s(e.messageText)}}),n("mw-row",{staticClass:"ma-0",attrs:{justify:"between"}},[n("mw-col",[n("a",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-publisher-review-info-learn-more",arg:"cx-sx-publisher-review-info-learn-more"}],staticClass:"sx-publisher__review-info__learn-more-anchor",attrs:{href:"#"}})]),e.publishFeedbackMessages.length>1?n("mw-col",{staticClass:"sx-publisher__review-info__navigation-buttons justify-end",attrs:{align:"center"}},[n("mw-button",{staticClass:"pa-0 pe-1",attrs:{type:"icon",icon:e.mwIconPrevious},on:{click:e.goToPreviousMessage}}),n("mw-button",{staticClass:"pa-0 ps-1",attrs:{type:"icon",icon:e.mwIconArrowForward},on:{click:e.goToNextMessage}})],1):e._e()],1)]],2)],2)}),[],!1,null,null,null)).exports;const tl=e=>{const t=document.createElement("div");return t.innerHTML=e,t.innerText};var sl=()=>{const e=Object(gn.d)(!1),t=Object(gn.d)("pending"),n=Object(gn.d)(!1);return{configureTranslationOptions:()=>n.value=!0,doPublish:async()=>{t.value="pending",e.value=!0,await Gt.dispatch("translator/publishTranslation");const n=Gt.getters["application/isPublishingDisabled"];t.value=n?"failure":"success",setTimeout(()=>{(async e=>{const{currentSectionSuggestion:t,currentSourceSection:n}=ba(),a=null==n?void 0:n.value.title;if(Gt.getters["application/isPublishingDisabled"])return void(e.value=!1);const i=Gt.getters["application/isSandboxTarget"];if(n.value.isLeadSection&&!i)try{await lt.addWikibaseLink(t.value.sourceLanguage,t.value.targetLanguage,t.value.sourceTitle,a)}catch(r){mw.log.error("Error while adding wikibase link",r)}const o=Gt.getters["translator/getArticleTitleForPublishing"];Gt.commit("application/setTranslationInProgress",!1),window.location.href=E(""+o,{"sx-published-section":tl(a),"sx-source-page-title":tl(t.value.sourceTitle),"sx-source-language":t.value.sourceLanguage,"sx-target-language":t.value.targetLanguage})})(e)},1e3)},isPublishDialogActive:e,publishOptionsOn:n,publishStatus:t}},ol={name:"SxPublisher",components:{SxPublisherReviewInfo:el,SxPublishOptionSelector:zc,SxPublisherAnimationDialog:Dc,MwButton:o.b,SxPublisherHeader:Bc,MwRow:o.p,MwCol:o.e},setup(e,t){const{currentSourceSection:n,currentSectionSuggestion:a}=ba(),s=t.root.$store,i=Object(gn.a)(()=>s.getters["application/isSandboxTarget"]),o=Object(gn.a)(()=>{var e;return null===(e=n.value)||void 0===e?void 0:e.title}),r=Object(gn.a)(()=>i.value?t.root.$i18n("cx-sx-publisher-publish-panel-sandbox-section-result"):t.root.$i18n("cx-sx-publisher-publish-panel-new-section-result"));Object(gn.c)(()=>s.dispatch("translator/validateMT"));const{configureTranslationOptions:l,doPublish:u,isPublishDialogActive:g,publishOptionsOn:d,publishStatus:p}=sl();return{configureTranslationOptions:l,currentPageSection:n,doPublish:u,editTranslation:()=>{t.root.$router.push({name:"sx-editor",params:{content:n.value.translationHtml,sourceLanguage:a.value.sourceLanguage,targetLanguage:a.value.targetLanguage,title:a.value.targetTitle||a.value.sourceTitle,isFinalEdit:!0}})},isPublishDialogActive:g,mwIconEdit:tn.n,mwIconSettings:tn.D,panelResult:r,publishOptionsOn:d,publishStatus:p,translatedTitle:o}}},gl={name:"SxPublisherView",components:{SxPublisher:(n("d536"),Object(u.a)(ol,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"sx-publisher"},[n("sx-publisher-header",{on:{"publish-translation":e.doPublish}}),n("div",{staticClass:"sx-publisher__publish-panel pa-4"},[n("h5",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-publisher-publish-panel-new-section-status",arg:"cx-sx-publisher-publish-panel-new-section-status"}],staticClass:"mb-2"}),n("h6",{staticClass:"mb-2",domProps:{innerHTML:e._s(e.panelResult)}}),n("mw-row",{staticClass:"ma-0",attrs:{justify:"end"}},[n("mw-col",{attrs:{shrink:""}},[n("mw-button",{staticClass:"pa-0 mx-1",attrs:{type:"icon",icon:e.mwIconSettings},on:{click:e.configureTranslationOptions}})],1)],1)],1),n("sx-publisher-review-info"),n("section",{staticClass:"sx-publisher__section-preview pa-5"},[n("mw-row",{staticClass:"pb-5 ma-0"},[n("mw-col",{staticClass:"sx-publisher__section-preview__title ma-0",attrs:{tag:"h2",grow:""},domProps:{innerHTML:e._s(e.translatedTitle)}}),n("mw-col",{attrs:{shrink:""}},[n("mw-button",{attrs:{icon:e.mwIconEdit,type:"icon"},on:{click:e.editTranslation}})],1)],1),n("div",{domProps:{innerHTML:e._s(e.currentPageSection.translationHtml)}})],1),n("sx-publish-option-selector",{attrs:{active:e.publishOptionsOn},on:{"update:active":function(t){e.publishOptionsOn=t}}}),n("sx-publisher-animation-dialog",{attrs:{active:e.isPublishDialogActive,status:e.publishStatus}})],1)}),[],!1,null,null,null)).exports},computed:{classes(){return{fullscreen:this.$mwui.breakpoint.mdAndDown}}}},pl=(n("9d3c"),Object(u.a)(gl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"sx-publisher-view",class:e.classes},[n("sx-publisher")],1)}),[],!1,null,null,null)).exports,Tl={name:"SxSearchArticleSuggestion",components:{MwThumbnail:o.r,MwIcon:o.j,MwRow:o.p,MwCol:o.e},props:{suggestion:{type:Ee,required:!0}},data:()=>({mwIconStar:tn.E,mwIconLanguage:tn.u,mwIconArticle:tn.f})},_l=(n("21fa"),Object(u.a)(Tl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-row",{staticClass:"cx-search-suggestion pt-3 ma-0",attrs:{align:"normal"}},[n("mw-col",{attrs:{shrink:""}},[e.suggestion.thumbnail?n("mw-thumbnail",{staticClass:"cx-search-suggestion__thumbnail",attrs:{thumbnail:e.suggestion.thumbnail,width:56}}):n("div",{staticClass:"cx-search-suggestion__thumbnail-placeholder justify-center"},[n("mw-icon",{attrs:{size:"30",icon:e.mwIconArticle}})],1)],1),n("mw-col",{staticClass:"ms-4"},[n("mw-row",{staticClass:"ma-0 no-wrap fill-height",attrs:{direction:"column",align:"start"}},[n("mw-col",{staticClass:"mb-1",attrs:{shrink:""}},[n("h5",{staticClass:"my-0 cx-search-suggestion__source-title",domProps:{textContent:e._s(e.suggestion.title)}})]),n("mw-col",{staticClass:"mb-1",attrs:{shrink:""}},[n("p",{staticClass:"ma-0 cx-search-suggestion__source-description complementary",domProps:{textContent:e._s(e.suggestion.description)}})]),n("mw-col",{staticClass:"cx-search-suggestion__languages",attrs:{shrink:"",align:"center"}},[n("mw-icon",{staticClass:"me-2",attrs:{icon:e.mwIconLanguage,size:16}}),n("small",{domProps:{textContent:e._s(e.suggestion.langLinksCount)}})],1)],1)],1)],1)}),[],!1,null,null,null)).exports;var kl=e=>{const{sourceLanguage:n}=ba(),a=Object(gn.d)([]),s=Object(gn.d)(!1),i=Object(gn.a)(()=>a.value.slice(0,4)),o=Tn(async()=>{try{a.value=await st_searchPagesByTitlePrefix(e.value,n.value)}finally{s.value=!1}},500);return Object(gn.e)(e,()=>{s.value=!0,a.value=[],o()}),{searchResultsLoading:s,searchResultsSlice:i}},Pl={name:"SearchResultsCard",components:{SxSearchArticleSuggestion:_l,MwCard:o.d,MwSpinner:o.q},props:{searchInput:{type:String,default:null}},setup(e){const{sourceLanguageAutonym:t}=ba(),n=Object(gn.a)(()=>e.searchInput),{searchResultsLoading:a,searchResultsSlice:s}=kl(n);return{searchResultsLoading:a,searchResultsSlice:s,sourceLanguageAutonym:t}}},Al=(n("30ea"),Object(u.a)(Pl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-card",{staticClass:"sx-article-search__results mb-0 pa-4"},[e.searchResultsLoading?n("mw-spinner"):0===e.searchResultsSlice.length?n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-article-search-no-search-results-message",value:[e.searchInput,e.sourceLanguageAutonym],expression:"[\n      searchInput,\n      sourceLanguageAutonym\n    ]",arg:"cx-sx-article-search-no-search-results-message"}],staticClass:"sx-article-search__empty-search-results-message mt-4 pa-4 mb-0"}):e._e(),e._l(e.searchResultsSlice,(function(t){return n("sx-search-article-suggestion",{key:t.pageid,attrs:{suggestion:t},nativeOn:{click:function(n){return e.$emit("suggestion-clicked",t)}}})}))],2)}),[],!1,null,null,null)).exports,Bl={name:"ArticleSuggestionsCard",components:{SxSearchArticleSuggestion:_l,MwCard:o.d},props:{cardTitle:{type:String,required:!0},suggestions:{type:Array,required:!0}},computed:{...Object(r.b)({sourceLanguage:e=>e.application.sourceLanguage})}},Nl=(n("1fdd"),Object(u.a)(Bl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("mw-card",{staticClass:"sx-article-search__suggestions mb-0 pa-4",scopedSlots:e._u([{key:"header",fn:function(){return[n("h5",{staticClass:"ma-0 pb-1 sx-article-search__suggestions-header",domProps:{textContent:e._s(e.cardTitle)}})]},proxy:!0}])},e._l(e.suggestions,(function(t){return n("sx-search-article-suggestion",{key:t.pageid,attrs:{suggestion:t},nativeOn:{click:function(n){return e.$emit("suggestion-clicked",t)}}})})),1)}),[],!1,null,null,null)).exports;var Rl=e=>Object(gn.a)(()=>{const{sourceLanguage:t}=ba(),a={value:"other",props:{icon:tn.o,type:"icon",class:"px-0 py-4 me-4 ms-auto"}},s=[t.value,...e.value.slice(0,2)];return[...s.filter((e,t)=>s.findIndex(t=>t===e)===t).map(e=>({value:e,props:{label:Object(en.getAutonym)(e),type:"text",class:"px-0 py-4 mx-4"}})),a]});var Dl=e=>Object(gn.a)(()=>{const{sourceLanguage:t,targetLanguage:n}=ba(),a=(navigator.language||"").split("-")[0],s=(mw.config.get("wgULSAcceptLanguageList")||navigator.languages||[]).map(e=>e.split("-")[0]),i=[mw.config.get("wgUserLanguage"),mw.config.get("wgContentLanguage"),a,...e.value,...s];return[...new Set(i)].filter(e=>e!==t.value&&e!==n.value&&Object(en.getAutonym)(e)!==e)});const ql=e=>Ta(e.title,"sx-article-search","suggestion_recent_edit"),Hl=e=>Ta(e.title,"sx-article-search","suggestion_nearby"),Gl=e=>Ta(e.title,"sx-article-search","search_result");var Xl={name:"SxArticleSearch",components:{ArticleSuggestionsCard:Nl,SearchResultsCard:Al,MwInput:o.k,MwDialog:o.f,MwLanguageSelector:On,MwButtonGroup:o.c,MwRow:o.p,MwCol:o.e,MwButton:o.b},setup(e,t){const n=Object(gn.d)(""),a=Object(gn.d)(!1),s=Object(gn.d)(null),i=Object(gn.d)(!1),o=Object(gn.d)([]),r=t.root.$store,c=r.state.mediawiki,{sourceLanguage:l,targetLanguage:u}=ba(),g=Object(gn.a)(()=>c.supportedLanguageCodes||[]),d=Object(gn.a)(()=>g.value.filter(e=>e!==u.value)),p=Dl(o),m=Rl(p),h=t.root.$router;Object(gn.c)(async()=>{var e;await xa(),r.dispatch("translator/fetchTranslations");try{o.value.push(...JSON.parse(localStorage.getItem("uls-previous-languages")))}catch(t){}null===(e=s.value)||void 0===e||e.focus()});const v=e=>{"other"!==e?r.dispatch("application/updateSourceLanguage",e):i.value=!0};Object(gn.e)(l,()=>r.dispatch("mediawiki/fetchNearbyPages"),{immediate:!0}),Object(gn.e)(n,()=>{a.value||(a.value=!0,t.root.$logEvent({event_type:"dashboard_search"}))});const x=Object(gn.a)(()=>r.getters["mediawiki/getRecentlyEditedPages"]),b=Object(gn.a)(()=>r.getters["mediawiki/getNearbyPages"]);return{availableSourceLanguages:d,close:()=>{h.push({name:"dashboard"})},fullscreen:Object(gn.a)(()=>t.root.$mwui.breakpoint.mdAndDown),mwIconClose:tn.l,mwIconSearch:tn.C,nearbyPages:b,onSourceLanguageDialogClose:()=>{i.value=!1},onSourceLanguageSelected:e=>{i.value=!1,o.value.push(e),v(e)},recentlyEditedPages:x,searchInput:n,searchInputRef:s,sourceLanguage:l,sourceLanguageOptions:m,sourceLanguageSelectOn:i,startNearbySectionTranslation:Hl,startRecentlyEditedSectionTranslation:ql,startSearchResultSectionTranslation:Gl,suggestedSourceLanguages:p,updateSelection:v}}},Zl={name:"SxArticleSearchView",components:{SxArticleSearch:(n("09bc"),Object(u.a)(Xl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"sx-article-search"},[n("mw-row",{staticClass:"sx-article-search__header ma-0 py-3",attrs:{align:"stretch",justify:"start"}},[n("mw-col",{staticClass:"px-4",attrs:{grow:"",align:"center"}},[n("h5",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-article-search-header",arg:"cx-sx-article-search-header"}],staticClass:"mb-0"})]),n("mw-col",{staticClass:"pe-4",attrs:{shrink:"",align:"start"}},[n("mw-button",{staticClass:"pa-0",attrs:{type:"icon",icon:e.mwIconClose,"icon-size":20},on:{click:e.close}})],1)],1),n("mw-input",{ref:"searchInputRef",attrs:{"icon-size":20,outlined:!1,icon:e.mwIconSearch,placeholder:e.$i18n("cx-sx-article-search-input-placeholder"),type:"search"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}}),n("mw-button-group",{staticClass:"sx-article-search__language-button-group",attrs:{items:e.sourceLanguageOptions,active:e.sourceLanguage},on:{select:e.updateSelection}}),e.searchInput?e._e():[e.recentlyEditedPages&&e.recentlyEditedPages.length?n("article-suggestions-card",{attrs:{"card-title":e.$i18n("cx-sx-article-search-recently-edited-title"),suggestions:e.recentlyEditedPages},on:{"suggestion-clicked":e.startRecentlyEditedSectionTranslation}}):e.nearbyPages&&e.nearbyPages.length?n("article-suggestions-card",{attrs:{"card-title":e.$i18n("cx-sx-article-search-nearby-title"),suggestions:e.nearbyPages},on:{"suggestion-clicked":e.startNearbySectionTranslation}}):n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-article-search-no-suggestions-message",arg:"cx-sx-article-search-no-suggestions-message"}],staticClass:"sx-article-search__empty-suggestions-message mt-12 pa-4 mb-0"})],n("search-results-card",{directives:[{name:"show",rawName:"v-show",value:!!e.searchInput,expression:"!!searchInput"}],attrs:{"search-input":e.searchInput},on:{"suggestion-clicked":e.startSearchResultSectionTranslation}}),n("mw-dialog",{staticClass:"sx-article-search-language-selector",attrs:{animation:"slide-up",fullscreen:e.fullscreen,header:e.fullscreen,"overlay-opacity":0,title:e.$i18n("sx-article-search-language-selector-dialog-title")},on:{close:e.onSourceLanguageDialogClose},model:{value:e.sourceLanguageSelectOn,callback:function(t){e.sourceLanguageSelectOn=t},expression:"sourceLanguageSelectOn"}},[n("mw-language-selector",{staticClass:"sx-article-search-language-selector__widget col-12",attrs:{languages:e.availableSourceLanguages,suggestions:e.suggestedSourceLanguages,placeholder:e.$i18n("cx-sx-language-selector-placeholder")},on:{select:e.onSourceLanguageSelected,close:e.onSourceLanguageDialogClose}})],1)],2)}),[],!1,null,null,null)).exports},computed:{classes:e=>({fullscreen:e.$mwui.breakpoint.mdAndDown})}},Ql=(n("bc99"),Object(u.a)(Zl,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("main",{staticClass:"sx-article-search-view",class:e.classes},[n("sx-article-search")],1)}),[],!1,null,null,null)).exports;a.default.use(Vt.a);const eu=[{path:"",name:"dashboard",component:Fa,params:!0,meta:{workflowStep:0}},{path:"/sx/article-search",name:"sx-article-search",component:Ql,params:!0,meta:{workflowStep:.5}},{path:"/sx",name:"sx-translation-confirmer",component:As,params:!0,meta:{workflowStep:1}},{path:"/sx/section-selector",name:"sx-section-selector",component:xi,params:!0,meta:{workflowStep:2}},{path:"/sx/content-comparator",name:"sx-content-comparator",component:xo,params:!0,meta:{workflowStep:3}},{path:"/sx/quick-tutorial",name:"sx-quick-tutorial",component:ec,params:!0,meta:{workflowStep:3.5}},{path:"/sx/sentence-selector",name:"sx-sentence-selector",component:Dr,params:!0,meta:{workflowStep:4}},{path:"/sx/sx-editor",name:"sx-editor",component:_c,params:!0,meta:{workflowStep:4.5}},{path:"/sx/sx-publisher",name:"sx-publisher",component:pl,params:!0,meta:{workflowStep:5}},{path:"*",name:"404",component:Fa,params:!0,meta:{workflowStep:0}}],tu=new Vt.a({mode:"hash",routes:eu});tu.beforeEach((e,t,n)=>{if(e.params.force)return void n();const a=t.meta.workflowStep,s=e.meta.workflowStep;if(isNaN(a)&&s>=1)return void n({name:"dashboard"});if(Math.ceil(s)-Math.floor(a)>1){const e=Math.ceil(s)-1;n({name:eu.find(t=>t.meta.workflowStep===e).name})}else n()});var nu=tu,au=n("5093"),su=n.n(au),iu=n("3899");a.default.use(iu.a),a.default.use(iu.b),a.default.use(va),a.default.use(gn.b);const ou=mw.config.get("wgUserLanguage"),cu=mw.messages.values||{};a.default.prototype.$incompleteVersion=!0,a.default.use(su.a,{locale:ou,finalFallback:"en",messages:cu,wikilinks:!0}),new a.default({store:Gt,router:nu,el:"#contenttranslation",render:e=>e(d)})},5827:function(e,t,n){},"58c6":function(e,t,n){"use strict";n("4c90")},"5aee":function(e,t,n){"use strict";n("f96a")},"5cce":function(e,t){e.exports='<svg width="136px" height="136px" viewBox="0 0 136 136" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>publishing-success</title> <defs> <polygon id="path-1" points="29.5385666 61.8098361 10.7522184 42.6688525 4.4 49.1409836 29.5385666 74.8 83.6 19.7180328 77.2477816 13.2"></polygon> </defs> <g id="publishing-success" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Group" fill="#D5FDF4"> <circle id="Oval" cx="68" cy="68" r="68"></circle> </g> <g id="🔣-Icon/Interactions/check" transform="translate(24.000000, 24.000000)"> <mask id="mask-2" fill="white"> <use xlink:href="#path-1"></use> </mask> <use id="Mask" fill="#000000" fill-rule="evenodd" xlink:href="#path-1"></use> <g id="🎨-Color/Green50-#00af89" mask="url(#mask-2)" fill="#00AF89" fill-rule="evenodd"> <rect id="Rectangle-1" x="0" y="0" width="88" height="88"></rect> </g> </g> </g> </svg>'},6208:function(e,t,n){},"63ac":function(e,t,n){"use strict";n("11f4")},"64ab":function(e,t,n){},"64fd":function(e,t,n){},"67bb":function(e,t,n){},"6c2a":function(e,t,n){"use strict";n("f4c0")},"74c7":function(e,t,n){},7989:function(e,t,n){},"7a68":function(e,t,n){"use strict";n("408c")},"7c55":function(e,t,n){"use strict";n("2395")},"7fc4":function(e,t,n){"use strict";n("f4af")},"804d":function(e,t,n){"use strict";n("ba1c")},8295:function(e,t,n){},"83a6":function(e,t,n){},"83f9":function(e,t,n){"use strict";n("8295")},"85be":function(e,t){SectionTranslationTarget=function e(t,n){this.overlay=t,this.$overlaySurface=t.querySelector(".surface"),(n=n||{}).toolbarConfig=$.extend({actions:!1},n.toolbarConfig),this.config=n,e.super.call(this,t,n),this.section=n.section,this.$element.addClass("sx-ve-translation-target")},OO.inheritClass(SectionTranslationTarget,ve.init.mw.MobileArticleTarget),SectionTranslationTarget.static.integrationType="contenttranslation",SectionTranslationTarget.prototype.getContentApi=function(e,t){return this.config.siteMapper.getApi(this.config.language,t)},SectionTranslationTarget.prototype.getPageName=function(){return this.config.title},SectionTranslationTarget.prototype.loadFail=function(e,t){SectionTranslationTarget.super.prototype.loadFail.apply(this,arguments),window.history.back(),mw.notify(this.extractErrorMessages(t))},SectionTranslationTarget.prototype.back=function(){this.config.onBack()},SectionTranslationTarget.prototype.next=function(){this.config.onNext()},SectionTranslationTarget.prototype.setupToolbar=function(e){var t=this.toolbarGroups;this.toolbarGroups=[].concat([{name:"back",include:["back"]}],this.toolbarGroups,[{name:"next",type:"bar",include:["showMobileNext"]}]),ve.init.mw.MobileArticleTarget.super.prototype.setupToolbar.call(this,e),this.toolbarGroups=t,this.toolbar.$group.addClass("ve-init-mw-mobileArticleTarget-editTools"),this.toolbar.$element.addClass("ve-init-mw-mobileArticleTarget-toolbar")},SectionTranslationTarget.prototype.setupToolbarSaveButton=function(){},SectionTranslationTarget.prototype.updateToolbarSaveButtonState=function(){},SectionTranslationTarget.prototype.done=function(){this.getSurface().getModel().setNullSelection(),this.getSurface().getView().blur()},ve.init.mw.targetFactory.register(SectionTranslationTarget),e.exports=SectionTranslationTarget},"85d3":function(e,t,n){},8789:function(e,t,n){},"898f":function(e,t,n){},"8c24":function(e,t,n){"use strict";n("14e3")},"92fe":function(e,t,n){"use strict";n("da03")},"93b3":function(e,t,n){},"94f9":function(e,t,n){},9813:function(e,t,n){},9866:function(e,t,n){"use strict";n("ce33")},"99a9":function(e,t,n){"use strict";n("02cc")},"9bc3":function(e,t,n){"use strict";n("64ab")},"9c2c":function(e,t){SXEditorNextTool=function e(){e.super.apply(this,arguments)},OO.inheritClass(SXEditorNextTool,ve.ui.Tool),SXEditorNextTool.static.name="showMobileNext",SXEditorNextTool.static.icon="next",SXEditorNextTool.static.flags=["primary","progressive"],SXEditorNextTool.static.group="navigation",SXEditorNextTool.static.displayBothIconAndLabel=!1,SXEditorNextTool.static.commandName="next",SXEditorNextTool.prototype.onUpdateState=function(){SXEditorNextTool.super.prototype.onUpdateState.apply(this,arguments),this.setActive(!0),this.setDisabled(!1)},ve.ui.toolFactory.register(SXEditorNextTool),e.exports=SXEditorNextTool},"9d3c":function(e,t,n){"use strict";n("a216")},a216:function(e,t,n){},a265:function(e,t,n){},a32b:function(e,t,n){},a381:function(e,t,n){},a50d:function(e,t,n){"use strict";n("50f1")},a6e7:function(e,t,n){},a8dd:function(e,t,n){},b3ed:function(e,t){e.exports='<svg width="136px" height="136px" viewBox="0 0 136 136" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>publishing-failure</title> <g id="publishing-failure" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Group" fill="#FEE7E6"> <circle id="Oval" cx="68" cy="68" r="68"></circle> </g> <path d="M68,24 C43.6994698,24 24,43.6994844 24,68 C24,92.3005302 43.6994747,112 68,112 C92.3005156,112 112,92.3005302 112,68 C112,43.6994844 92.3005156,24 68,24 Z M92.4444444,72.8888889 L43.5555556,72.8888889 L43.5555556,63.1111111 L92.4444444,63.1111111 L92.4444444,72.8888889 Z" id="Mask" fill="#DD3333"></path> </g> </svg>'},b4c7:function(e,t,n){"use strict";n("6208")},b5be:function(e,t,n){},ba1c:function(e,t,n){},bc1b:function(e,t,n){"use strict";n("85d3")},bc99:function(e,t,n){"use strict";n("d5b6")},bd9f:function(e,t,n){"use strict";n("a265")},c34a:function(e,t,n){"use strict";n("7989")},c3e3:function(e,t,n){"use strict";n("51f3")},c5a8:function(e,t,n){"use strict";n("64fd")},c69b:function(e,t){e.exports='<svg width="375px" height="200px" viewBox="0 0 375 200" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>illustration-sections</title> <defs> <rect id="path-1" x="0" y="0" width="137" height="174"></rect> <filter x="-3.6%" y="-2.3%" width="107.3%" height="105.7%" filterUnits="objectBoundingBox" id="filter-2"> <feOffset dx="0" dy="1" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset> <feGaussianBlur stdDeviation="1.5" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur> <feComposite in="shadowBlurOuter1" in2="SourceAlpha" operator="out" result="shadowBlurOuter1"></feComposite> <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.19958673 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix> </filter> <rect id="path-3" x="0.17674259" y="0.678736183" width="75" height="5"></rect> <filter x="-5.3%" y="-40.0%" width="110.7%" height="260.0%" filterUnits="objectBoundingBox" id="filter-4"> <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset> <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur> <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.19958673 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix> </filter> <rect id="path-5" x="1.05473569" y="20.5842412" width="75" height="5"></rect> <filter x="-5.3%" y="-40.0%" width="110.7%" height="260.0%" filterUnits="objectBoundingBox" id="filter-6"> <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset> <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur> <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.19958673 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix> </filter> <rect id="path-7" x="0.745148663" y="10.1485258" width="75" height="5"></rect> <filter x="-5.3%" y="-40.0%" width="110.7%" height="260.0%" filterUnits="objectBoundingBox" id="filter-8"> <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset> <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur> <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.19958673 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix> </filter> <rect id="path-9" x="0.526966096" y="31.3803116" width="33" height="5"></rect> <filter x="-12.1%" y="-40.0%" width="124.2%" height="260.0%" filterUnits="objectBoundingBox" id="filter-10"> <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset> <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur> <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.19958673 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix> </filter> <rect id="path-11" x="0.17674259" y="0.678736183" width="75" height="5"></rect> <filter x="-5.3%" y="-40.0%" width="110.7%" height="260.0%" filterUnits="objectBoundingBox" id="filter-12"> <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset> <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur> <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.19958673 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix> </filter> <rect id="path-13" x="1.05473569" y="20.5842412" width="75" height="5"></rect> <filter x="-5.3%" y="-40.0%" width="110.7%" height="260.0%" filterUnits="objectBoundingBox" id="filter-14"> <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset> <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur> <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.19958673 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix> </filter> <rect id="path-15" x="0.745148663" y="10.1485258" width="75" height="5"></rect> <filter x="-5.3%" y="-40.0%" width="110.7%" height="260.0%" filterUnits="objectBoundingBox" id="filter-16"> <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset> <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur> <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.19958673 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix> </filter> <rect id="path-17" x="0.526966096" y="31.3803116" width="33" height="5"></rect> <filter x="-12.1%" y="-40.0%" width="124.2%" height="260.0%" filterUnits="objectBoundingBox" id="filter-18"> <feOffset dx="0" dy="2" in="SourceAlpha" result="shadowOffsetOuter1"></feOffset> <feGaussianBlur stdDeviation="1" in="shadowOffsetOuter1" result="shadowBlurOuter1"></feGaussianBlur> <feColorMatrix values="0 0 0 0 0   0 0 0 0 0   0 0 0 0 0  0 0 0 0.19958673 0" type="matrix" in="shadowBlurOuter1"></feColorMatrix> </filter> <path d="M119.009619,18.1031535 C119.009619,17.0036819 119.909183,16.0733946 120.999588,16.0261337 L247.01965,10.5641077 C248.11868,10.516473 249.009619,11.3786871 249.009619,12.4772391 L249.009619,45.6663508 C249.009619,46.7705789 248.110054,47.6267431 247.01965,47.5794823 L120.999588,42.1174562 C119.900558,42.0698215 119.009619,41.1390215 119.009619,40.0404364 L119.009619,18.1031535 Z" id="path-19"></path> <pattern id="pattern-20" width="30" height="30" x="89.0096189" y="-19.4282032" patternUnits="userSpaceOnUse"> <use xlink:href="#image-21"></use> </pattern> <image id="image-21" width="30" height="30" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAP1JREFUSA3t1V0OgyAMAOC1Hmu7giHhXQ/n9mw0XmG7xm6izpphBAENk/IyXgxJ06/lT2ia5p1lWZnn+fPiGG3bXsdxvJ8ZBzGSHikSqMkU+AynwBeYG9dgTnwDc+FWmAN3wrFx7LruRohtCCFeAFD0fV+dHYcxkh4p8v9ynfoj8L3Z2qnmfLM1mE72F38Mw1BIKfd+lcFxaF4jukKEImJV17X3qv0St+lYFUIo4VPy0td5aJwTpgJCk6rize86H9LEDFBz6pQ63lv2kLgpp38vQ5IeaQbW7cfYS7V65nfe4xT4cri48QWmpeDENZgT38BcuBXmwJ1wbDzZy/UBR/bTV8buNroAAAAASUVORK5CYII="></image> <path d="M113.1747,17.4559811 C113.1747,16.3565095 114.074265,15.4262222 115.164669,15.3789613 L241.184731,9.91693528 C242.283761,9.86930059 243.1747,10.7315147 243.1747,11.8300667 L243.1747,45.0191784 C243.1747,46.1234065 242.275136,46.9795707 241.184731,46.9323099 L115.164669,41.4702838 C114.065639,41.4226491 113.1747,40.4918491 113.1747,39.393264 L113.1747,17.4559811 Z" id="path-22"></path> <pattern id="pattern-23" width="30" height="30" x="83.1747" y="-20.0753756" patternUnits="userSpaceOnUse"> <use xlink:href="#image-24"></use> </pattern> <image id="image-24" width="30" height="30" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAP1JREFUSA3t1V0OgyAMAOC1Hmu7giHhXQ/n9mw0XmG7xm6izpphBAENk/IyXgxJ06/lT2ia5p1lWZnn+fPiGG3bXsdxvJ8ZBzGSHikSqMkU+AynwBeYG9dgTnwDc+FWmAN3wrFx7LruRohtCCFeAFD0fV+dHYcxkh4p8v9ynfoj8L3Z2qnmfLM1mE72F38Mw1BIKfd+lcFxaF4jukKEImJV17X3qv0St+lYFUIo4VPy0td5aJwTpgJCk6rize86H9LEDFBz6pQ63lv2kLgpp38vQ5IeaQbW7cfYS7V65nfe4xT4cri48QWmpeDENZgT38BcuBXmwJ1wbDzZy/UBR/bTV8buNroAAAAASUVORK5CYII="></image> </defs> <g id="illustration-sections" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="paper-blank" transform="translate(119.000000, 13.000000)"> <g id="Rectangle-1"> <use fill="black" fill-opacity="1" filter="url(#filter-2)" xlink:href="#path-1"></use> <rect stroke="#CCCCCC" stroke-width="1" stroke-linejoin="square" fill="#FFFFFF" fill-rule="evenodd" x="0.5" y="0.5" width="136" height="173"></rect> </g> </g> <g id="paragraph" transform="translate(206.500000, 93.500000) rotate(-10.000000) translate(-206.500000, -93.500000) translate(168.000000, 75.000000)"> <g id="Rectangle-1"> <use fill="black" fill-opacity="1" filter="url(#filter-4)" xlink:href="#path-3"></use> <use fill="#72777D" fill-rule="evenodd" xlink:href="#path-3"></use> </g> <g id="Rectangle-1"> <use fill="black" fill-opacity="1" filter="url(#filter-6)" xlink:href="#path-5"></use> <use fill="#72777D" fill-rule="evenodd" xlink:href="#path-5"></use> </g> <g id="Rectangle-1"> <use fill="black" fill-opacity="1" filter="url(#filter-8)" xlink:href="#path-7"></use> <use fill="#72777D" fill-rule="evenodd" xlink:href="#path-7"></use> </g> <g id="Rectangle-1"> <use fill="black" fill-opacity="1" filter="url(#filter-10)" xlink:href="#path-9"></use> <use fill="#72777D" fill-rule="evenodd" xlink:href="#path-9"></use> </g> </g> <g id="paragraph" transform="translate(183.500000, 161.500000) rotate(10.000000) translate(-183.500000, -161.500000) translate(145.000000, 143.000000)"> <g id="Rectangle-1"> <use fill="black" fill-opacity="1" filter="url(#filter-12)" xlink:href="#path-11"></use> <use fill="#72777D" fill-rule="evenodd" xlink:href="#path-11"></use> </g> <g id="Rectangle-1"> <use fill="black" fill-opacity="1" filter="url(#filter-14)" xlink:href="#path-13"></use> <use fill="#72777D" fill-rule="evenodd" xlink:href="#path-13"></use> </g> <g id="Rectangle-1"> <use fill="black" fill-opacity="1" filter="url(#filter-16)" xlink:href="#path-15"></use> <use fill="#72777D" fill-rule="evenodd" xlink:href="#path-15"></use> </g> <g id="Rectangle-1"> <use fill="black" fill-opacity="1" filter="url(#filter-18)" xlink:href="#path-17"></use> <use fill="#72777D" fill-rule="evenodd" xlink:href="#path-17"></use> </g> </g> <polygon id="Rectangle-Copy" fill="#C8CCD1" points="131 43 244 43 244 48 131 48"></polygon> <polygon id="Rectangle-Copy-2" fill="#C8CCD1" points="131 53 193 53 193 58 131 58"></polygon> <g id="arm-copy-3" transform="translate(56.625927, 185.496072) scale(-1, 1) rotate(30.000000) translate(-56.625927, -185.496072) translate(-68.374073, 155.496072)"> <path d="M172,16.907537 L67.5255867,19.2577145 C67.5255867,19.2577145 41.6533364,5.01474437 39.3838532,4.75193521 C37.1143701,4.48912604 24.3528844,2.1824462 21.4239694,1.25709257 C18.4950543,0.331738948 15.513093,-1.46076951 15.6763016,2.23397625 C15.8395102,5.92872201 31.451814,11.8431771 31.451814,11.8431771 C31.451814,11.8431771 18.6374608,8.56771268 14.3798228,8.72006409 C10.1221849,8.87241551 3.15683142,10.5136571 3.15683142,10.5136571 C3.15683142,10.5136571 -1.68501113,12.8086486 0.624095573,15.5521407 C2.93320227,18.2956327 11.8935866,14.6092418 15.9476391,15.7256629 C20.0016915,16.8420839 24.6134118,18.0017432 24.6134118,18.0017432 C24.6134118,18.0017432 10.4209026,18.1597695 6.57049232,19.2372749 C2.72008204,20.3147804 0.884786525,23.0820714 2.61880922,25.1423062 C4.35283192,27.2025411 12.8816827,24.8622434 17.5059597,24.825123 C22.1302366,24.7880027 26.3140547,25.8973482 26.3140547,25.8973482 C26.3140547,25.8973482 19.3546483,26.1983657 14.7049518,30.0880272 C10.0552553,33.9776887 4.32619796,38.4159948 4.32619796,38.4159948 C4.32619796,38.4159948 2.43239277,41.7917011 5.35598778,43.4296316 C8.27958279,45.0675621 10.8781166,42.3389315 16.8697335,38.8363754 C22.8613504,35.3338192 25.589031,34.3693701 31.2960593,33.5457664 C37.0030875,32.7221628 42.6510908,35.9127352 42.6510908,35.9127352 C42.6510908,35.9127352 42.1989211,44.5285948 36.6894438,47.0954564 C31.1799665,49.6623179 27.3125288,51.2436598 27.3125288,51.2436598 C27.3125288,51.2436598 20.7211381,49.3172092 18.8777945,50.2909263 C17.0344509,51.2646434 17.5480459,53.5995834 18.8777943,56.07186 C20.2075426,58.5441366 25.9685773,60.2502333 29.8131232,59.9698817 C33.6576692,59.68953 51.3207932,56.4328775 60.5216871,48.735956 C69.7225811,41.0390344 72.893072,39.7769243 72.893072,39.7769243 L172,40.0117303" id="Path-11" fill="#BE6F41"></path> <g id="Rectangle-37"> <use fill="#3366CC" xlink:href="#path-19"></use> <use fill-opacity="0.5" fill="url(#pattern-20)" style="mix-blend-mode:multiply" xlink:href="#path-19"></use> </g> </g> <g id="arm-copy" transform="translate(321.614539, 14.504839) rotate(-29.000000) translate(-321.614539, -14.504839) translate(199.614539, -15.495161)"> <path d="M172,16.907537 L67.5255867,19.2577145 C67.5255867,19.2577145 41.6533364,5.01474437 39.3838532,4.75193521 C37.1143701,4.48912604 24.3528844,2.1824462 21.4239694,1.25709257 C18.4950543,0.331738948 15.513093,-1.46076951 15.6763016,2.23397625 C15.8395102,5.92872201 31.451814,11.8431771 31.451814,11.8431771 C31.451814,11.8431771 18.6374608,8.56771268 14.3798228,8.72006409 C10.1221849,8.87241551 3.15683142,10.5136571 3.15683142,10.5136571 C3.15683142,10.5136571 -1.68501113,12.8086486 0.624095573,15.5521407 C2.93320227,18.2956327 11.8935866,14.6092418 15.9476391,15.7256629 C20.0016915,16.8420839 24.6134118,18.0017432 24.6134118,18.0017432 C24.6134118,18.0017432 10.4209026,18.1597695 6.57049232,19.2372749 C2.72008204,20.3147804 0.884786525,23.0820714 2.61880922,25.1423062 C4.35283192,27.2025411 12.8816827,24.8622434 17.5059597,24.825123 C22.1302366,24.7880027 26.3140547,25.8973482 26.3140547,25.8973482 C26.3140547,25.8973482 19.3546483,26.1983657 14.7049518,30.0880272 C10.0552553,33.9776887 4.32619796,38.4159948 4.32619796,38.4159948 C4.32619796,38.4159948 2.43239277,41.7917011 5.35598778,43.4296316 C8.27958279,45.0675621 10.8781166,42.3389315 16.8697335,38.8363754 C22.8613504,35.3338192 25.589031,34.3693701 31.2960593,33.5457664 C37.0030875,32.7221628 42.6510908,35.9127352 42.6510908,35.9127352 C42.6510908,35.9127352 42.1989211,44.5285948 36.6894438,47.0954564 C31.1799665,49.6623179 27.3125288,51.2436598 27.3125288,51.2436598 C27.3125288,51.2436598 20.7211381,49.3172092 18.8777945,50.2909263 C17.0344509,51.2646434 17.5480459,53.5995834 18.8777943,56.07186 C20.2075426,58.5441366 25.9685773,60.2502333 29.8131232,59.9698817 C33.6576692,59.68953 51.3207932,56.4328775 60.5216871,48.735956 C69.7225811,41.0390344 72.893072,39.7769243 72.893072,39.7769243 L172,40.0117303" id="Path-11" fill="#D7A57A"></path> <g id="Rectangle-37"> <use fill="#FFB50D" xlink:href="#path-22"></use> <use fill-opacity="0.5" fill="url(#pattern-23)" style="mix-blend-mode:multiply" xlink:href="#path-22"></use> </g> </g> <rect id="Rectangle" fill="#C8CCD1" x="131" y="25" width="42" height="10"></rect> </g> </svg>'},c9fd:function(e,t,n){},cd7f:function(e,t,n){"use strict";n("0466")},ce33:function(e,t,n){},d536:function(e,t,n){"use strict";n("74c7")},d5b5:function(e,t,n){"use strict";n("8789")},d5b6:function(e,t,n){},d7f4:function(e,t,n){},d940:function(e,t,n){"use strict";n("ff6a")},da03:function(e,t,n){},da9e:function(e,t,n){},e1af:function(e,t,n){"use strict";n("a381")},e1b0:function(e,t){e.exports='<svg width="375px" height="200px" viewBox="0 0 375 200" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <title>illustration-mt</title> <defs> <path d="M105.208249,19.5680105 C105.208249,18.4685389 106.107813,17.5382516 107.198217,17.4909907 L233.21828,12.0289647 C234.31731,11.98133 235.208249,12.8435441 235.208249,13.9420961 L235.208249,47.1312078 C235.208249,48.2354359 234.308684,49.0916001 233.21828,49.0443393 L107.198217,43.5823132 C106.099188,43.5346786 105.208249,42.6038785 105.208249,41.5052935 L105.208249,19.5680105 Z" id="path-1"></path> <pattern id="pattern-2" width="30" height="30" x="75.2082489" y="-17.9633462" patternUnits="userSpaceOnUse"> <use xlink:href="#image-3"></use> </pattern> <image id="image-3" width="30" height="30" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAAAP1JREFUSA3t1V0OgyAMAOC1Hmu7giHhXQ/n9mw0XmG7xm6izpphBAENk/IyXgxJ06/lT2ia5p1lWZnn+fPiGG3bXsdxvJ8ZBzGSHikSqMkU+AynwBeYG9dgTnwDc+FWmAN3wrFx7LruRohtCCFeAFD0fV+dHYcxkh4p8v9ynfoj8L3Z2qnmfLM1mE72F38Mw1BIKfd+lcFxaF4jukKEImJV17X3qv0St+lYFUIo4VPy0td5aJwTpgJCk6rize86H9LEDFBz6pQ63lv2kLgpp38vQ5IeaQbW7cfYS7V65nfe4xT4cri48QWmpeDENZgT38BcuBXmwJ1wbDzZy/UBR/bTV8buNroAAAAASUVORK5CYII="></image> </defs> <g id="illustration-mt" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"> <g id="Oval-9-+-Path-79" transform="translate(97.500000, 27.500000) rotate(-50.000000) translate(-97.500000, -27.500000) translate(20.000000, -66.000000)" stroke="#72777D" stroke-width="20"> <path d="M154.758243,0.558837385 C154.758243,0.558837385 79.2075256,2.3963732 49.094702,27.6101739 C18.9818785,52.8239746 29.5592009,127.558837 29.5592009,127.558837" id="Path-79"></path> </g> <path d="M181.241058,153 L157,153 L188.486036,60 L218.513964,60 L250,153 L225.758942,153 L219.607545,133.473633 L187.392455,133.473633 L181.241058,153 Z M192.598076,116.303848 L213.598076,116.303848 L203.432471,83.3038476 L202.719095,83.3038476 L192.598076,116.303848 Z" id="A" fill="#3366CC" fill-rule="nonzero" transform="translate(203.500000, 106.500000) rotate(-330.000000) translate(-203.500000, -106.500000) "></path> <g id="arm-copy-4" transform="translate(314.833239, 182.732618) rotate(-329.000000) translate(-314.833239, -182.732618) translate(196.833239, 154.732618)"> <path d="M169,12.1867168 L64.5255867,14.5368942 C64.5255867,14.5368942 38.6533364,0.293924123 36.3838532,0.0311149624 C34.1143701,-0.231694198 20.2523322,1.25606343 18,1.27917976 C15.7476678,1.30229608 9,3.27917976 12,6.27917976 C15,9.27917976 28.451814,7.12235683 28.451814,7.12235683 C28.451814,7.12235683 22.2576379,8.12682834 18,8.27917976 C13.7423621,8.43153117 7,10.2791798 6,11.2791798 C5,12.2791798 2.6908933,14.5356877 5,17.2791798 C7.3091067,20.0226718 10.0523609,16.5535169 14,15.2791798 C17.9476391,14.0048426 21.6134118,13.280923 21.6134118,13.280923 C21.6134118,13.280923 7.85041029,19.2016743 4,20.2791798 C0.149589712,21.3566852 -1.63791203e-12,29.2791798 2,29.2791798 C4,29.2791798 9,25.2791798 13,23.2791798 C17,21.2791798 23.3140547,21.176528 23.3140547,21.176528 C23.3140547,21.176528 16.3546483,21.4775454 11.7049518,25.3672069 C7.05525531,29.2568684 1.32619796,33.6951745 1.32619796,33.6951745 C1.32619796,33.6951745 -0.567607229,37.0708809 2.35598778,38.7088114 C5.27958279,40.3467419 7.87811658,37.6181113 13.8697335,34.1155551 C19.8613504,30.612999 22.589031,29.6485498 28.2960593,28.8249462 C34.0030875,28.0013426 39.6510908,31.1919149 39.6510908,31.1919149 C39.6510908,31.1919149 39.1989211,39.8077746 33.6894438,42.3746361 C28.1799665,44.9414977 24.3125288,46.5228395 24.3125288,46.5228395 C24.3125288,46.5228395 17.7211381,44.596389 15.8777945,45.5701061 C14.0344509,46.5438231 14.5480459,48.8787631 15.8777943,51.3510398 C17.2075426,53.8233164 22.9685773,55.5294131 26.8131232,55.2490614 C30.6576692,54.9687098 48.3207932,51.7120573 57.5216871,44.0151357 C66.7225811,36.3182142 69.893072,35.056104 69.893072,35.056104 L169,35.2909101 L169,12.1867168 Z" id="Path-11" fill="#D7A57A" transform="translate(84.861497, 27.639590) scale(1, -1) translate(-84.861497, -27.639590) "></path> <g id="Rectangle-37"> <use fill="#FFB50D" xlink:href="#path-1"></use> <use fill-opacity="0.5" fill="url(#pattern-2)" style="mix-blend-mode:multiply" xlink:href="#path-1"></use> </g> </g> <polyline id="Path" stroke="#72777D" stroke-width="18" transform="translate(119.011851, 100.500000) rotate(-30.000000) translate(-119.011851, -100.500000) " points="119.011851 134 90 117.25 90 83.75 119.011851 67 148.023702 83.75 148.023702 117.25"></polyline> </g> </svg> '},e210:function(e,t,n){"use strict";n("287c")},e3e7:function(e){e.exports=JSON.parse('{"en":["Works","Publications","Bibliography","Discography","Filmography","See also","Notes","Citations","References","Further reading","External links"],"es":["Bibliografía","Referencias","Citas","Discografía","Filmografía","Notas","Publicaciones","Obra","Enlaces externos","Otras lecturas","Lecturas relacionadas","Véase también"],"bn":["গ্রন্থপঞ্জী","গ্রন্থপঞ্জি","তথ্যাবলি","উদ্ধৃতিসমূহ","বর্ণনসমূহ","উদ্ধৃতি","উদ্ধ্বৃতি","তথ্যসূত্র","ডিস্কোগ্রাফি","বহিঃসংযোগ","চলচ্চিত্রের তালিকা","আরও পড়ুন","আরও পড়ুন","আরো পড়ুন","টীকা","নোট","প্রকাশনা","প্রকাশিত গ্রন্থ","আরও দেখুন","আরো দেখুন","কাজ","কর্মজীবন"],"fr":["Bibliographie","Références","Discographie","Filmographie","Travaux","Liens externes","Principales publications","Voir aussi"],"de":["Literatur","Bibliographie","Anmerkungen","Zitate","Belege","Diskografie","Diskographie","Weblinks","Filmografie","Literatur","Einzelnachweise","Veröffentlichungen","Einzelnachweise","Arbeit","Siehe auch"]}')},e9dc:function(e,t,n){},f4af:function(e,t,n){},f4c0:function(e,t,n){},f767:function(e,t,n){"use strict";n("1594")},f92f:function(e,t,n){"use strict";n("93b3")},f944:function(e,t,n){},f96a:function(e,t,n){},faf7:function(e,t,n){},fc87:function(e,t,n){},fe49:function(e,t,n){"use strict";n("f944")},ff6a:function(e,t,n){}});
//# sourceMappingURL=cx.js.map
(function(t){function e(e){for(var a,r,o=e[0],c=e[1],u=e[2],l=0,d=[];l<o.length;l++)r=o[l],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&d.push(s[r][0]),s[r]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);g&&g(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,o=1;o<n.length;o++){var c=n[o];0!==s[c]&&(a=!1)}a&&(i.splice(e--,1),t=r(r.s=n[0]))}return t}var a={},s={dashboard:0},i=[];function r(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=a,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var g=c;i.push([0,"cxdashboard.libs","mediawiki.ui"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0f8f":function(t,e,n){},2395:function(t,e,n){},"46f8":function(t,e,n){"use strict";var a=n("e243"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("d3b7"),n("ddb0"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"cxdashboard"}},[n("cx-header"),n("section",{staticClass:"row cx-translation-header"},[n("mw-button",{staticClass:"col-md-4 col-xs-12 col-lg-3 col-offset-lg-1 mb-4 mt-4",attrs:{progressive:"",large:"",icon:t.mwIconAdd,label:t.$i18n("cx-create-new-translation")}})],1),n("section",{staticClass:"row cx-translation-dashboard-container"},[n("cx-dashboard",{staticClass:"col-xs-12 col-md-8 col-lg-7 col-offset-lg-1 mb-4"})],1)],1)},i=[],r=n("f7d3"),o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"row cx-header"},[n("div",{staticClass:"col-6 col-xs-8 items-center justify-start"},[n("h1",{staticClass:"header ma-0 pa-0"},[n("mw-button",{attrs:{type:"text",href:t.currentPageURL,icon:t.mwIconWikipediaLogo,"icon-size":32,label:t.$i18n("cx-dashboard-header")}})],1)]),n("div",{staticClass:"col-6 col-xs-4 items-center justify-end"},[n("mw-button",{staticClass:"h-sm-and-down ",attrs:{type:"icon",large:"",icon:t.mwIconBell}}),n("mw-button",{staticClass:"h-sm-and-down",attrs:{type:"icon",large:"",icon:t.mwIconTray}}),n("mw-button",{staticClass:"h-sm-and-down",attrs:{type:"text",large:"",outlined:"",icon:t.mwIconUserAvatar,label:t.username,indicatorSize:18,indicator:t.mwIconExpand}}),n("mw-button",{staticClass:"h-md-and-up me-5",attrs:{type:"icon","icon-size":32,icon:t.mwIconUserAvatar}})],1)])},c=[],u=n("4cf1"),g={name:"cx-header",components:{MwButton:r["a"]},data:function(){return{mwIconWikipediaLogo:u["s"],mwIconBell:u["e"],mwIconTray:u["q"],mwIconExpand:u["i"],mwIconUserAvatar:u["r"]}},computed:{username:function(){return mw.user.getName()},currentPageURL:function(){return"./"+mw.config.get("wgPageName")}}},l=g,d=(n("7275"),n("2877")),m=Object(d["a"])(l,o,c,!1,null,null,null),f=m.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"cx-translation-dashboard"},[n("nav",{staticClass:"h-sm-and-down"},[n("mw-button-group",{attrs:{items:t.listSelector,active:t.active},on:{select:function(e){t.active=e}}})],1),n("cx-suggestion-list",{staticClass:"col-12 pa-0 ma-0",attrs:{sourceLanguage:t.sourceLanguage,targetLanguage:t.targetLanguage,active:"suggestions"===t.active}}),n("cx-translation-list",{staticClass:"col-12 pa-0 ma-0",attrs:{sourceLanguage:t.sourceLanguage,targetLanguage:t.targetLanguage,translationStatus:"published",active:"published"===t.active}}),n("cx-translation-list",{staticClass:"col-12 pa-0 ma-0",attrs:{sourceLanguage:t.sourceLanguage,targetLanguage:t.targetLanguage,translationStatus:"draft",active:"draft"===t.active}}),n("mw-bottom-navigation",{staticClass:"h-md-and-up"},[n("mw-button-group",{attrs:{items:t.listSelector,active:t.active},on:{select:function(e){t.active=e}}})],1)],1)},h=[],w=(n("ac1f"),n("3ca3"),n("841c"),n("2b3d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mw-card",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],class:"cx-translation-list--"+t.translationStatus,attrs:{title:t.$i18n("cx-translation-label-"+t.translationStatus)}},[t.loaded?t._e():n("mw-spinner"),t._l(t.translations,(function(e,a){return n("div",{key:t.translationStatus+"-"+a,staticClass:"row pa-0 ma-0"},[n("cx-translation-work",{staticClass:"col-12 pa-0 ma-0",attrs:{translation:e}})],1)}))],2)}),v=[],S=(n("c975"),n("5e62")),L=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.translation?n("div",{directives:[{name:"show",rawName:"v-show",value:t.translation,expression:"translation"}],staticClass:"row cx-translation pa-4",on:{click:t.onClick}},[n("div",{staticClass:"col-2 pa-2"},[n("mw-thumbnail",{attrs:{thumbnail:t.getImage(t.translation.sourceLanguage,t.translation.sourceTitle)}})],1),n("div",{staticClass:"col-9 pa-2"},[n("div",{staticClass:"row"},[n("span",{staticClass:"col-12 cx-translation__source-title",attrs:{lang:t.translation.sourceLanguage}},[t._v(t._s(t.translation.sourceTitle))]),n("span",{staticClass:"col-12 cx-translation__target-title",attrs:{lang:t.translation.targetLanguage}},[t._v(t._s(t.translation.targetTitle))]),n("span",{staticClass:"col-12 mt-2 cx-translation__languages text-small"},[n("mw-autonym",{attrs:{lang:t.translation.sourceLanguage}}),n("mw-icon",{attrs:{icon:t.mwIconArrowForward}}),n("mw-autonym",{attrs:{lang:t.translation.targetLanguage}})],1)])]),n("div",{staticClass:"col-1 pa-2"},[n("mw-icon",{attrs:{size:24,icon:"published"===t.translation.status?t.mwIconEdit:t.mwIconTrash}})],1)]):t._e()},b=[],x=n("3592"),C=n("5872"),y=n("23cb"),_=n("d4ec"),T=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.sourceLanguage,a=e.targetLanguage,s=e.sourceTitle,i=e.targetTitle,r=e.status,o=e.id,c=e.sourceURL,u=e.targetURL,g=e.startTimestamp,l=e.lastUpdateTimestamp,d=e.progress,m=void 0===d?{}:d,f=e.startedTranslator,p=e.lastUpdatedTranslator,h=e.cxVersion;Object(_["a"])(this,t),this.id=o,this.cxVersion=h,this.sourceLanguage=n,this.targetLanguage=a,this.sourceTitle=s,this.targetTitle=i,this.sourceURL=c,this.targetURL=u,this.progress=m,this.status=r,this.startedTranslator=f,this.lastUpdatedTranslator=p,this.lastUpdateTimestamp=l,this.startTimestamp=g},k={name:"cx-translation-work",data:function(){return{mwIconEdit:u["h"],mwIconTrash:u["p"],mwIconArrowForward:u["b"]}},props:{translation:{type:void 0,required:!0}},components:{MwThumbnail:x["a"],MwAutonym:y["a"],MwIcon:C["a"]},methods:{onClick:function(t){this.$emit("click",t),this.startTranslation(this.translation)},startTranslation:function(t){var e=new mw.cx.SiteMapper;e.setCXToken(t.sourceLanguage,t.targetLanguage,t.sourceTitle),location.href=e.getCXUrl(t.sourceTitle,t.targetTitle,t.sourceLanguage,t.targetLanguage,{campaign:(new mw.Uri).query.campaign})},getPage:function(t,e){return this.$store.getters["mediawiki/getPage"](t,e)},getImage:function(t,e){var n=this.getPage(t,e);return null===n||void 0===n?void 0:n.thumbnail}}},I=k,j=(n("69ee"),Object(d["a"])(I,L,b,!1,null,null,null)),O=j.exports,P=n("3d5e"),$={name:"cx-translation-list",components:{CxTranslationWork:O,MwCard:S["a"],MwSpinner:P["a"]},props:{active:{type:Boolean,default:!1},translationStatus:{type:String,validator:function(t){return-1!==["published","draft"].indexOf(t)}},sourceLanguage:{type:String,default:"en"},targetLanguage:{type:String}},data:function(){return{loaded:!1}},computed:{translations:function(){return"published"===this.translationStatus?this.$store.getters["translator/getPublishedTranslations"]():this.$store.getters["translator/getDraftTranslations"]()}},watch:{translations:function(){this.loaded=!0}}},A=$,R=Object(d["a"])(A,w,v,!1,null,null,null),M=R.exports,F=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}]},[n("mw-card",{staticClass:"cx-translation-list--suggestions",attrs:{title:t.$i18n("cx-suggestionlist-title")}},[t.pageSuggestionsLoaded?t._e():n("mw-spinner"),t._l(t.pageSuggestionsForPairSubset,(function(e,a){return n("div",{key:"suggestion-"+a,staticClass:"row pa-0 ma-0"},[n("cx-translation-suggestion",{staticClass:"col-12 pa-0 ma-0",attrs:{suggestion:e,from:t.sourceLanguage,to:t.targetLanguage}})],1)}))],2),t.sectionSuggestionForPair.length?n("mw-card",{staticClass:"cx-translation-list--sx-suggestions",attrs:{title:t.$i18n("cx-suggestionlist-expand-sections-title")}},[t.sectionSuggestionsLoaded?t._e():n("mw-spinner"),t._l(t.sectionSuggestionForPair,(function(e,a){return n("div",{key:"suggestion-"+a,staticClass:"row pa-0 ma-0"},[n("cx-translation-suggestion",{staticClass:"col-12 pa-0 ma-0",attrs:{suggestion:e,from:e.sourceLanguage,to:e.targetLanguage},on:{click:function(n){return t.startSectionTranslation(e)}}})],1)}))],2):t._e(),t.pageSuggestionsLoaded?n("mw-button",{attrs:{block:!0,label:t.$i18n("cx-suggestionlist-refresh"),outlined:!1,icon:t.mwIconRefresh},on:{click:t.reloadSuggestions}}):t._e(),t.currentSectionSuggestion?n("sx-article-selector",{attrs:{active:t.showSxArticleSelector},on:{close:t.onSectionTranslationDialogClose}}):t._e()],1)},U=[],N=(n("fb6a"),n("5530")),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.suggestion?n("div",{staticClass:"row cx-suggestion pa-4",on:{click:t.handleClick}},[n("div",{staticClass:"col-2 pa-2"},[n("mw-thumbnail",{attrs:{thumbnail:t.page&&t.page.thumbnail}})],1),n("div",{staticClass:"col-9 pa-2"},[n("div",{staticClass:"row ma-0"},[n("span",{staticClass:"col-12 cx-suggestion__source-title",attrs:{lang:t.suggestion.sourceLanguage}},[t._v(t._s(t.suggestion.sourceTitle))]),n("span",{staticClass:"col-12 cx-suggestion__source-description",attrs:{lang:t.suggestion.sourceLanguage}},[t._v(t._s(t.page&&t.page.description))]),n("span",{staticClass:"col-12 mt-2 cx-suggestion__languages text-small"},[n("mw-autonym",{attrs:{lang:t.suggestion.sourceLanguage}}),n("mw-icon",{attrs:{icon:t.mwIconArrowForward}}),n("mw-autonym",{attrs:{lang:t.suggestion.targetLanguage}})],1)])]),n("div",{staticClass:"col-1 pa-2"},[n("mw-icon",{attrs:{icon:t.mwIconStar,size:24}})],1)]):t._e()},E=[],B=(n("99af"),n("bee2")),q=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.sourceLanguage,a=e.targetLanguage,s=e.sourceTitle,i=e.targetTitle,r=e.pageViews,o=e.wikidataId,c=e.rank;Object(_["a"])(this,t),this.sourceLanguage=n,this.targetLanguage=a,this.sourceTitle=s,this.targetTitle=i,this.wikidataId=o,this.pageViews=r,this.rank=c}return Object(B["a"])(t,[{key:"id",get:function(){return"".concat(this.sourceLanguage,"/").concat(this.targetLanguage,"/").concat(this.sourceTitle)}}]),t}(),z={name:"TranslationSuggestion",data:function(){return{mwIconStar:u["o"],mwIconArrowForward:u["b"]}},props:{suggestion:{type:void 0}},components:{MwThumbnail:x["a"],MwAutonym:y["a"],MwIcon:C["a"]},computed:{page:function(){return this.$store.getters["mediawiki/getPage"](this.suggestion.sourceLanguage,this.suggestion.sourceTitle)}},methods:{handleClick:function(t){this.$emit("click",t)}}},V=z,X=(n("46f8"),Object(d["a"])(V,D,E,!1,null,null,null)),G=X.exports,W=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mw-dialog",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],staticClass:"sx-article-selector",attrs:{fullscreen:!0},on:{close:function(e){return t.onClose()}}},[n("template",{slot:"header"},[n("div",{staticClass:"row justify-end sx-article-selector__header"},[n("div",{staticClass:"col-1"},[n("mw-thumbnail",{attrs:{thumbnail:t.sourceArticleThumbnail}})],1),n("div",{staticClass:"col-9"},[n("div",{},[t._v(t._s(t.sourceTitle))]),n("div",{staticClass:"sx-article-selector__langLinksCount"},[n("mw-icon",{attrs:{icon:t.mwIconLanguage}}),t._v(" "+t._s(t.langLinksCount)+" ")],1)]),n("div",{staticClass:"col-2 justify-center items-start"},[n("mw-button",{staticClass:"pa-0",attrs:{type:"icon",large:!0,icon:t.mwIconBookmarkOutline}}),n("mw-button",{staticClass:"pa-0",attrs:{type:"icon",large:!0,icon:t.mwIconClose},on:{click:function(e){return t.onClose()}}})],1)])]),n("div",{staticClass:"sx-article-selector__body"},[n("sx-article-language-selector"),n("mw-divider"),n("div",{staticClass:"row sx-article-selector__action justify-center mt-8 mb-8"},[n("mw-button",{staticClass:"col-8",attrs:{large:!0,progressive:!0,disabled:0===t.missingSectionsCount,label:t.$i18n("cx-sx-select-section")},on:{click:function(e){return t.onSectionSelectorClick()}}})],1),t.missingSectionsCount?n("div",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-missing-section-stats",value:[t.missingSectionsCount,t.getAutonym(this.targetLanguage)],expression:"[\n        missingSectionsCount,\n        getAutonym(this.targetLanguage)\n      ]",arg:"cx-sx-missing-section-stats"}],staticClass:"row sx-article-selector__action justify-center mt-8 mb-8"}):t._e(),n("div",{staticClass:"row sx-article-selector__license justify-center ma-0"},[n("p",{directives:[{name:"i18n-html",rawName:"v-i18n-html:cx-license-agreement",arg:"cx-license-agreement"}],staticClass:"pa-2"})])],1),t.currentSectionSuggestion?n("sx-section-selector",{attrs:{active:t.showSectionTranslation,suggestion:t.currentSectionSuggestion},on:{close:t.onSectionSelectorDialogClose}}):t._e()],2)},J=[],H=(n("25f0"),n("2f62")),K=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mw-dialog",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],staticClass:"sx-selector",attrs:{animation:"slide-up",fullscreen:!0},on:{close:function(e){return t.onClose()}}},[n("template",{slot:"header"},[n("div",{staticClass:"row justify-end sx-selector__header"},[n("div",{staticClass:"col-11"},[n("h3",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-title",arg:"cx-sx-section-selector-title"}],staticClass:"sx-selector__header-text ma-0"}),n("h2",{staticClass:"sx-selector__title ma-0"},[t._v(t._s(t.suggestion.sourceTitle))])]),n("div",{staticClass:"col-1 justify-end items-center"},[n("mw-button",{staticClass:"pa-0",attrs:{large:!0,type:"icon",icon:t.mwIconClose},on:{click:function(e){return t.onClose()}}})],1)])]),n("div",{staticClass:"sx-selector__body"},[n("h3",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-subtitle",arg:"cx-sx-section-selector-subtitle"}],staticClass:"row justify-start ps-1"}),n("p",{directives:[{name:"i18n",rawName:"v-i18n:cx-sx-section-selector-desc",arg:"cx-sx-section-selector-desc"}],staticClass:"row justify-start ps-1"}),n("ul",{staticClass:"sx-selector__missing-sections-list ma-0"},t._l(t.suggestion.missingSections,(function(e,a){return n("li",{key:a,staticClass:"row"},[n("mw-button",{staticClass:"col-12 justify-between",attrs:{indicator:t.mwIconArrowForward,label:a,type:"text",outlined:!1,block:!0}})],1)})),0)])],2)},Q=[],Y=n("a88b"),Z=(n("b64b"),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.sourceLanguage,a=e.targetLanguage,s=e.sourceTitle,i=e.targetTitle,r=e.present,o=e.missing,c=e.availableSourceLanguages;Object(_["a"])(this,t),this.sourceLanguage=n,this.targetLanguage=a,this.sourceTitle=s,this.targetTitle=i,this.missingSections=o,this.presentSections=r,this.availableSourceLanguages=c||[]}return Object(B["a"])(t,[{key:"missingSectionsCount",get:function(){return Object.keys(this.missingSections).length}}]),t}()),tt={name:"sx-section-selector",components:{MwDialog:Y["a"],MwButton:r["a"]},data:function(){return{mwIconClose:u["g"],mwIconArrowForward:u["b"]}},props:{active:{type:Boolean,default:!1},suggestion:{type:void 0}},methods:{onClose:function(){this.$emit("close")},onSectionSelectorClick:function(){this.$emit("section-selector-button-click"),this.$emit("section-listing-open")}}},et=tt,nt=(n("7ece"),Object(d["a"])(et,K,Q,!1,null,null,null)),at=nt.exports,st=n("29b6"),it=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row sx-article-language-selector ma-0 justify-center"},[n("div",{staticClass:"col-5 justify-end"},[n("mw-button",{staticClass:"pa-3 sx-article-language-selector__button",attrs:{indicator:t.mwIconExpand,large:!0,outlined:!1,type:"text"},on:{click:t.openSourceLanguageDialog}},[n("mw-autonym",{attrs:{lang:t.sourceLanguage}})],1),n("mw-dialog",{directives:[{name:"show",rawName:"v-show",value:t.sourceLanguageSelectOn,expression:"sourceLanguageSelectOn"}],attrs:{title:t.$i18n("cx-sx-language-selector-dialog-title"),animation:"slide-up",fullscreen:!0},on:{close:t.onSourceLanguageDialogClose}},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-12"},[t.sourceLanguageSelectOn?n("mw-language-selector",{staticClass:"sx-article-language-selector__widget",attrs:{languages:t.availableSourceLanguages},on:{select:t.onSourceLanguageSelected}}):t._e()],1)])])],1),n("div",{staticClass:"sx-article-language-selector__arrow col-2 justify-center"},[n("mw-icon",{attrs:{icon:t.mwIconArrowNext}})],1),n("div",{staticClass:"col-5 justify-start"},[n("mw-button",{staticClass:"pa-3 sx-article-language-selector__button",attrs:{indicator:t.mwIconExpand,large:!0,outlined:!1,type:"text"},on:{click:function(e){t.targetLanguageSelectOn=!0}}},[n("mw-autonym",{attrs:{lang:t.targetLanguage}})],1),n("mw-dialog",{directives:[{name:"show",rawName:"v-show",value:t.targetLanguageSelectOn,expression:"targetLanguageSelectOn"}],attrs:{title:t.$i18n("cx-sx-language-selector-dialog-title"),animation:"slide-up",fullscreen:!0},on:{close:function(e){t.targetLanguageSelectOn=!1}}},[t.targetLanguageSelectOn?n("mw-language-selector",{staticClass:"sx-article-language-selector__widget",attrs:{languages:t.targetLanguages},on:{select:t.onTargetLanguageSelected}}):t._e()],1)],1)])},rt=[],ot=(n("4de4"),n("d81d"),n("13d5"),n("2909")),ct=n("7960"),ut={name:"sx-article-language-selector",components:{MwLanguageSelector:ct["a"],MwDialog:Y["a"],MwIcon:C["a"],MwAutonym:y["a"],MwButton:r["a"]},data:function(){return{MwDivider:st["a"],mwIconArrowNext:u["c"],mwIconExpand:u["i"],sourceLanguageSelectOn:!1,targetLanguageSelectOn:!1}},computed:Object(N["a"])(Object(N["a"])({},Object(H["b"])({languageInfo:function(t){return t.mediawiki.languageInfo},currentSectionSuggestion:function(t){return t.suggestions.currentSectionSuggestion},supportedLanguageCodes:function(t){return t.mediawiki.supportedLanguageCodes||[]}})),{},{availableSourceLanguages:function(){var t,e=this;return null===(t=this.currentSectionSuggestion)||void 0===t?void 0:t.availableSourceLanguages.filter((function(t){return t!==e.sourceLanguage})).map((function(t){return{name:e.autonym(t),code:t}}))},sourceLanguage:function(){var t;return null===(t=this.currentSectionSuggestion)||void 0===t?void 0:t.sourceLanguage},targetLanguage:function(){var t;return null===(t=this.currentSectionSuggestion)||void 0===t?void 0:t.targetLanguage},sourceTitle:function(){var t;return null===(t=this.currentSectionSuggestion)||void 0===t?void 0:t.sourceTitle},targetLanguages:function(){var t=this;return this.supportedLanguageCodes.filter((function(e){return e!==t.sourceLanguage})).reduce((function(e,n){return[].concat(Object(ot["a"])(e),[{name:t.autonym(n),code:n}])}),[])}}),created:function(){this.$store.dispatch("suggestions/getAvailableSourceLanguagesForSectionSuggestion")},methods:{openSourceLanguageDialog:function(){this.sourceLanguageSelectOn=!0},autonym:function(t){var e;return(null===(e=this.languageInfo[t])||void 0===e?void 0:e.autonym)||t},onSourceLanguageSelected:function(t){this.$store.commit("suggestions/setCurrentSectionSuggestionSourceLanguage",t),t===this.targetLanguage&&this.$store.commit("suggestions/setCurrentSectionSuggestionTargetLanguage",null),this.sourceLanguageSelectOn=!1},onTargetLanguageSelected:function(t){this.$store.commit("suggestions/setCurrentSectionSuggestionTargetLanguage",t),this.targetLanguageSelectOn=!1},onSourceLanguageDialogClose:function(){this.sourceLanguageSelectOn=!1}}},gt=ut,lt=Object(d["a"])(gt,it,rt,!1,null,null,null),dt=lt.exports,mt={name:"sx-article-selector",components:{MwDialog:Y["a"],MwDivider:st["a"],MwIcon:C["a"],MwThumbnail:x["a"],SxSectionSelector:at,SxArticleLanguageSelector:dt,MwButton:r["a"]},data:function(){return{mwIconClose:u["g"],mwIconExpand:u["i"],mwIconLanguage:u["k"],mwIconBookmarkOutline:u["f"],MwDivider:st["a"],mwIconArrowNext:u["c"],showSectionTranslation:!1}},props:{active:{type:Boolean,default:!1}},computed:Object(N["a"])(Object(N["a"])({},Object(H["b"])({languageInfo:function(t){return t.mediawiki.languageInfo},currentSectionSuggestion:function(t){return t.suggestions.currentSectionSuggestion}})),{},{langLinksCount:function(){var t;return null===(t=this.sourceArticle)||void 0===t?void 0:t.langLinksCount},sourceArticle:function(){return this.$store.getters["mediawiki/getPage"](this.sourceLanguage,this.sourceTitle)},sourceLanguage:function(){var t;return null===(t=this.currentSectionSuggestion)||void 0===t?void 0:t.sourceLanguage},sourceTitle:function(){var t;return null===(t=this.currentSectionSuggestion)||void 0===t?void 0:t.sourceTitle},targetLanguage:function(){var t;return null===(t=this.currentSectionSuggestion)||void 0===t?void 0:t.targetLanguage},missingSectionsCount:function(){var t;return null===(t=this.currentSectionSuggestion)||void 0===t?void 0:t.missingSectionsCount},sourceArticleThumbnail:function(){var t;return null===(t=this.sourceArticle)||void 0===t?void 0:t.thumbnail}}),methods:{getAutonym:function(t){var e,n=Intl.DisplayNames&&new Intl.DisplayNames(t);return(null===(e=this.languageInfo[t])||void 0===e?void 0:e.autonym)||(null===n||void 0===n?void 0:n.of(t))||t},onClose:function(){this.$emit("close")},setURLParams:function(){if(history.pushState){var t=new URL(location.href),e=new URLSearchParams(location.search);e.set("page",this.sourceTitle),e.set("from",this.sourceLanguage),e.set("to",this.targetLanguage),e.set("sx",!0),t.search=e,t=t.toString(),history.replaceState({url:t},null,t)}},onSectionSelectorClick:function(){this.$emit("section-translation-article-select"),this.showSectionTranslation=!0,this.setURLParams(),this.$emit("section-listing-open")},onSectionSelectorDialogClose:function(){this.showSectionTranslation=!1,this.$emit("section-listing-close"),this.$emit("close")}}},ft=mt,pt=(n("93c3"),Object(d["a"])(ft,W,J,!1,null,null,null)),ht=pt.exports,wt={name:"cx-suggestion-list",components:{CxTranslationSuggestion:G,SxArticleSelector:ht,MwCard:S["a"],MwButton:r["a"],MwSpinner:P["a"]},props:{active:{type:Boolean,default:!1},sourceLanguage:{type:String,default:"en"},targetLanguage:{type:String}},data:function(){return{mwIconRefresh:u["m"],pageSuggestionsLoaded:!1,sectionSuggestionsLoaded:!0,showSxArticleSelector:!1,startIndex:0,endIndex:3}},computed:Object(N["a"])(Object(N["a"])({},Object(H["b"])({currentSectionSuggestion:function(t){return t.suggestions.currentSectionSuggestion}})),{},{pageSuggestionsForPair:function(){return this.$store.getters["suggestions/getPageSuggestionsForPair"](this.sourceLanguage,this.targetLanguage)},sectionSuggestionForPair:function(){return this.$store.getters["suggestions/getSectionSuggestionsForPair"](this.sourceLanguage,this.targetLanguage)},pageSuggestionsForPairSubset:function(){return this.pageSuggestionsForPair.slice(this.startIndex,this.endIndex)}}),watch:{pageSuggestionsForPair:function(){this.pageSuggestionsLoaded=!0},sectionSuggestionForPair:function(){this.sectionSuggestionsLoaded=!0},active:function(){var t,e;this.active&&((null===(t=this.pageSuggestionsForPair)||void 0===t?void 0:t.length)||this.$store.dispatch("suggestions/getPageSuggestions",{sourceLanguage:this.sourceLanguage,targetLanguage:this.targetLanguage}),(null===(e=this.sectionSuggestionForPair)||void 0===e?void 0:e.length)||this.$store.dispatch("suggestions/getSectionSuggestions",{sourceLanguage:this.sourceLanguage,targetLanguage:this.targetLanguage}))}},methods:{reloadSuggestions:function(){this.startIndex+=this.endIndex,this.endIndex+=this.endIndex,this.pageSuggestionsForPair.length<=this.startIndex&&(this.startIndex=0,this.endIndex=3)},startSectionTranslation:function(t){this.showSxArticleSelector=!0,this.$store.commit("suggestions/setCurrentSectionSuggestion",t)},onSectionTranslationDialogClose:function(){this.showSxArticleSelector=!1}},mounted:function(){var t=this,e=new URLSearchParams(location.search),n=e.get("sx"),a=e.get("from"),s=e.get("to"),i=e.get("page");n&&i&&(this.$store.dispatch("suggestions/getSectionSuggestionsForArticle",{sourceLanguage:a,targetLanguage:s,sourceTitle:i}).then((function(){var e=t.$store.getters["suggestions/getSectionSuggestionsForArticle"](a,s,i);t.startSectionTranslation(e)})),this.startSectionTranslation(new Z({sourceLanguage:a,targetLanguage:s,sourceTitle:i,missing:{}})))}},vt=wt,St=Object(d["a"])(vt,F,U,!1,null,null,null),Lt=St.exports,bt=n("b1ab"),xt=n("703d"),Ct={name:"cx-dashboard",components:{CxSuggestionList:Lt,CxTranslationList:M,MwButtonGroup:bt["a"],MwBottomNavigation:xt["a"]},data:function(){return{mwIconArticleCheck:u["d"],mwIconLightBulb:u["l"],mwIconEdit:u["h"],suggestionsLoaded:!1,publishedTranslationsLoaded:!1,draftTranslationsLoaded:!1,active:"draft",sourceLanguage:"en",targetLanguage:"ml"}},computed:{listSelector:function(){return[{value:"suggestions",props:{label:this.$i18n("cx-translation-filter-suggested-translations"),icon:u["l"],type:"text"}},{value:"draft",props:{label:this.$i18n("cx-translation-filter-draft-translations"),icon:u["h"],type:"text"}},{value:"published",props:{label:this.$i18n("cx-translation-filter-published-translations"),icon:u["d"],type:"text"}}]}},watch:{active:function(){window.scrollTo(0,0)}},mounted:function(){var t=new URLSearchParams(window.location.search),e=t.get("sx");e&&(this.active="suggestions")},created:function(){this.$store.dispatch("translator/init"),this.$store.dispatch("mediawiki/fetchLanguageInfo"),this.$store.dispatch("mediawiki/fetchSupportedLanguageCodes")}},yt=Ct,_t=Object(d["a"])(yt,p,h,!1,null,null,null),Tt=_t.exports,kt=(n("1421"),{name:"cx-dashboard-app",components:{MwButton:r["a"],CxHeader:f,CxDashboard:Tt},data:function(){return{mwIconAdd:u["a"]}}}),It=kt,jt=(n("7c55"),Object(d["a"])(It,s,i,!1,null,null,null)),Ot=jt.exports,Pt=(n("96cf"),n("1da1")),$t=n("bc3a"),At=n.n($t);function Rt(t){return Mt.apply(this,arguments)}function Mt(){return Mt=Object(Pt["a"])(regeneratorRuntime.mark((function t(e){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={action:"query",format:"json",assert:"user",formatversion:2,list:"contenttranslation"},a=mw.util.wikiScript("api"),e&&(n["offset"]=e),t.abrupt("return",At()({method:"get",url:a,params:n,withCredentials:!0}).then(function(){var t=Object(Pt["a"])(regeneratorRuntime.mark((function t(e){var n,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.data.query.contenttranslation.translations,s=a.map((function(t){return new T(t.translation)})),!(null===(n=e.data.continue)||void 0===n?void 0:n.offset)){t.next=7;break}return t.next=5,Rt(e.data.continue.offset);case 5:i=t.sent,s=s.concat(i);case 7:return t.abrupt("return",s);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 4:case"end":return t.stop()}}),t)}))),Mt.apply(this,arguments)}var Ft={fetchTranslations:Rt},Ut={username:mw.config.get("wgUserName"),translations:[]},Nt={addTranslation:function(t,e){t.translations.push(e)}},Dt={getPublishedTranslationsForLanguagePair:function(t){return function(e,n){return t.translations.filter((function(t){return t.sourceLanguage===e&&t.targetLanguage===n&&"published"===t.status}))}},getDraftTranslationsForLanguagePair:function(t){return function(e,n){return t.translations.filter((function(t){return t.sourceLanguage===e&&t.targetLanguage===n&&"draft"===t.status}))}},getPublishedTranslations:function(t){return function(){return t.translations.filter((function(t){return"published"===t.status}))}},getDraftTranslations:function(t){return function(){return t.translations.filter((function(t){return"draft"===t.status}))}}},Et={init:function(t){var e=t.dispatch;e("getTanslations")},getTanslations:function(t){var e=t.commit,n=t.dispatch;Ft.fetchTranslations().then((function(t){for(var a={},s=0;s<t.length;s++){var i=t[s];e("addTranslation",i),a[i.sourceLanguage]=a[i.sourceLanguage]||[],a[i.sourceLanguage].push(i.sourceTitle)}for(var r in a)n("mediawiki/fetchPage",{language:r,titles:a[r]},{root:!0})}))}},Bt={namespaced:!0,state:Ut,getters:Dt,actions:Et,mutations:Nt};n("7db0"),n("5319");function qt(t,e,n){return zt.apply(this,arguments)}function zt(){return zt=Object(Pt["a"])(regeneratorRuntime.mark((function t(e,n,a){var s,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s={source:e,target:n,seed:a,search:"related_articles",application:"CX"},i=mw.config.get("wgRecommendToolAPIURL"),t.next=4,At.a.get(i,{params:s}).then((function(t){return t.data}));case 4:return r=t.sent,t.abrupt("return",r.map((function(t){return new q({sourceTitle:t.title.replace(/_/g," "),sourceLanguage:e,targetLanguage:n,wikidataId:t.wikidata_id,pageViews:t.pageviews,rank:t.rank})})));case 6:case"end":return t.stop()}}),t)}))),zt.apply(this,arguments)}function Vt(t,e,n){return Xt.apply(this,arguments)}function Xt(){return Xt=Object(Pt["a"])(regeneratorRuntime.mark((function t(e,n,a){var s,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new mw.cx.SiteMapper,i=s.getCXServerUrl("/suggest/sections/".concat(n,"/").concat(e,"/").concat(a)),t.next=4,At.a.get(i).then((function(t){var e;return null===(e=t.data)||void 0===e?void 0:e.sections}));case 4:return r=t.sent,t.abrupt("return",new Z(r));case 6:case"end":return t.stop()}}),t)}))),Xt.apply(this,arguments)}function Gt(t){return Wt.apply(this,arguments)}function Wt(){return Wt=Object(Pt["a"])(regeneratorRuntime.mark((function t(e){var n,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=[],a=0;case 2:if(!(a<e.length)){t.next=13;break}return s=e[a],t.next=6,Vt(s.sourceLanguage,s.sourceTitle,s.targetLanguage);case 6:if(i=t.sent,n.push(i),5!==n.length){t.next=10;break}return t.abrupt("break",13);case 10:a++,t.next=2;break;case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}}),t)}))),Wt.apply(this,arguments)}var Jt={fetchSuggestions:qt,fetchSectionSuggestions:Vt,getSxSuggestionsFromPublishedArticles:Gt},Ht=(n("a15b"),n("dca8"),n("a4d3"),n("e01a"),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.description,a=e.langlinkscount,s=e.lastrevid,i=e.original,r=e.pageid,o=e.pagelanguage,c=e.pageprops,u=e.pageviews,g=e.thumbnail,l=e.title,d=e._alias;Object(_["a"])(this,t),this.language=o,this.title=l,this.pageId=r,this.description=n,this.image=i,this.pageprops=c,this.pageviews=u,this.thumbnail=g,this.langLinksCount=a,this.revision=s,this.alias=d}return Object(B["a"])(t,[{key:"id",get:function(){return"".concat(this.language,"/").concat(this.title)}}]),t}());function Kt(t,e){var n={action:"query",format:"json",formatversion:2,prop:"info|pageprops|pageimages|description|pageviews|langlinkscount",pvipdays:7,piprop:"thumbnail|name|original",pithumbsize:100,titles:e.join("|"),origin:"*",redirects:!0},a="https://".concat(t,".wikipedia.org/w/api.php");return At.a.get(a,{params:n}).then((function(t){var e=t.data.query.pages,n=t.data.query.redirects||[],a={};return n.map((function(t){a[t.to]=t.from})),e.map((function(t){return a[t.title]&&(t._alias=a[t.title]),Object.freeze(new Ht(t))}))}))}function Qt(t,e){return Yt.apply(this,arguments)}function Yt(){return Yt=Object(Pt["a"])(regeneratorRuntime.mark((function t(e,n){var a,s,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a={action:"query",prop:"langlinks",format:"json",formatversion:2,origin:"*",titles:e,redirects:!0},s="https://".concat(n,".wikipedia.org/w/api.php"),t.next=4,At.a.get(s,{params:a}).then((function(t){return t.data.query.pages[0]})).then((function(t){return(null===t||void 0===t?void 0:t.langlinks)||[]}));case 4:return i=t.sent,r=i.map((function(t){return t.lang})),r.unshift(n),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)}))),Yt.apply(this,arguments)}var Zt={fetchMetadata:Kt,fetchAvailableSourceLanguagesForPage:Qt},te={pageSuggestions:[],sectionSuggestions:[],favorites:{},currentSectionSuggestion:null},ee={addPageSuggestion:function(t,e){t.pageSuggestions.push(e)},addSectionSuggestion:function(t,e){t.sectionSuggestions.push(e)},setCurrentSectionSuggestion:function(t,e){t.currentSectionSuggestion=e},setCurrentSectionSuggestionAvailableSourceLanguages:function(t,e){t.currentSectionSuggestion.availableSourceLanguages=e},setCurrentSectionSuggestionSourceLanguage:function(t,e){t.currentSectionSuggestion.sourceLanguage=e},setCurrentSectionSuggestionTargetLanguage:function(t,e){t.currentSectionSuggestion.targetLanguage=e}},ne={getPageSuggestionsForPair:function(t){return function(e,n){return t.pageSuggestions.filter((function(t){return t.sourceLanguage===e&&t.targetLanguage===n}))}},getSectionSuggestionsForPair:function(t){return function(e,n){return t.sectionSuggestions.filter((function(t){return t.sourceLanguage===e&&t.targetLanguage===n}))}},getSectionSuggestionsForArticle:function(t){return function(e,n,a){return t.sectionSuggestions.find((function(t){return t.sourceLanguage===e&&t.targetLanguage===n&&t.sourceTitle===a}))}}},ae={getPageSuggestions:function(t,e){var n=t.commit,a=t.dispatch;Jt.fetchSuggestions(e.sourceLanguage,e.targetLanguage,e.seeds).then((function(t){for(var s=[],i=0;i<t.length;i++)n("addPageSuggestion",t[i]),s.push(t[i].sourceTitle);s.length&&a("mediawiki/fetchPage",{language:e.sourceLanguage,titles:s},{root:!0})}))},getSectionSuggestions:function(t,e){return Object(Pt["a"])(regeneratorRuntime.mark((function n(){var a,s,i,r,o,c,u;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.commit,s=t.dispatch,i=t.rootGetters,r=[],o=i["translator/getPublishedTranslationsForLanguagePair"](e.sourceLanguage,e.targetLanguage),n.next=5,Jt.getSxSuggestionsFromPublishedArticles(o);case 5:for(c=n.sent,u=0;u<c.length;u++)a("addSectionSuggestion",c[u]),r.push(c[u].sourceTitle);r.length&&s("mediawiki/fetchPage",{language:e.sourceLanguage,titles:r},{root:!0});case 8:case"end":return n.stop()}}),n)})))()},getSectionSuggestionsForArticle:function(t,e){return Object(Pt["a"])(regeneratorRuntime.mark((function n(){var a,s,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return a=t.commit,s=t.dispatch,t.rootGetters,n.next=3,Jt.fetchSectionSuggestions(e.sourceLanguage,e.sourceTitle,e.targetLanguage);case 3:i=n.sent,a("addSectionSuggestion",i),s("mediawiki/fetchPage",{language:e.sourceLanguage,titles:[e.sourceTitle]},{root:!0});case 6:case"end":return n.stop()}}),n)})))()},getAvailableSourceLanguagesForSectionSuggestion:function(t){return Object(Pt["a"])(regeneratorRuntime.mark((function e(){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,a=t.state,e.next=3,Zt.fetchAvailableSourceLanguagesForPage(a.currentSectionSuggestion.sourceTitle,a.currentSectionSuggestion.sourceLanguage);case 3:s=e.sent,n("setCurrentSectionSuggestionAvailableSourceLanguages",s);case 5:case"end":return e.stop()}}),e)})))()}},se={namespaced:!0,state:te,getters:ne,actions:ae,mutations:ee};function ie(t){var e={action:"query",format:"json",formatversion:2,meta:"languageinfo",liprop:"autonym|dir",origin:"*"};return t&&(e["licontinue"]=t),At.a.get(mw.util.wikiScript("api"),{params:e}).then(function(){var t=Object(Pt["a"])(regeneratorRuntime.mark((function t(e){var n,a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=null===(n=e.data.continue)||void 0===n?void 0:n.licontinue,s=e.data.query.languageinfo,!a){t.next=10;break}return t.t0=Object,t.t1={},t.t2=s,t.next=8,ie(a);case 8:t.t3=t.sent,s=t.t0.assign.call(t.t0,t.t1,t.t2,t.t3);case 10:return t.abrupt("return",s);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function re(){return oe.apply(this,arguments)}function oe(){return oe=Object(Pt["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e="https://cxserver.wikimedia.org/v1/list/languagepairs",t.next=3,At.a.get(e,{origin:"*"}).then((function(t){return t.data.source}));case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)}))),oe.apply(this,arguments)}var ce={fetchLanguageInfo:ie,fetchSupportedLanguageCodes:re},ue={pages:[],languageInfo:{},supportedLanguageCodes:[]},ge={addPage:function(t,e){t.pages.push(e)},setLanguageInfo:function(t,e){t.languageInfo=e},setSupportedLanguageCodes:function(t,e){t.supportedLanguageCodes=e}},le={getPage:function(t){return function(e,n){return t.pages.find((function(t){return t.language===e&&(t.title===n||t.alias===n)}))}}},de={fetchPage:function(t,e){for(var n=t.commit,a=e.titles,s=50,i=0;i<a.length;i+=s){var r=a.slice(i,i+s);Zt.fetchMetadata(e.language,r).then((function(t){for(var e=0;e<t.length;e++)n("addPage",t[e])}))}},fetchLanguageInfo:function(t,e){var n=t.commit;ce.fetchLanguageInfo().then((function(t){n("setLanguageInfo",t)}))},fetchSupportedLanguageCodes:function(t){var e=t.commit;ce.fetchSupportedLanguageCodes().then((function(t){e("setSupportedLanguageCodes",t)}))}},me={namespaced:!0,state:ue,getters:le,actions:de,mutations:ge};a["a"].use(H["a"]);var fe=new H["a"].Store({modules:{translator:Bt,suggestions:se,mediawiki:me}}),pe=n("5093"),he=n.n(pe),we=mw.config.get("wgUserLanguage"),ve="en",Se=mw.messages.values||{};a["a"].use(he.a,{locale:we,finalFallback:ve,messages:Se}),new a["a"]({store:fe,render:function(t){return t(Ot)},el:"#cxdashboard"})},"69ee":function(t,e,n){"use strict";var a=n("7b46"),s=n.n(a);s.a},7275:function(t,e,n){"use strict";var a=n("a2f6"),s=n.n(a);s.a},"7b46":function(t,e,n){},"7c55":function(t,e,n){"use strict";var a=n("2395"),s=n.n(a);s.a},"7ece":function(t,e,n){"use strict";var a=n("be16"),s=n.n(a);s.a},"93c3":function(t,e,n){"use strict";var a=n("0f8f"),s=n.n(a);s.a},a2f6:function(t,e,n){},be16:function(t,e,n){},e243:function(t,e,n){}});
//# sourceMappingURL=cxdashboard.js.map
(function(t){function e(e){for(var a,o,r=e[0],c=e[1],u=e[2],g=0,d=[];g<r.length;g++)o=r[g],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],a=!0,r=1;r<n.length;r++){var c=n[r];0!==s[c]&&(a=!1)}a&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},s={dashboard:0},i=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var u=0;u<r.length;u++)e(r[u]);var l=c;i.push([0,"cxdashboard.libs","mediawiki.ui"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0f8f":function(t,e,n){},2395:function(t,e,n){},"46f8":function(t,e,n){"use strict";var a=n("e243"),s=n.n(a);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("d3b7"),n("ddb0"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container",attrs:{id:"cxdashboard"}},[n("cx-header"),n("section",{staticClass:"row cx-translation-header"},[n("mw-button",{staticClass:"col-md-4 col-xs-12 col-lg-3 col-offset-lg-1 mb-4 mt-4",attrs:{progressive:"",large:"",icon:t.mwIconAdd,label:t.$i18n("cx-create-new-translation")}})],1),n("section",{staticClass:"row cx-translation-dashboard-container"},[n("cx-dashboard",{staticClass:"col-xs-12 col-md-8 col-lg-7 col-offset-lg-1 mb-4"})],1)],1)},i=[],o=n("f7d3"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"row cx-header"},[n("div",{staticClass:"col-6 col-xs-8 items-center justify-start"},[n("h1",{staticClass:"header ma-0 pa-0"},[n("mw-button",{attrs:{type:"text",href:t.currentPageURL,icon:t.mwIconWikipediaLogo,"icon-size":32,label:t.$i18n("cx-dashboard-header")}})],1)]),n("div",{staticClass:"col-6 col-xs-4 items-center justify-end"},[n("mw-button",{staticClass:"d-xs-only-none d-sm-only-none",attrs:{type:"icon",large:"",icon:t.mwIconBell}}),n("mw-button",{staticClass:"d-xs-only-none d-sm-only-none",attrs:{type:"icon",large:"",icon:t.mwIconTray}}),n("mw-button",{staticClass:"d-xs-only-none d-sm-only-none",attrs:{type:"text",large:"",outlined:"",icon:t.mwIconUserAvatar,label:t.username,indicatorSize:18,indicator:t.mwIconExpand}}),n("mw-button",{staticClass:"d-xs-only-flex d-sm-only-flex d-none me-5",attrs:{type:"icon","icon-size":32,icon:t.mwIconUserAvatar}})],1)])},c=[],u=n("4cf1"),l={name:"cx-header",components:{MwButton:o["a"]},data:function(){return{mwIconWikipediaLogo:u["r"],mwIconBell:u["e"],mwIconTray:u["p"],mwIconExpand:u["i"],mwIconUserAvatar:u["q"]}},computed:{username:function(){return mw.user.getName()},currentPageURL:function(){return"./"+mw.config.get("wgPageName")}}},g=l,d=(n("7275"),n("2877")),m=Object(d["a"])(g,r,c,!1,null,null,null),f=m.exports,h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"cx-translation-dashboard"},[n("nav",{staticClass:"d-xs-only-none d-sm-only-none"},[n("mw-button-group",{attrs:{items:t.listSelector,active:t.active},on:{select:function(e){t.active=e}}})],1),n("cx-suggestion-list",{staticClass:"col-12 pa-0 ma-0",attrs:{sourceLanguage:t.sourceLanguage,targetLanguage:t.targetLanguage,active:"suggestions"===t.active}}),n("cx-translation-list",{staticClass:"col-12 pa-0 ma-0",attrs:{sourceLanguage:t.sourceLanguage,targetLanguage:t.targetLanguage,translationStatus:"published",active:"published"===t.active}}),n("cx-translation-list",{staticClass:"col-12 pa-0 ma-0",attrs:{sourceLanguage:t.sourceLanguage,targetLanguage:t.targetLanguage,translationStatus:"draft",active:"draft"===t.active}}),n("mw-bottom-navigation",{staticClass:"d-xs-only-flex d-sm-only-flex d-none"},[n("mw-button-group",{attrs:{items:t.listSelector,active:t.active},on:{select:function(e){t.active=e}}})],1)],1)},p=[],w=(n("ac1f"),n("3ca3"),n("841c"),n("2b3d"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mw-card",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],class:"cx-translation-list--"+t.translationStatus,attrs:{title:t.$i18n("cx-translation-label-"+t.translationStatus)}},[t.loaded?t._e():n("mw-spinner"),t._l(t.translations,(function(e,a){return n("div",{key:t.translationStatus+"-"+a,staticClass:"row pa-0 ma-0"},[n("cx-translation-work",{staticClass:"col-12 pa-0 ma-0",attrs:{translation:e.translation}})],1)}))],2)}),v=[],x=(n("c975"),n("5e62")),b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.translation?n("div",{directives:[{name:"show",rawName:"v-show",value:t.translation,expression:"translation"}],staticClass:"row cx-translation pa-4",on:{click:t.handleClick}},[n("div",{staticClass:"col-2 pa-2"},[n("mw-thumbnail",{attrs:{thumbnail:t.getImage(t.translation.sourceLanguage,t.translation.sourceTitle)}})],1),n("div",{staticClass:"col-9 pa-2"},[n("div",{staticClass:"row"},[n("span",{staticClass:"col-12 cx-translation__source-title",attrs:{lang:t.translation.sourceLanguage}},[t._v(t._s(t.translation.sourceTitle))]),n("span",{staticClass:"col-12 cx-translation__target-title",attrs:{lang:t.translation.targetLanguage}},[t._v(t._s(t.translation.targetTitle))]),n("span",{staticClass:"col-12 mt-2 cx-translation__languages text-small"},[n("mw-autonym",{attrs:{lang:t.translation.sourceLanguage}}),n("mw-icon",{attrs:{icon:t.mwIconArrowForward}}),n("mw-autonym",{attrs:{lang:t.translation.targetLanguage}})],1)])]),n("div",{staticClass:"col-1 pa-2"},[n("mw-icon",{attrs:{size:24,icon:"published"===t.translation.status?t.mwIconEdit:t.mwIconTrash}})],1)]):t._e()},S=[],L=n("f3f3"),y=n("3592"),C=n("5872"),_=n("23cb"),T=n("2f62"),I={name:"cx-translation-work",data:function(){return{mwIconEdit:u["h"],mwIconTrash:u["o"],mwIconArrowForward:u["b"]}},props:{translation:{type:Object,required:!0}},components:{MwThumbnail:y["a"],MwAutonym:_["a"],MwIcon:C["a"]},computed:Object(L["a"])({},Object(T["b"])({articles:function(t){return t.mediawiki.articles}})),methods:{handleClick:function(t){this.$emit("click",t)},getMetadata:function(t,e){return this.$store.getters["mediawiki/getMetadata"](t,e)},getImage:function(t,e){var n=this.getMetadata(t,e);return n&&n.thumbnail}}},k=I,j=(n("69ee"),Object(d["a"])(k,b,S,!1,null,null,null)),M=j.exports,O=n("3d5e"),P={name:"cx-translation-list",components:{CxTranslationWork:M,MwCard:x["a"],MwSpinner:O["a"]},props:{active:{type:Boolean,default:!1},translationStatus:{type:String,validator:function(t){return-1!==["published","draft"].indexOf(t)}},sourceLanguage:{type:String,default:"en"},targetLangauge:{type:String}},data:function(){return{loaded:!1}},computed:{translations:function(){return"published"===this.translationStatus?this.$store.state.translator.publishedTranslations:this.$store.state.translator.draftTranslations}},watch:{translations:function(){this.loaded=!0}}},$=P,A=Object(d["a"])($,w,v,!1,null,null,null),F=A.exports,R=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}]},[n("mw-card",{staticClass:"cx-translation-list--suggestions",attrs:{title:t.$i18n("cx-suggestionlist-title")}},[t.pageSuggestionsLoaded?t._e():n("mw-spinner"),t._l(t.pageSuggestionForPairSubset,(function(e,a){return n("div",{key:"suggestion-"+a,staticClass:"row pa-0 ma-0"},[n("cx-translation-suggestion",{staticClass:"col-12 pa-0 ma-0",attrs:{suggestion:e,from:t.sourceLanguage,to:t.targetLanguage}})],1)}))],2),t.sectionSuggestionForPair.length?n("mw-card",{staticClass:"cx-translation-list--sx-suggestions",attrs:{title:t.$i18n("cx-suggestionlist-expand-sections-title")}},[t.sectionSuggestionsLoaded?t._e():n("mw-spinner"),t._l(t.sectionSuggestionForPair,(function(e,a){return n("div",{key:"suggestion-"+a,staticClass:"row pa-0 ma-0"},[n("cx-translation-suggestion",{staticClass:"col-12 pa-0 ma-0",attrs:{suggestion:e,from:e.sourceLanguage,to:e.targetLanguage},on:{click:function(n){return t.startSectionTranslation(e)}}})],1)}))],2):t._e(),t.pageSuggestionsLoaded?n("mw-button",{attrs:{block:!0,label:t.$i18n("cx-suggestionlist-refresh"),outlined:!1,icon:t.mwIconRefresh},on:{click:t.reloadSuggestions}}):t._e(),t.currentSectionTranslation?n("sx-article-selector",{attrs:{active:t.showSxArticleSelector,sourceLanguage:t.currentSectionTranslation.sourceLanguage,targetLanguage:t.currentSectionTranslation.targetLanguage,sourceTitle:t.currentSectionTranslation.sourceTitle},on:{close:t.onSectionTranslationDialogClose}}):t._e()],1)},E=[],N=(n("fb6a"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"row cx-suggestion pa-4",attrs:{if:t.suggestion},on:{click:t.handleClick}},[n("div",{staticClass:"col-2 pa-2"},[n("mw-thumbnail",{attrs:{thumbnail:t.thumbnail}})],1),n("div",{staticClass:"col-9 pa-2"},[n("div",{staticClass:"row ma-0",attrs:{if:t.suggestion}},[n("span",{staticClass:"col-12 cx-suggestion__source-title",attrs:{lang:t.from}},[t._v(t._s(t.displayTitle))]),n("span",{staticClass:"col-12 cx-suggestion__source-description",attrs:{lang:t.from}},[t._v(t._s(t.description))]),n("span",{staticClass:"col-12 mt-2 cx-suggestion__languages text-small"},[n("mw-autonym",{attrs:{lang:t.from}}),t._v(" "),n("mw-icon",{attrs:{icon:t.mwIconArrowForward}}),n("mw-autonym",{attrs:{lang:t.to}})],1)])]),n("div",{staticClass:"col-1 pa-2"},[n("mw-icon",{attrs:{icon:t.mwIconStar,size:24}})],1)])}),B=[],D=(n("a4d3"),n("e01a"),n("5319"),{name:"TranslationSuggestion",data:function(){return{mwIconStar:u["n"],mwIconArrowForward:u["b"]}},props:{suggestion:{type:Object},from:{type:String,default:null},to:{type:String,default:null}},components:{MwThumbnail:y["a"],MwAutonym:_["a"],MwIcon:C["a"]},computed:{description:function(){return this.metadata&&this.metadata.description},thumbnail:function(){return this.metadata&&this.metadata.thumbnail},metadata:function(){return this.$store.getters["mediawiki/getMetadata"](this.from,this.displayTitle)},displayTitle:function(){return(this.suggestion.title||this.suggestion.sourceTitle).replace(/_/g," ")}},methods:{handleClick:function(t){this.$emit("click",t)},autonym:function(t){return languagedata.getAutonym(t)}}}),U=D,q=(n("46f8"),Object(d["a"])(U,N,B,!1,null,null,null)),z=q.exports,G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mw-dialog",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],staticClass:"sx-article-selector",attrs:{fullscreen:!0},on:{close:function(e){return t.onClose()}}},[n("template",{slot:"header"},[n("div",{staticClass:"row justify-end sx-article-selector__header"},[n("div",{staticClass:"col-1"},[n("mw-thumbnail",{attrs:{thumbnail:t.getImage(t.sourceLanguage,t.sourceTitle)}})],1),n("div",{staticClass:"col-9"},[n("div",{},[t._v(t._s(t.sourceTitle))]),n("div",{staticClass:"sx-article-selector__langLinksCount"},[n("mw-icon",{attrs:{icon:t.mwIconLanguage}}),t._v(" "+t._s(t.langLinksCount)+" ")],1)]),n("div",{staticClass:"col-2 justify-center items-start"},[n("mw-button",{staticClass:"pa-0",attrs:{type:"icon",large:!0,icon:t.mwIconBookmarkOutline}}),n("mw-button",{staticClass:"pa-0",attrs:{type:"icon",large:!0,icon:t.mwIconClose},on:{click:function(e){return t.onClose()}}})],1)])]),n("div",{staticClass:"sx-article-selector__body"},[n("div",{staticClass:"row sx-article-selector__languages"},[n("div",{staticClass:"col-5 justify-end"},[n("mw-button",{attrs:{indicator:t.mwIconExpand,type:"text",outlined:!1,large:!0}},[n("mw-autonym",{attrs:{lang:t.sourceLanguage}})],1)],1),n("div",{staticClass:"col-2 justify-center"},[n("mw-icon",{attrs:{icon:t.mwIconArrowNext}})],1),n("div",{staticClass:"col-5 justify-start"},[n("mw-button",{attrs:{indicator:t.mwIconExpand,type:"text",outlined:!1,large:!0}},[n("mw-autonym",{attrs:{lang:t.targetLanguage}})],1)],1)]),n("mw-divider"),n("div",{staticClass:"row sx-article-selector__action justify-center mt-8 mb-8"},[n("mw-button",{staticClass:"col-8",attrs:{large:!0,progressive:!0,disabled:0===t.missingSectionsCount,label:t.$i18n("cx-sx-select-section")},on:{click:function(e){return t.onSectionSelectorClick()}}})],1),t.missingSectionsCount?n("div",{directives:[{name:"i18n",rawName:"v-i18n",value:{msg:"cx-sx-missing-section-stats",params:[t.missingSectionsCount,t.getAutonym(this.targetLanguage)]},expression:"{\n        msg: 'cx-sx-missing-section-stats',\n        params: [missingSectionsCount, getAutonym(this.targetLanguage)]\n      }"}],staticClass:"row sx-article-selector__action justify-center mt-8 mb-8"}):t._e(),n("div",{staticClass:"row sx-article-selector__license justify-center ma-0"},[n("p",{staticClass:"pa-2",domProps:{innerHTML:t._s(t.$i18n("cx-license-agreement"))}})])],1),t.suggestion?n("sx-section-selector",{attrs:{active:t.showSectionTranslation,suggestion:t.suggestion},on:{close:t.onSectionSelectorDialogClose}}):t._e()],2)},W=[],H=(n("b64b"),n("25f0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("mw-dialog",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],staticClass:"sx-selector",attrs:{animation:"slide-up",fullscreen:!0},on:{close:function(e){return t.onClose()}}},[n("template",{slot:"header"},[n("div",{staticClass:"row justify-end sx-selector__header"},[n("div",{staticClass:"col-11"},[n("h3",{directives:[{name:"i18n",rawName:"v-i18n",value:"cx-sx-section-selector-title",expression:"'cx-sx-section-selector-title'"}],staticClass:"sx-selector__header-text ma-0"}),n("h2",{staticClass:"sx-selector__title ma-0"},[t._v(t._s(t.suggestion.sourceTitle))])]),n("div",{staticClass:"col-1 justify-end items-center"},[n("mw-button",{staticClass:"pa-0",attrs:{large:!0,type:"icon",icon:t.mwIconClose},on:{click:function(e){return t.onClose()}}})],1)])]),n("div",{staticClass:"sx-selector__body"},[n("h3",{directives:[{name:"i18n",rawName:"v-i18n",value:"cx-sx-section-selector-subtitle",expression:"'cx-sx-section-selector-subtitle'"}],staticClass:"row justify-start ps-1"}),n("p",{directives:[{name:"i18n",rawName:"v-i18n",value:"cx-sx-section-selector-desc",expression:"'cx-sx-section-selector-desc'"}],staticClass:"row justify-start ps-1"}),n("ul",{staticClass:"sx-selector__missing-sections-list ma-0"},t._l(t.suggestion.missing,(function(e,a){return n("li",{key:a,staticClass:"row"},[n("mw-button",{staticClass:"col-12 justify-between",attrs:{indicator:t.mwIconArrowForward,label:a,type:"text",outlined:!1,block:!0}})],1)})),0)])],2)}),J=[],X=n("a88b"),K={name:"sx-section-selector",components:{MwDialog:X["a"],MwButton:o["a"]},data:function(){return{mwIconClose:u["g"],mwIconArrowForward:u["b"]}},props:{active:{type:Boolean,default:!1},suggestion:{type:Object}},methods:{onClose:function(){this.$emit("close")},onSectionSelectorClick:function(){this.$emit("section-selector-button-click"),this.$emit("section-listing-open")}}},Q=K,V=(n("7ece"),Object(d["a"])(Q,H,J,!1,null,null,null)),Y=V.exports,Z=n("29b6"),tt={name:"sx-article-selector",components:{MwDialog:X["a"],MwDivider:Z["a"],MwAutonym:_["a"],MwIcon:C["a"],MwThumbnail:y["a"],SxSectionSelector:Y,MwButton:o["a"]},data:function(){return{mwIconClose:u["g"],mwIconExpand:u["i"],mwIconLanguage:u["k"],mwIconBookmarkOutline:u["f"],MwDivider:Z["a"],mwIconArrowNext:u["c"],showSectionTranslation:!1}},props:{active:{type:Boolean,default:!1},sourceLanguage:String,sourceTitle:String,targetLanguage:String},computed:Object(L["a"])({},Object(T["b"])({languageInfo:function(t){return t.mediawiki.languageInfo}}),{langLinksCount:function(){var t;return null===(t=this.getMetadata(this.sourceLanguage,this.sourceTitle))||void 0===t?void 0:t.langLinksCount},suggestion:function(){return this.$store.getters["suggestions/getSectionSuggestionsForArticle"](this.sourceLanguage,this.targetLanguage,this.sourceTitle)},missingSectionsCount:function(){var t;return Object.keys((null===(t=this.suggestion)||void 0===t?void 0:t.missing)||{}).length}}),methods:{getMetadata:function(t,e){return this.$store.getters["mediawiki/getMetadata"](t,e)},getImage:function(t,e){var n=this.getMetadata(t,e);return n&&n.thumbnail},getAutonym:function(t){var e,n=Intl.DisplayNames&&new Intl.DisplayNames(t);return(null===(e=this.languageInfo[t])||void 0===e?void 0:e.autonym)||(null===n||void 0===n?void 0:n.of(t))||t},onClose:function(){this.$emit("close")},setURLParams:function(){if(history.pushState){var t=new URL(location.href),e=new URLSearchParams(location.search);e.set("page",this.sourceTitle),e.set("from",this.sourceLanguage),e.set("to",this.targetLanguage),e.set("sx",!0),t.search=e,t=t.toString(),history.replaceState({url:t},null,t)}},onSectionSelectorClick:function(){this.$emit("section-translation-article-select"),this.showSectionTranslation=!0,this.setURLParams(),this.$emit("section-listing-open")},onSectionSelectorDialogClose:function(){this.showSectionTranslation=!1,this.$emit("section-listing-close"),this.$emit("close")}}},et=tt,nt=(n("93c3"),Object(d["a"])(et,G,W,!1,null,null,null)),at=nt.exports,st={name:"cx-translation-list",components:{CxTranslationSuggestion:z,SxArticleSelector:at,MwCard:x["a"],MwButton:o["a"],MwSpinner:O["a"]},props:{active:{type:Boolean,default:!1},sourceLanguage:{type:String,default:"en"},targetLanguage:{type:String}},data:function(){return{mwIconRefresh:u["m"],pageSuggestionsLoaded:!1,sectionSuggestionsLoaded:!0,showSxArticleSelector:!1,startIndex:0,currentSectionTranslation:null,endIndex:3}},computed:{pageSuggestionForPair:function(){return this.$store.getters["suggestions/getSuggestionsForPair"](this.sourceLanguage,this.targetLanguage)},sectionSuggestionForPair:function(){return this.$store.getters["suggestions/getSectionSuggestionsForPair"](this.sourceLanguage,this.targetLanguage)},pageSuggestionForPairSubset:function(){return this.pageSuggestionForPair.slice(this.startIndex,this.endIndex)}},watch:{pageSuggestionForPair:function(){this.pageSuggestionsLoaded=!0},sectionSuggestionForPair:function(){this.sectionSuggestionsLoaded=!0},active:function(){var t,e;this.active&&((null===(t=this.pageSuggestionForPair)||void 0===t?void 0:t.length)||this.$store.dispatch("suggestions/getSuggestions",{sourceLanguage:this.sourceLanguage,targetLanguage:this.targetLanguage}),(null===(e=this.sectionSuggestionForPair)||void 0===e?void 0:e.length)||this.$store.dispatch("suggestions/getSectionSuggestions",{sourceLanguage:this.sourceLanguage,targetLanguage:this.targetLanguage}))}},methods:{reloadSuggestions:function(){this.startIndex+=this.endIndex,this.endIndex+=this.endIndex,this.pageSuggestionForPair.length<=this.startIndex&&(this.startIndex=0,this.endIndex=3)},startSectionTranslation:function(t){this.showSxArticleSelector=!0,this.currentSectionTranslation=t},onSectionTranslationDialogClose:function(){this.showSxArticleSelector=!1}},mounted:function(){var t=new URLSearchParams(location.search),e=t.get("sx"),n=t.get("from"),a=t.get("to"),s=t.get("page");e&&s&&(this.$store.dispatch("suggestions/getSectionSuggestionsForArticle",{sourceLanguage:n,targetLanguage:a,sourceTitle:s}),this.startSectionTranslation({sourceLanguage:n,targetLanguage:a,sourceTitle:s,missing:{}}))}},it=st,ot=Object(d["a"])(it,R,E,!1,null,null,null),rt=ot.exports,ct=n("b1ab"),ut=n("703d"),lt={name:"cx-dashboard",components:{CxSuggestionList:rt,CxTranslationList:F,MwButtonGroup:ct["a"],MwBottomNavigation:ut["a"]},data:function(){return{mwIconArticleCheck:u["d"],mwIconLightBulb:u["l"],mwIconEdit:u["h"],suggestionsLoaded:!1,publishedTranslationsLoaded:!1,draftTranslationsLoaded:!1,active:"draft",sourceLanguage:"en",targetLanguage:"ml"}},computed:{listSelector:function(){return[{value:"suggestions",props:{label:this.$i18n("cx-translation-filter-suggested-translations"),icon:u["l"],type:"text"}},{value:"draft",props:{label:this.$i18n("cx-translation-filter-draft-translations"),icon:u["h"],type:"text"}},{value:"published",props:{label:this.$i18n("cx-translation-filter-published-translations"),icon:u["d"],type:"text"}}]}},watch:{active:function(){window.scrollTo(0,0)}},mounted:function(){var t=new URLSearchParams(window.location.search),e=t.get("sx");e&&(this.active="suggestions")},created:function(){this.$store.dispatch("translator/init"),this.$store.dispatch("mediawiki/fetchLanguageInfo")}},gt=lt,dt=Object(d["a"])(gt,h,p,!1,null,null,null),mt=dt.exports,ft=(n("5c26"),{name:"cx-dashboard-app",components:{MwButton:o["a"],CxHeader:f,CxDashboard:mt},data:function(){return{mwIconAdd:u["a"]}}}),ht=ft,pt=(n("7c55"),Object(d["a"])(ht,s,i,!1,null,null,null)),wt=pt.exports,vt=(n("4de4"),n("bc3a")),xt=n.n(vt);function bt(t){var e={action:"query",format:"json",assert:"user",formatversion:2,list:"contenttranslation",type:t},n=mw.util.wikiScript("api");return xt()({method:"get",url:n,api:n,params:e,withCredentials:!0}).then((function(t){return t.data.query.contenttranslation.translations}))}function St(){return bt("published")}function Lt(){return bt("draft")}var yt={fetchDraftTranslations:Lt,fetchPublishedTranslations:St},Ct={username:mw.config.get("wgUserName"),publishedTranslations:[],draftTranslations:[],savedForLaterTranslations:[]},_t={setPublishedTranslations:function(t,e){t.publishedTranslations=e},setDraftTranslations:function(t,e){t.draftTranslations=e}},Tt={getPublishedTranslationsForLanguagePair:function(t){return function(e,n){return t.publishedTranslations.filter((function(t){return t.translation.sourceLanguage===e&&t.translation.targetLanguage===n}))}}},It={init:function(t){var e=t.dispatch;e("publishedTranslations"),e("draftTranslations")},publishedTranslations:function(t){var e=t.commit,n=t.dispatch;yt.fetchPublishedTranslations().then((function(t){e("setPublishedTranslations",t);for(var a=0;a<t.length;a++)n("mediawiki/fetchMetadata",{language:t[a].translation.sourceLanguage,titles:[t[a].translation.sourceTitle]},{root:!0})}))},draftTranslations:function(t){var e=t.commit,n=t.dispatch;yt.fetchDraftTranslations().then((function(t){e("setDraftTranslations",t);for(var a=0;a<t.length;a++)n("mediawiki/fetchMetadata",{language:t[a].translation.sourceLanguage,titles:[t[a].translation.sourceTitle]},{root:!0})}))}},kt={namespaced:!0,state:Ct,getters:Tt,actions:It,mutations:_t},jt=(n("99af"),n("7db0"),n("96cf"),n("c964")),Mt=n("fc11"),Ot=n("d0ff");function Pt(t,e,n){var a={source:t,target:e,seed:n,search:"related_articles",application:"CX"},s=mw.config.get("wgRecommendToolAPIURL");return xt.a.get(s,{params:a}).then((function(t){return t.data}))}function $t(t,e,n){return At.apply(this,arguments)}function At(){return At=Object(jt["a"])(regeneratorRuntime.mark((function t(e,n,a){var s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=new mw.cx.SiteMapper,i=s.getCXServerUrl("/suggest/sections/".concat(n,"/").concat(e,"/").concat(a)),t.next=4,xt.a.get(i).then((function(t){var e;return null===(e=t.data)||void 0===e?void 0:e.sections}));case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),At.apply(this,arguments)}function Ft(t){return Rt.apply(this,arguments)}function Rt(){return Rt=Object(jt["a"])(regeneratorRuntime.mark((function t(e){var n,a,s,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=[],a=0;case 2:if(!(a<e.length)){t.next=13;break}return s=e[a].translation,t.next=6,$t(s.sourceLanguage,s.sourceTitle,s.targetLanguage);case 6:if(i=t.sent,n.push(i),5!==n.length){t.next=10;break}return t.abrupt("break",13);case 10:a++,t.next=2;break;case 13:return t.abrupt("return",n);case 14:case"end":return t.stop()}}),t)}))),Rt.apply(this,arguments)}var Et={fetchSuggestions:Pt,fetchSectionSuggestions:$t,getSxSuggestionsFromPublishedArticles:Ft},Nt={suggestions:{},sectionSuggestions:{},favorites:{}},Bt={addSuggestions:function(t,e){var n=e.sourceLanguage,a=e.targetLanguage,s=e.suggestions,i="".concat(n,"/").concat(a);t.sectionSuggestions[i]=t.sectionSuggestions[i]||[],t.suggestions=Object(L["a"])({},t.suggestions,Object(Mt["a"])({},i,[].concat(Object(Ot["a"])(s),Object(Ot["a"])(t.sectionSuggestions[i]))))},addSectionSuggestions:function(t,e){var n=e.sourceLanguage,a=e.targetLanguage,s=e.suggestions,i="".concat(n,"/").concat(a);t.sectionSuggestions[i]=t.sectionSuggestions[i]||[],t.sectionSuggestions=Object(L["a"])({},t.sectionSuggestions,Object(Mt["a"])({},i,[].concat(Object(Ot["a"])(s),Object(Ot["a"])(t.sectionSuggestions[i]))))}},Dt={getSuggestionsForPair:function(t){return function(e,n){return t.suggestions["".concat(e,"/").concat(n)]||[]}},getSectionSuggestionsForPair:function(t){return function(e,n){return t.sectionSuggestions["".concat(e,"/").concat(n)]||[]}},getSectionSuggestionsForArticle:function(t){return function(e,n,a){var s=t.sectionSuggestions["".concat(e,"/").concat(n)]||[];return s.find((function(t){return t.sourceTitle===a}))}}},Ut={getSuggestions:function(t,e){var n=t.commit,a=t.dispatch;Et.fetchSuggestions(e.sourceLanguage,e.targetLanguage,e.seeds).then((function(t){var s=[];n("addSuggestions",{sourceLanguage:e.sourceLanguage,targetLanguage:e.targetLanguage,suggestions:t});for(var i=0;i<t.length;i++)s.push(t[i].title);s.length&&a("mediawiki/fetchMetadata",{language:e.sourceLanguage,titles:s},{root:!0})}))},getSectionSuggestions:function(t,e){var n=t.commit,a=t.dispatch,s=t.rootGetters;return Object(jt["a"])(regeneratorRuntime.mark((function t(){var i,o,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=[],o=s["translator/getPublishedTranslationsForLanguagePair"](e.sourceLanguage,e.targetLanguage),t.next=4,Et.getSxSuggestionsFromPublishedArticles(o);case 4:for(r=t.sent,n("addSectionSuggestions",{sourceLanguage:e.sourceLanguage,targetLanguage:e.targetLanguage,suggestions:r}),c=0;c<r.length;c++)i.push(r[c].sourceTitle);i.length&&a("mediawiki/fetchMetadata",{language:e.sourceLanguage,titles:i},{root:!0});case 8:case"end":return t.stop()}}),t)})))()},getSectionSuggestionsForArticle:function(t,e){var n=t.commit,a=t.dispatch;t.rootGetters;return Object(jt["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Et.fetchSectionSuggestions(e.sourceLanguage,e.sourceTitle,e.targetLanguage);case 2:s=t.sent,n("addSectionSuggestions",{sourceLanguage:e.sourceLanguage,targetLanguage:e.targetLanguage,suggestions:[s]}),a("mediawiki/fetchMetadata",{language:e.sourceLanguage,titles:[e.sourceTitle]},{root:!0});case 5:case"end":return t.stop()}}),t)})))()}},qt={namespaced:!0,state:Nt,getters:Dt,actions:Ut,mutations:Bt};n("a15b");function zt(t,e){var n={action:"query",format:"json",formatversion:2,prop:"info|pageprops|pageimages|description|pageviews|langlinkscount",pvipdays:7,piprop:"thumbnail|name|original",pithumbsize:100,titles:e.join("|"),origin:"*"},a="https://".concat(t,".wikipedia.org/w/api.php");return xt.a.get(a,{params:n}).then((function(t){return t.data.query.pages}))}var Gt={fetchMetadata:zt};function Wt(t){var e={action:"query",format:"json",formatversion:2,meta:"languageinfo",liprop:"autonym|dir",origin:"*"};return t&&(e["licontinue"]=t),xt.a.get(mw.util.wikiScript("api"),{params:e}).then((function(t){var e,n=null===(e=t.data.continue)||void 0===e?void 0:e.licontinue,a=t.data.query.languageinfo;return n&&(a=Object.assign({},a,Wt(n))),a}))}var Ht={fetchLanguageInfo:Wt},Jt={articles:{},languageInfo:{}},Xt={addArticleMetadata:function(t,e){var n="".concat(e.pagelanguage,"/").concat(e.title);t.articles=Object(L["a"])({},t.articles,Object(Mt["a"])({},n,e))},setLanguageInfo:function(t,e){t.languageInfo=e}},Kt={getMetadata:function(t){return function(e,n){var a="".concat(e,"/").concat(n);return t.articles[a]}}},Qt={fetchMetadata:function(t,e){var n=t.commit;Gt.fetchMetadata(e.language,e.titles).then((function(t){for(var e=0;e<t.length;e++)n("addArticleMetadata",t[e])}))},fetchLanguageInfo:function(t,e){var n=t.commit;Ht.fetchLanguageInfo().then((function(t){n("setLanguageInfo",t)}))}},Vt={namespaced:!0,state:Jt,getters:Kt,actions:Qt,mutations:Xt};a["a"].use(T["a"]);var Yt=new T["a"].Store({modules:{translator:kt,suggestions:qt,mediawiki:Vt}}),Zt=n("5093"),te=n.n(Zt),ee=mw.config.get("wgUserLanguage"),ne="en",ae=mw.messages.values||{};a["a"].use(te.a,{locale:ee,finalFallback:ne,messages:ae}),new a["a"]({store:Yt,render:function(t){return t(wt)},el:"#cxdashboard"})},"69ee":function(t,e,n){"use strict";var a=n("7b46"),s=n.n(a);s.a},7275:function(t,e,n){"use strict";var a=n("a2f6"),s=n.n(a);s.a},"7b46":function(t,e,n){},"7c55":function(t,e,n){"use strict";var a=n("2395"),s=n.n(a);s.a},"7ece":function(t,e,n){"use strict";var a=n("be16"),s=n.n(a);s.a},"93c3":function(t,e,n){"use strict";var a=n("0f8f"),s=n.n(a);s.a},a2f6:function(t,e,n){},be16:function(t,e,n){},e243:function(t,e,n){}});
//# sourceMappingURL=cxdashboard.js.map